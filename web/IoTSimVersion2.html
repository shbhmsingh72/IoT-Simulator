<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>IoT Simulator</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">

  <!-- IcoMoon Icons -->
  <link rel="stylesheet" type="text/css" href="css/icomoon.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="css/simulator.css">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  <link rel=stylesheet type=text/css href=css/iot.css>
  <link href="css/AdminLTE.min.css" rel="stylesheet">
    <link href="css/skin/_all-skins.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/main.css">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">


  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
      <script src="js/jQuery/jQuery-2.1.4.min.js"></script>
<!-- SlimScroll -->
<script src="js/slimScroll/jquery.slimscroll.min.js"></script>

<style type="text/css">
/*

  IMPORTANT: CHECK WHETHER PREVIOUS CONFIGURATION IS RE-SELECTED. IF SO, NO NEED TO RE-CONFIGURE. ELSE, STOP ALL DEVICES AND RE-CONFIGURE WITH NEW SET OF DEVICES


        */

ul.tab {
    list-style-type: none;
    margin-top: 40px;
    margin-left:0px;
    padding: 0;
    overflow: hidden;
    border: 1px solid #ccc;
    background-color: #f1f1f1;
}

/* Float the list items side by side */
ul.tab li {float: left;}

/* Style the links inside the list items */
ul.tab li a {
    display: inline-block;
    color: black;
    text-align: center;
    padding: 0px 0px;
    text-decoration: none;
    transition: 0.3s;
    font-size: 17px;
}

/* Change background color of links on hover */
ul.tab li a:hover {
    background-color: #ddd;
}
/* Create an active/current tablink class */
ul.tab li a:focus, .active {
    background-color: #ccc;
}
.dropdown-submenu {
    position: relative;
}

.dropdown-submenu .dropdown-menu {
    top: 0;
    left: 100%;
    margin-top: -1px;
}

/* Style the tab content 
.tabcontent {
    display: none;
    position:absolute;
    padding: 6px 12px;
    height:70%;
    border-width:0px;
    -webkit-animation: fadeEffect 1s;
    animation: fadeEffect 1s;
}*/
</style>
  
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<!-- ADD THE CLASS layout-top-nav TO REMOVE THE SIDEBAR. -->
<body class="skin-blue fixed" data-spy="scroll" data-target="#scrollspy" style="height: auto;">
<header class="main-header" style='align:center;background-color:#367fa9;color:#fff;'>
  <div class="logo"><img src='images/Sim.ico' style="height:30px;padding-right:10px"/>
   IoT Simulator </div>
 <nav class="navbar navbar-static-top" role="navigation">
<div class="collapse navbar-collapse pull-left" id="navbar-collapse">
  <ul class="nav navbar-nav">
  <!--<li><a  class="tablinks" id=DevicesTab name=DevicesTab onclick="openDetail(event, 'Devices')"  style="background-color:rgba(60,141,188,1);color:#fff;">Home<span class="sr-only">(current)</span></a></li>
  <li><a  class="tablinks" id=TemplatesTab name=TemplatesTab onclick="openDetail(event, 'Templates')"  style="background-color:#367fa9;color:#fff;">Templates</a></li>--> 
<li class="dropdown notifications-menu" style="background-color:#3c8dbc;cursor:pointer'">
            <a  class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true"  style='cursor:pointer'>
              <!--<i class="fa fa-bell-o"></i>-->
              <img src="images/OpenMenu.png" style="height:15px;">
            </a>
            <ul class="dropdown-menu" style="height:122px">
              <li>
                <!-- inner menu: contains the actual data -->
                <ul class="menu" style="height:122px;">
                  <li style='cursor:pointer'>
                    <a  onclick="create_conf();" style='cursor:pointer'>
                    <img src="images/CreateNew.png" height="15px" style='cursor:pointer'>
                      <!--<i class="fa fa-users text-aqua"></i> -->Create New
                    </a>
                  </li>
                  <li style='cursor:pointer'>
                    <a  onclick="open_conf();">
                    <img src="images/OpenExisting.png" height="15px" style='cursor:pointer'>
                      <!--<i class="fa fa-warning text-yellow"></i>-->Open Existing
                    </a>
                  </li>
                  <li style='cursor:pointer'>
                    <a  onclick="openDetail(event,'Templates');">
                      <!--<i class="fa fa-users text-red"></i>-->
                      <img src="images/Template.png" height="15px" style='cursor:pointer'> Templates
                    </a>
                  </li>
                </ul>
              </li>
              </ul>
          </li>
          <li><a class="tablinks" id=TemplatesTab name=TemplatesTab style="background-color:#367fa9;color:#fff;display:none">Templates</a></li>
           </ul>
</div>
<span style="position:absolute;top:15px;left:380px;font-size:14px;color:white;display:none;" id=errmsg name=errmsg>Trial Version - Upgrade @&nbsp;<a href="http://www.bevywise.com/iot-simulator/" style="color:white;text-decoration:underline;">Bevywise</a></span>
<span style="position:absolute;top:15px;left:540px;font-size:18px;color:red;display:none;" id=brokermsg name=brokermsg>Broker is not available</span>

      <div class="collapse navbar-collapse pull-right" id="navbar-collapse" style="margin-top:10px">

                    <div class="btn-group" style="background-color:rgba(60,141,188,1);">

                      <button type="button" style="margin-left:10px;margin-right:10px;display:none" class="btn btn-success"  id='startallclients' name='startallclients' disabled=false>Start All</button>
                      <button type="button" class="btn btn-danger" style="margin-left:10px;margin-right:10px;display:none" id='stopallclients' name='stopallclients'>Stop All</button>
                    </div>
        </div>

</nav>

</header>

  <!-- Full Width Column -->
 <div id="bulktab" name="bulktab" class=tabcontent style="position:absolute;left:0px;border:none">
  <div class="content-wrapper" style="margin-left:0px;">
   <!-- container class removed -->  <div class="container" style="width:100%">
      <!-- Content Header (Page header) -->
      <!-- <section class="content-header">
        <h1>Template</h1>
      </section> -->

      <!-- Main content -->
      <section class="content">
          <div class="container-fluid box page-container mt20" style="min-height: 400px;">
                


                <!-- Form wizard with step validation section start -->
<section id="validation">
    <div class="row">
        <div class="col-xs-12">
            <div class="card">
            <section class="content-header">
        <h1>Bulk Creation of Devices</h1><hr class="simulator-heading-hr">
      </section>
                <div class="card-body collapse in">
                    <div class="card-block">
                        <form id="bulk_form" name="bulk_form" action="/" class="steps-validation wizard-circle wizard-button">

                            <!-- Step 1 -->
                            <h6>Device Detail</h6>
                            <fieldset>

                                <div class="row">

                                    <div class="col-md-6 mr20 col-md-offset-1">
                                    <section class="form-sub-heading">
                                    <h2>Device Details</h2><hr>
                                    </section>
                                    <div class="form-section col-md-10">
                                        <div class="form-group">
                                            <label >
                                                No of Devices
                                                <!-- <span class="danger">*</span> -->
                                            </label>
                                            <input type="text" class="form-control" name="devices_count_txta" id="devices_count_txta">
                                        </div>
                                        <div class="form-group">
                                            <label >
                                                Device Name Prefix
                                                <!-- <span class="danger">*</span> -->
                                            </label>
                                            <input type="text" class="form-control" name="dev_name_prefix_txta" id="dev_name_prefix_txta" >
                                        </div>
                                        <div class="form-group">
                                            <label >
                                                Description
                                            </label>
                                            <input type="text" class="form-control" name="dev_desc_prefix_txt" id="dev_desc_prefix_txt" >
                                        </div>
                                        <div class="form-group">
                                            <label >
                                                Will Topic
                                            </label>
                                            <input type="text" class="form-control" name="will_topic_pattern_txt" id="will_topic_pattern_txt">
                                        </div>
                                       <div class="form-group">
                                         <label>Will Message Type</label>
                                           <select id="will_message_type" name="will_message_type" class="form-control">
                                             <!--<option value="">Select Type</option>-->
                                             <option value="random">Random</option>
                                             <option value="range">Range</option>
                                           </select>
                                       </div>
                                       <div class="form-group">
                                         <div id="random" class="message-type-option section-show"> 
                                           <label>Will Message</label>
                                               <input type="text" class="form-control" name="will_random_message" id="will_random_message" placeholder="X | Y | Z">
                                         </div>
                                       </div>
                                       <div class="form-group">
                                         <div id="range" class="message-type-option section-hide"> 
                                            <label>Will Message</label>
                                              <div class="row">
                                                 <div class="col-md-6">
                                                   <input class="form-control" type="number" id=will_start_message name=will_start_message placeholder="Initial Value">
                                                   <!-- <span class="span-font">Start</span> -->
                                                 </div>
                                                  <div class="col-md-6">
                                                  <input class="form-control" type="number" id=will_end_message name=will_end_message placeholder="End Value">
                                                  <!-- <span class="span-font">End</span> -->
                                                  </div>
                                                  <input id=will_message_txt name=will_message_txt style="display:none">
                                              </div>
                                        </div>
                                     </div>
                                     
                                     <div class="form-group">
                                         <label>Will Qos Type</label>
                                           <select id="will_qos_type" name="will_qos_type" class="form-control">
                                             <option value="qos_fixed">Fixed</option>
                                             <option value="qos_random">Random</option>
                                           </select>
                                       </div>
                                       <div class="form-group">
                                         <div id="qos_fixed" name="qos_fixed" class="qos-type-option section-show"> 
                                           <label>Will Qos</label>
                                               <select  class="form-control">
                                                   <option value=1>0-Atmost Once</option>
                                                   <option value=2>1-Atleast Once</option>
                                                   <option value=3>2-Exactly Once</option>
                                           </select>
                                         </div>
                                       </div>
                                       <div class="form-group">
                                         <div id="qos_random" name="qos_random" class="qos-type-option section-hide"> 
                                            <label>Will Qos</label>
                                               <select  class="form-control" disabled>
                                                   <option>QoS will be randomly selected</option>
                                           </select>
                                        </div>
                                     </div>


                                     <div class="form-group">
                                         <label>Will Retain Type</label>
                                           <select id="will_retain_type" name="will_retain_type" class="form-control">
                                             <option value="retain_fixed">Fixed</option>
                                             <option value="retain_random">Random</option>
                                           </select>
                                       </div>
                                       <div class="form-group">
                                         <div id="retain_fixed" name="retain_fixed" class="retain-type-option section-show"> 
                                           <label>Will Retain</label>
                                                <select  class="form-control">
                                                   <option value=0>0-Clear Retain Flag</option>
                                                   <option value=1>1-Set Retain Flag</option>
                                                </select>
                                         </div>
                                       </div>
                                       <div class="form-group">
                                         <div id="retain_random" name="retain_random" class="retain-type-option section-hide"> 
                                            <label>Will Retain</label>
                                               <select  class="form-control" disabled>
                                                   <option>Retain Flag will be randomly set</option>
                                           </select>
                                        </div>
                                     </div>
                                                <select name="choicenew" id="choicenew" style='display:none'>
            <option value="addbulk">addbulk</option>
            <option value="getdb">getdb</option>
          </select>

                                    </div>
                                    
                                    

                                    </div>

                                     <div class="col-md-4">
                                    <section class="form-sub-heading">
                                    <h2>Help</h2><hr>
                                    </section>
                                    <div class="simulator-help-text">
                               <p>Number of devices specified will be created in bulk.Each device name will be prefixed with the specified 'device-name-prefix'.</p>
                                  <p>Will Topic Example: will/$client_id/room. $client_id will be replaced by actual device name</p>
                                  <p>Will Message Type: 'RANDOM' : The Will Message has to be given as comma separated values. Eg., Open,Close. One among the values will be chosen in random and set to the devices.</p>
                                  <p>Will Message Type: 'RANGE' : The Will Message will be chosen in between the initial and end value specified.</p>
                                  <p>Will QoS/Retain Type: 'FIXED' : All the devices will be given the fixed QoS/Retain selected</p>
                                  <p>Will QoS/Retain Type: 'RANDOM' : All the devices will be set with random QoS/Retain.</p>        </div>

                                    </div>

                                    
                                </div>

                              
                            </fieldset>

                            <!-- Step 2 -->
                            <h6>Subscription</h6>
                            <fieldset>
                                     
<div class="row">

                                    <div class="col-md-6 mr20 col-md-offset-1">
                                    <section class="form-sub-heading">
                                    <h2>Subscription</h2><hr>
                                    </section>
                                   <!--new table  -->
                                 <table class="table table-responsive table-heading">
                                        <thead>
                                            <tr>
                                                <th class="col-md-4">Topic</th>
                                                <th class="col-md-2">Qos</th>
                                                <th class="col-md-6" colspan="3" style="text-align:center">Subscription Time</th>
                                                <th class="col-md-2" rowspan=2 style='vertical-align:middle'></th>
                                            </tr>
                                            <!--<tr>
                                                <th class="col-md-2" style='text-align:center'>Hour</th>
                                                <th class="col-md-2" style='text-align:center'>Minute</th>
                                                <th class="col-md-2" style='text-align:center'>Second</th>
                                            </tr>-->
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            <tr>
                                                <td><input class="form-control"  type="text" id="sub_topic0" name="sub_topic0" placeholder="Topic" /></td>
                                                <td><select id="sub_qos0" name="sub_qos0" class="form-control"><option value=0>0-Atmost Once</option>
                                                   <option value=1>1-Atleast Once</option>
                                                   <option value=2>2-Exactly Once</option></select></td>
                                                <td>
                                                  <select id="sub_hour0" name="sub_hour0" class="form-control col-md-2">
                                                  <option value=-1>hr</option>
                                        
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option><option value=*>Every</option>

                                                  </select>
                                                </td>

                                                <td>
                                                  <select id="sub_minute0" name="sub_minute0" class="form-control col-md-2">
                                                  <option value=-1>min</option>
                                                  <option value=-1>-1</option>
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option> 
                                                  <option value=24>24th</option>
                                                  <option value=25>25th</option>
                                                  <option value=26>26th</option>
                                                  <option value=27>27th</option>
                                                  <option value=28>28th</option>
                                                  <option value=29>29th</option>
                                                  <option value=30>30th</option>
                                                  <option value=31>31st</option>
                                                  <option value=32>32nd</option>
                                                  <option value=33>33rd</option> 
                                                  <option value=34>34th</option>
                                                  <option value=35>35th</option>
                                                  <option value=36>36th</option>
                                                  <option value=37>37th</option>
                                                  <option value=38>38th</option>
                                                  <option value=39>39th</option>
                                                  <option value=40>40th</option>
                                                  <option value=41>41st</option>
                                                  <option value=42>42nd</option>
                                                  <option value=43>43rd</option>  
                                                  <option value=44>44th</option>
                                                  <option value=45>45th</option>
                                                  <option value=46>46th</option>
                                                  <option value=47>47th</option>
                                                  <option value=48>48th</option>
                                                  <option value=49>49th</option>
                                                  <option value=50>50th</option>
                                                  <option value=51>51st</option>
                                                  <option value=52>52nd</option>
                                                  <option value=53>53rd</option>  
                                                  <option value=54>54th</option>
                                                  <option value=55>55th</option>
                                                  <option value=56>56th</option>
                                                  <option value=57>57th</option>
                                                  <option value=59>59th</option>
                                                  <option value=*>Every</option>

                                                  </select>
                                                </td>

                                                <td>
                                                  <select id="sub_second0" name="sub_second0" class="form-control col-md-4">
                                                  <option value=-1>sec</option>
                                                  <option value=-1>-1</option>
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option> 
                                                  <option value=24>24th</option>
                                                  <option value=25>25th</option>
                                                  <option value=26>26th</option>
                                                  <option value=27>27th</option>
                                                  <option value=28>28th</option>
                                                  <option value=29>29th</option>
                                                  <option value=30>30th</option>
                                                  <option value=31>31st</option>
                                                  <option value=32>32nd</option>
                                                  <option value=33>33rd</option> 
                                                  <option value=34>34th</option>
                                                  <option value=35>35th</option>
                                                  <option value=36>36th</option>
                                                  <option value=37>37th</option>
                                                  <option value=38>38th</option>
                                                  <option value=39>39th</option>
                                                  <option value=40>40th</option>
                                                  <option value=41>41st</option>
                                                  <option value=42>42nd</option>
                                                  <option value=43>43rd</option>  
                                                  <option value=44>44th</option>
                                                  <option value=45>45th</option>
                                                  <option value=46>46th</option>
                                                  <option value=47>47th</option>
                                                  <option value=48>48th</option>
                                                  <option value=49>49th</option>
                                                  <option value=50>50th</option>
                                                  <option value=51>51st</option>
                                                  <option value=52>52nd</option>
                                                  <option value=53>53rd</option>  
                                                  <option value=54>54th</option>
                                                  <option value=55>55th</option>
                                                  <option value=56>56th</option>
                                                  <option value=57>57th</option>
                                                  <option value=59>59th</option>
                                                  <option value=*>Every</option>

                                                  </select>
                                                </td>
                                                
                                                <td>
                                                    <button class="btn btn-success subscribtion-fields-add template-add" type="button">
                                                        <i class="glyphicon glyphicon-plus"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>

<!-- new table end -->
                                    </div>
                                    <input type=text id=subscribe_ids name=subscribe_ids style="display:none"/>
                                    <input type=button value=BulkAdd onclick="addbulkdevices()">

                                    <div class="col-md-4">
                                    <section class="form-sub-heading">
                                    <h2>Help</h2><hr>
                                    </section>
                                    <div class="simulator-help-text">
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                    </div>

                                    </div>

                                    
                                </div>



                                
                            </fieldset>

                            <!-- Step 3 -->
                            <h6>Publish Message</h6>
                            <fieldset>
                                
                                <div class="row" style="margin-left:-80px">

                                    <div class="col-md-6 mr20 col-md-offset-1">
                                    <section class="form-sub-heading">
                                    <h2>Publish Message Details</h2><hr>
                                    </section>
                          <table class="table table-responsive table-heading">
                                        <thead>
                                            <tr>
                                                <th class="col-md-2">Topic</th>
                                                <th class="col-md-2">QoS</th>
                                                <th class="col-md-6" colspan="3" style='text-align:center;'>Time</th>
                                                <th class="col-md-2">Retain</th>
                                                <th class="col-md-2">Type</th>
                                                <th class="col-md-2"></th>
                                            </tr>
                                        </thead>
                                        <tfoot>
                                            <tr>
                                                
                                            </tr>
                                        </tfoot>
                                        <tbody>
                                            <tr>
                                          <td><input class="form-control"  type="text" placeholder="Topic" /></td>
                                          <td><select  class="form-control"><option>0-Atmost Once</option><option> 1-Atleast Once</option><option>2-Exactly Once</option></select></td>
                                           <td>
                                                  <select id="sub_hour0" name="sub_hour0" class="form-control">
                                         
                                                  <option value=-1>-1</option>
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option><option value=*>Every</option>

                                                  </select>
                                                </td>

                                                <td>
                                                  <select id="sub_minute0" name="sub_minute0" class="form-control">
                                                  <option value=-1>min</option>
                                                  <option value=-1>-1</option>
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option> 
                                                  <option value=24>24th</option>
                                                  <option value=25>25th</option>
                                                  <option value=26>26th</option>
                                                  <option value=27>27th</option>
                                                  <option value=28>28th</option>
                                                  <option value=29>29th</option>
                                                  <option value=30>30th</option>
                                                  <option value=31>31st</option>
                                                  <option value=32>32nd</option>
                                                  <option value=33>33rd</option> 
                                                  <option value=34>34th</option>
                                                  <option value=35>35th</option>
                                                  <option value=36>36th</option>
                                                  <option value=37>37th</option>
                                                  <option value=38>38th</option>
                                                  <option value=39>39th</option>
                                                  <option value=40>40th</option>
                                                  <option value=41>41st</option>
                                                  <option value=42>42nd</option>
                                                  <option value=43>43rd</option>  
                                                  <option value=44>44th</option>
                                                  <option value=45>45th</option>
                                                  <option value=46>46th</option>
                                                  <option value=47>47th</option>
                                                  <option value=48>48th</option>
                                                  <option value=49>49th</option>
                                                  <option value=50>50th</option>
                                                  <option value=51>51st</option>
                                                  <option value=52>52nd</option>
                                                  <option value=53>53rd</option>  
                                                  <option value=54>54th</option>
                                                  <option value=55>55th</option>
                                                  <option value=56>56th</option>
                                                  <option value=57>57th</option>
                                                  <option value=59>59th</option>
                                                  <option value=*>Every</option>

                                                  </select>
                                                </td>

                                                <td>
                                                  <select id="pub_second0" name="pub_second0" class="form-control col-md-4">
                                                  <option value=-1>sec</option>
                                                  <option value=-1>-1</option>
                                                  <option value=0 style=padding-left:5px;>0th</option>
                                                  <option value=1>1st</option>
                                                  <option value=2>2nd</option>
                                                  <option value=3>3rd</option>
                                                  <option value=4>4th</option>
                                                  <option value=5>5th</option>
                                                  <option value=6>6th</option>
                                                  <option value=7>7th</option>
                                                  <option value=8>8th</option>
                                                  <option value=9>9th</option>
                                                  <option value=10>10th</option>
                                                  <option value=11>11th</option>
                                                  <option value=12>12th</option>
                                                  <option value=13>13th</option>
                                                  <option value=14>14th</option>
                                                  <option value=15>15th</option>
                                                  <option value=16>16th</option>
                                                  <option value=17>17th</option>
                                                  <option value=18>18th</option>
                                                  <option value=19>19th</option>
                                                  <option value=20>20th</option>
                                                  <option value=21>21st</option>
                                                  <option value=22>22nd</option>
                                                  <option value=23>23rd</option> 
                                                  <option value=24>24th</option>
                                                  <option value=25>25th</option>
                                                  <option value=26>26th</option>
                                                  <option value=27>27th</option>
                                                  <option value=28>28th</option>
                                                  <option value=29>29th</option>
                                                  <option value=30>30th</option>
                                                  <option value=31>31st</option>
                                                  <option value=32>32nd</option>
                                                  <option value=33>33rd</option> 
                                                  <option value=34>34th</option>
                                                  <option value=35>35th</option>
                                                  <option value=36>36th</option>
                                                  <option value=37>37th</option>
                                                  <option value=38>38th</option>
                                                  <option value=39>39th</option>
                                                  <option value=40>40th</option>
                                                  <option value=41>41st</option>
                                                  <option value=42>42nd</option>
                                                  <option value=43>43rd</option>  
                                                  <option value=44>44th</option>
                                                  <option value=45>45th</option>
                                                  <option value=46>46th</option>
                                                  <option value=47>47th</option>
                                                  <option value=48>48th</option>
                                                  <option value=49>49th</option>
                                                  <option value=50>50th</option>
                                                  <option value=51>51st</option>
                                                  <option value=52>52nd</option>
                                                  <option value=53>53rd</option>  
                                                  <option value=54>54th</option>
                                                  <option value=55>55th</option>
                                                  <option value=56>56th</option>
                                                  <option value=57>57th</option>
                                                  <option value=59>59th</option>
                                                  <option value=*>Every</option>

                                                  </select>
                                                </td>

                                          <td><!--<input class=form-check-input style="padding:0px;margin:0px" type="checkbox"/>-->
                                            <select class=form-control id="publish_retain0" name="publish_retain0">
                                            <option value=0>0-Clear Retain Flag</option>
                                            <option value=1>1-Set Retain Flag</option>
                                            </select>
                                          </td>
                                          <td><select class="form-control publish-msg-type" id=publish_message_type0 name=publish_message_type0>
                                          <option value=publish-text-type>Text</option><option value=json-class>JSON</option>   </select> </td>
                                          <tr>
                                          <td><input type=text placeholder="Key" class="form-control json-class section-hide"></td>
                                          <td colspan="2"><select id="publish_value_type0" name="publish_value_type0" class="form-control publish-text-type">
                                          <option value=publish_type_constant0>Constant</option>
                                          <option value=publish_type_sys_var0>System Variables</option><option value=publish_type_random0>Random</option>
                                          <option value=publish_type_range0>Range</option>
                                          </select>
                                          <select id="json_value_type0" name="json_value_type0" class="form-control json-class json-text-type section-hide">
                                          <option value=json_type_constant0>Constant</option>
                                          <option value=json_type_sys_var0>System Variables</option><option value=json_type_random0>Random</option>
                                          <option value=json_type_range0>Range</option>
                                          </select>
                                          </td>
                                          <td colspan=4>
                                          <input type=text class='publish-text-option section-show form-control publish-constant' id="publish_type_constant0" name="publish_type_constant0" placeholder="Constant Message"/>
                                          <select class='publish-text-option section-hide form-control' id="publish_type_sys_var0" name="publish_type_sys_var0">
                                          <option value='$client_id'>$client_id
                                          </option>
                                          <option value='$current_time'>$current_time</option>
                                          <option value='$client_uptime'>$client_uptime</option></select>
                                          <input type=text class='publish-text-option section-hide form-control' id="publish_type_random0" name="publish_type_random0" placeholder="high | low" />
                                               <div class="form-group">
                                         <div id="publish_type_range0" name="publish_type_range0" class='publish-text-option section-hide'> 
                                              <div class="row">
                                                 <div class="col-md-6">
                                                   <input class="form-control" type="number" id=will_start_message name=will_start_message placeholder="Initial Value">
                                                   <!-- <span class="span-font">Start</span> -->
                                                 </div>
                                                  <div class="col-md-6">
                                                  <input class="form-control" type="number" id=will_end_message name=will_end_message placeholder="End Value">
                                                  <!-- <span class="span-font">End</span> -->
                                                  </div>
                                                  <input id=will_message_txt name=will_message_txt style="display:none">
                                              </div>
                                        </div>
                                     </div>
                                         <!-- <span class="span-font">End</span> -->

<input type=text class='json-class json-text-option section-hide form-control' id="json_type_constant0" name="json_type_constant0" placeholder="Constant Message"/>
                                          <select class='json-text-option section-hide form-control' id="json_type_sys_var0" name="json_type_sys_var0">
                                          <option value='$client_id'>$client_id
                                          </option>
                                          <option value='$current_time'>$current_time</option>
                                          <option value='$client_uptime'>$client_uptime</option></select>
                                          <input type=text class='json-text-option section-hide form-control' id="json_type_random0" name="json_type_random0" placeholder="high | low" />
                                               <div class="form-group">
                                         <div id="json_type_range0" name="json_type_range0" class='json-text-option section-hide'> 
                                              <div class="row">
                                                 <div class="col-md-6">
                                                   <input class="form-control" type="number" id=json_start_message name=json_start_message placeholder="Initial Value">
                                                   <!-- <span class="span-font">Start</span> -->
                                                 </div>
                                                  <div class="col-md-6">
                                                  <input class="form-control" type="number" id=json_end_message name=json_end_message placeholder="End Value">
                                                  <!-- <span class="span-font">End</span> -->
                                                  </div>
                                                  <input id=json_message_txt name=json_message_txt style="display:none">
                                              </div>
                                        </div>
                                     </div>

                                          </td>
                                          <td><img class='json-class section-hide' src='images/dbdrop.png' style='height:25px;width:25px'></td>
                                          </tr>
                                          <!--<td>
                                            <select class="form-control">
                                            </select>
                                          </td>-->
                                          <tr>
                                          <td>
                                                    <button class="btn btn-success publish-fields-add template-add" type="button">
                                                        <i class="glyphicon glyphicon-plus"></i>
                                                    </button>
                                                </td>
                                                </tr>
                                            </tr>

                                        </tbody>
                                    </table>

                                    </div>

                                    <div class="col-md-4">
                                    <section class="form-sub-heading">
                                    <h2>Help</h2><hr>
                                    </section>
                                    <div class="simulator-help-text">
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
                                  <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>
                                    </div>

                                    </div>

                                    
                                </div>
                            </fieldset> 
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- Form wizard with step validation section end -->

            
          </div>
        <!-- /.box -->
      </section>
      <!-- /.content -->
    </div>
    <!-- /.container -->
  </div></div>
  <!-- /.content-wrapper -->
<div class="wrapper">
<div id="Templates" name="Templates" class="tabcontent">

<form id="template_form" name="template_form" method="post" action='/'>

<aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <div class="slimScrollDiv" style="position: relative; overflow: auto; width: auto; height: 570px;"><div id="scrollspy" name="scrollspy" style="height: auto; overflow: auto; width: auto;">

        <input type=text id=next_clk_txt name=next_clk_txt value=0 style="display:none"/>

      <div id=activedev name=activedev style="display:none;position:absolute;top:18px;left:120px;width:50px;z-index:10;cursor:pointer;" onclick="addactivedevices();"> (Active/ </div>
    <div id=alldev name=alldev style="display:none;position:absolute;top:18px;left:165px;width:40px;z-index:10;cursor:pointer"            onclick="addalldevices();">All)</div>
          <ul class="nav sidebar-menu" id=template name=template style=color:white>Templates
          </ul>
        </div>





<img src='images/plus.png' id=templateadd name=templateadd class="devimg plusimg" style="position:absolute;display:block;top:50px;left:180px;z-index:99;" onclick="f(this.id);"/>
            
        </div>
<div class="slimScrollBar" style="background: rgba(0, 0, 0, 0.2); width: 3px; position: absolute; top: 158px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 58.393px;"></div>
<div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                <ul class="pagination pagination-sm no-margin pull-bottom"  style="padding-left:10px;position:absolute;top:650px;" id=template_track name=template_track>
               <li><a >&laquo;</a></li>
                <li><a >1</a></li>
                
                </ul>
      </aside>
<div class="content-wrapper" style="margin-left:231px;margin-top:0px;min-height: 916px;min-width:100px">
    <section class="content-header" style='padding-top:0px;'>

<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Template Details</h3>
<div class='btn-group'>
      <input type=button name=edit id=edit style='margin-right:10px;margin-left:10px;width:80px' class="btn btn-sm btn-info" value="Edit" onclick="f(this.id);" style='width:500px'/>

</div>
            </div>
            <!-- /.box-header -->

          <input type=text name=t_type id=t_type style="display:none" readonly=true value="  "/>
          
            <div class="box-body no-padding">
              <table class="table" style='text-align:left'>
                <tbody>
                <tr>
                  <td> Client Name </td>
                  <td style='text-align:left;font-weight:normal;width:450px;'>
      <input type=text name=t_name id=t_name style="border:none;" tabindex=-1 readonly=true value=" "/>
                  </td>
                </tr>
               <tr>
                  <td style='text-align:left;font-weight:normal'> Client Description </td>
                  <td style='text-align:left;font-weight:normal'>
      <input type=text name=t_desc id=t_desc style="border:none;" tabindex=-1 readonly=true value="  "/>
                  </td>
                </tr>
 

           
    


                <tr>
                  <td>WILL Topic </td>
                  <td style='text-align:left;font-weight:normal'>
      <span style=width:300px>
      <input type=text name=template_will_topic id=template_will_topic style="border:none;align:left;font-weight:normal;" tabindex=-1 readonly=true value="one"/>

      </span>
      
                  </td>
                </tr>
                <tr>
                  <td>WILL Message</td>
                  <td style='text-align:left;font-weight:normal'>
<input type=text name=template_will_msg id=template_will_msg style="border:none;width:250px;" tabindex=-1 readonly=true value="one">      
                  </td>
                </tr>
                <tr>
                  <td style='text-align:left;font-weight:normal'>WILL Retain</td>
                  <td style='text-align:left;font-weight:normal'>
    <input type=text name=template_will_retain id=template_will_retain  style="border:none;" tabindex=-1 readonly=true value="0"/>
                  </td>
                </tr>

              </tbody></table>
            </div>
            <!-- /.box-body -->
          </div>
<button name=edit1 id=edit1 style='display:none;position:absolute;top:140px;left:1130px;' class="btn btn-info" value="Edit" onclick="f(this.id);"></button>
          <input type=button name=temp_save id=temp_save class=hidden style='display:none;position:absolute;top:180px;left:1180px;' value="Save"></input>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Publish Messages</h3>
<img src='images/plus.png' style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' alt="Click to add Publish messages" id='template_pubimg' name='template_pubimg' class=plusimg onclick="fnaddpub(this.id);"> </img>

<div class="box-tools">         

                <ul class="pagination pagination-sm no-margin pull-right" id=template_pub_track name=template_pub_track>
               <!--<li><a >&laquo;</a></li>
                <li><a >1</a></li>
                <li><a >2</a></li>
                <li><a >3</a></li>
                <li><a >&raquo;</a></li>-->
                </ul>
              </div>
          <select name="template_choice" id="template_choice" style='display:none'>
            <option value="dbselect">dbselect</option>          
            <option value="add">Add</option>
            <option value="update">Update</option>
            <option value="adddevice">adddevice</option>
            <option value="addpub">addpub</option>
            <option value="addsub">addsub</option>
            <option value="pubupdate">pubupdate</option>
            <option value="subupdate">subupdate</option>
            <option value="resupdate">resupdate</option>
            <option value="droppmsg">droppmsg</option>
            <option value="dropsmsg">dropsmsg</option>
            <option value="droprmsg">droprmsg</option>
            <option value="dbselect1">dbselect1</option>
            <option value="runpublish">runpublish</option>
            <option value="stoppublish">stoppublish</option>
            <option value="runsubscribe">runsubscribe</option>
            <option value="stopsubscribe">stopsubscribe</option>
            <option value="addres">addres</option>
            <option value="publishmsg">publishmsg</option>
            <option value="subscribemsg">subscribemsg</option>
            <option value="responsemsg">responsemsg</option>
            <option value="runclient">runclient</option>
            <option value="stopclient">stopclient</option>
            <option value="instantpublish">instantpublish</option>
            <option value="adddb">adddb</option>
            <option value="startall">startall</option>
            <option value="stopall">stopall</option>
            <option value="getstatus">getstatus</option>
            <option value="addbulk">addbulk</option>
            <option value="getdb">getdb</option>
          </select>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=template_pub_table name=template_pub_table>
                <tbody><tr>
                  <th rowspan=2 style="vertical-align: middle;">Topic</th>
                  <th rowspan=2 style="vertical-align: middle;">Message</th>
                  <th rowspan=2 style="vertical-align: middle;">QoS</th>
      <th rowspan=2 style="vertical-align: middle;">Retain</th>
      <th colspan=3 style="text-align: center;">Publish</th>
      <th rowspan=2 style="vertical-align:middle">Edit</th>
      <th rowspan=2 style="vertical-align:middle">Delete</th>
                </tr>
                <tr>
                <th style="text-align: center"> Hour </th>
                <th style="text-align: center"> Minute</th>
                <th style="text-align: center"> Second</th>
                </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=template_nopub name=template_nopub style="display:none">
              <table class="table" id=template_no_pub_table name=template_no_pub_table>
                <tbody><tr>
                 <th width=268 style="text-align: center">Topic</th>
                  <th width=268 style="text-align: center">Message</th>
                  <th width=268 style="text-align: center">QoS</th>
      <th width=568 style="text-align: center">Retain</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Subscribed Topics</h3>
<img src='images/plus.png' style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' class=plusimg alt="Click to add Subscribe messages" id='template_subimg' name='template_subimg' onclick="fnaddpub(this.id);"> </img>       

<div class="box-tools">
                <ul class="pagination pagination-sm no-margin pull-right"  id=template_sub_track name=template_sub_track>
              <!-- <li><a >&laquo;</a></li>
                <li><a >1</a></li>
                <li><a >2</a></li>
                <li><a >3</a></li>
                <li><a >&raquo;</a></li>-->
                </ul>
              </div>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=template_sub_table name=template_sub_table>
                <tbody><tr>
                  <th rowspan=2 style="vertical-align: middle;">Subscribed Topic</th>
      <th rowspan=2 style="vertical-align: middle;">QoS</th>
      <th colspan=3 style="text-align: center">Subscribe On </th>
      <th rowspan=2 style="vertical-align: middle;">  Edit  </th>
      <th rowspan=2 style="vertical-align: middle;">  Unsubscribe  </th>
                </tr>
                <tr>
                  <th style="text-align: center">Hour</th>
                  <th style="text-align: center">Minute</th>
                  <th style="text-align: center">Second</th>
                  </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=template_nosub name=template_nosub style="display:none">
              <table class="table" id=template_no_sub_table name=template_no_sub_table>
                <tbody><tr>
                 <th width=536 style="text-align: center">Subscribed Topic</th>
                  <th width=836 style="text-align: center">QoS</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Behavior Simulation</h3>
<img src='images/plus.png' style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' class=plusimg alt="Click to add Behavior Simulation" id='template_resimg' name='template_resimg' onclick="fnaddpub(this.id);"> </img> 

    <div class="box-tools">
<input type=button name=next_log id=next_log style='display:none;position:absolute;top:540px;left:920px;color:blue;border-style:none;' value="More..." onclick="next_log_disp();"></input>  
                <ul class="pagination pagination-sm no-margin pull-right" id=template_log_track name=template_log_track>
            <!--<li><a >&laquo;</a></li>
            <li><a onclick="next_log_disp(0);">1</a></li>
            <li><a onclick="next_log_disp(1);">2</a></li>
            <li><a onclick="next_log_disp(2);">3</a></li>
            <li><a onclick="next_log_disp();">&raquo;</a></li>-->
                </ul>
              </div>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=template_log_table name=template_log_table>
                <tbody><tr>
                  <th>RequestTopic</th>
                  <th>RequestMessage</th>
                  <th>ResponseTopic</th>
                  <th>ResponseMessage</th>
      <th>QoS</th>
      <th>Retain</th>
      <th>Edit</th>
      <th>Delete</th>
                </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=template_noreqres name=template_noreqres style="display:none">
              <table class="table" id=template_no_reqres_table name=template_no_reqres_table>
                <tbody><tr>
                 <th width=178 style="text-align: center">RequestTopic</th>
                  <th width=178 style="text-align: center">RequestMessage</th>
                 <th width=178 style="text-align: center">ResponseTopic</th>
                  <th width=178 style="text-align: center">ResponseMessage</th>
                  <th width=178 style="text-align: center">QoS</th>
      <th width=378 style="text-align: center">Retain</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
</section>
</div>
<input type=label id=template_deveditflag name=template_deveditflag value="10" style="display:none"></input>
<input type=label id=template_devtab name=template_devtab value=0 style="display:none"></input> 
<input type=label id=template_ruletab name=template_ruletab value=0 style="display:none"></input> 
<input type=label id=template_addactiveflag name=template_addactiveflag value="0" style="display:none"></input>
<input type=text id=template_ruletype name=template_ruletype value="0" style="display:none"></input>
<input type=text id=template_resmsg name=template_resmsg value="" style="display:none"></input>
<input type=text id=template_message_type name=template_message_type value="" style="display: none"></input>
<input type=text id=template_type_txt0 name=template_type_txt0 value="" style="display: none"></input>
<input type=text id=template_json_pubm_txt name=template_json_pubm_txt value="" style="display: none;"></input>
      <input type=textbox id=template_confname name=template_confname value="" style="display:none"></input>
        </div>
</form>
</div>



    </div>


<div class="wrapper">
<div id="Devices" name="Devices" class="tabcontent">

<form id="myform" name="myform" method="post" action='/'>

<aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <div class="slimScrollDiv" style="position: relative; overflow: auto; width: auto; height: 570px;"><div id="scrollspy" name="scrollspy" style="height: auto; overflow: auto; width: auto;">

<div class=showrecords style=display:none>
<div class=nextrec>
<button class="nextimgg" id=next name=next disabled=true></button>
</div>
<div id=rec_count class=cntrec>
</div>
    <div class=prevrec>
<button class="previmg" id=prev name=prev disabled=true></button>
    </div>
    
</div>
        <input type=text id=next_clk_txt name=next_clk_txt value=0 style="display:none"/>

      <div id=activedev name=activedev style="display:none;position:absolute;top:18px;left:120px;width:50px;z-index:10;cursor:pointer;" onclick="addactivedevices();"> (Active/ </div>
    <div id=alldev name=alldev style="display:none;position:absolute;top:18px;left:165px;width:40px;z-index:10;cursor:pointer"            onclick="addalldevices();">All)</div>
    <div style="color:white;position:absolute;top:20px" class="dropdown"><span id=list_tag name="list_tag" style="font-size:medium;">Device List</span>
<!--<div class="dropdown">-->
   <img src='images/plus.png' id=devadd1 name=devadd1 class="dropdown-toggle devimg plusimg" data-toggle="dropdown" style="position:absolute;display:block;top:5px;left:110px;z-index:99;"/>
  <img src='images/plus.png' data-toggle="tooltip" title="Create New Template" id=template_add name=template_add class="devimg plusimg" style="position:absolute;display:none;top:5px;left:180px;z-index:99;" onclick="f(this.id)"/>

    <ul class="dropdown-menu" style="min-width:50px;left:115px;">
      <li style='cursor:pointer'><a id=devadd name=devadd tabindex="-1" style="padding:3px 5px" onclick="f(this.id)" style='cursor:pointer'>Add New</a></li>
      <li style='cursor:pointer'><a tabindex="-1" style="padding:3px 5px" onclick="load_templates();$('#addbulkdialog').modal('show');" style='cursor:pointer'>From Template</a></li>
    </ul>
  </div>

   <!-- </div>-->
          <ul class="nav sidebar-menu" id=device name=device style="color:white;position:absolute;top:40px;">
          </ul>
        </div>
<!--<img src='images/plus.png' id=devadd name=devadd class="devimg plusimg" style="position:absolute;display:block;top:50px;left:180px;z-index:99;" onclick="f(this.id);"/>
<img src='images/plus.png' id=devadd name=devadd class="devimg plusimg"/>-->

            
        </div>
<div class="slimScrollBar" style="background: rgba(0, 0, 0, 0.2); width: 3px; position: absolute; top: 158px; opacity: 0.4; display: none; border-radius: 7px; z-index: 99; right: 1px; height: 58.393px;"></div>
<div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                <ul class="pagination pagination-sm no-margin pull-bottom"  style="padding-left:10px;position:absolute;top:650px;" id=dev_track name=dev_track>
               <li><a >&laquo;</a></li>
                <li><a >1</a></li>
                
                </ul>
      </aside>
      <div id=connectmsg name=connectmsg class="content-wrapper" style="font-size:80px;padding-top:240px;text-align:center;margin-left:231px;margin-top:0px;min-height:916px;min-width:100px"></div>

<div class="content-wrapper" id="rt_side_panel" name="rt_side_panel" style="margin-left:231px;margin-top:0px;min-height: 916px;min-width:100px;display: block">
    <section class="content-header" style='padding-top:0px;'>

<div class="row">
<div class="box">
            <div class="box-header">
            <span style="inline-block">

              <h3 class="box-title" id="heading" name="heading">Device Details</h3>

            <img src='images/DeleteDevice.png' style="height:20px;float:right;padding-right:10px"  id='deletedevice' name='deletedevice' onclick="f_delete();" title="Delete Device">

    <!-- <input type=button name=delete_device id=delete_device style='margin-right:10px;margin-left:10px;width:80px' class="btn btn-sm btn-info" value="Delete" onclick="f_delete();" style='width:500px'/>
      <input type=button name=edit id=edit style='margin-right:10px;margin-left:10px;width:80px' class="btn btn-sm btn-info" value="Edit" onclick="f(this.id);" style='width:500px'/>-->
                <img src='images/EditDevice.png' style="height:20px;float:right;padding-right:10px;"  id='edit' name='edit' onclick="f(this.id);" title="Edit Device Details">
                    <img src='images/StartDevice.png' style="height:20px;float:right;padding-right:10px"  id='startdevice' name='startdevice' title="Start Device">
    <!--<input type=button value="Start Device" style='margin-right:10px;margin-left:10px'  class="btn btn-sm btn-info" id='startdevice' name='startdevice'/>

    <input type=button value="Stop Device" style='margin-right:10px;margin-left:10px'  class="btn btn-sm btn-info" id='stopdevice' name='stopdevice'/>-->
        <img src='images/StopDevice.png' style="height:20px;float:right;padding-right:10px"  id='stopdevice' name='stopdevice' title="Stop Device">



    <img src='images/tick-green.png' style='margin-top:6px;float:right;display:none' id=tickgreen name=tickgreen  height=20 width=20>
    <img src='images/tick-grey.png' style='margin-top:6px;float:right;display:none' id=tickgrey name=tickgrey  height=20 width=20>
    </span>


            </div>
            <!-- /.box-header -->

          <input type=text name=d_type id=d_type style="display:none" readonly=true value="  "/>
          
            <div class="box-body no-padding">
              <table class="table" style='text-align:left'>
                <tbody>
                <tr>
                  <td id="heading_name" name="heading_name"> Client Name </td>
                  <td style='text-align:left;font-weight:normal;width:450px;'>
      <input type=text name=d_name id=d_name style="border:none;font-weight:normal;text-shadow:0px 0px 1px;" tabindex=-1 readonly=true value=" "/>
                  </td>
                </tr>
               <tr>
                  <td style='text-align:left;font-weight:normal'> Client Description </td>
                  <td style='text-align:left;font-weight:normal'>
      <input type=text name=d_desc id=d_desc style="border:none;font-weight:normal;text-shadow:0px 0px 1px;" tabindex=-1 readonly=true value="  "/>
                  </td>
                </tr>
 

           
    


                <tr>
                  <td>WILL Topic </td>
                  <td style='text-align:left;font-weight:normal'>
      <span style=width:300px>
      <input type=text name=will_topic id=will_topic style="border:none;align:left;font-weight:normal;text-shadow:0px 0px 1px;" tabindex=-1 readonly=true value="one"/>

      </span>
      
                  </td>
                </tr>
                <tr>
                  <td>WILL Message</td>
                  <td style='text-align:left;font-weight:normal'>
<input type=text name=will_msg id=will_msg style="border:none;width:250px;font-weight:normal;text-shadow:0px 0px 1px;" tabindex=-1 readonly=true value="one">      
                  </td>
                </tr>
                <tr>
                  <td style='text-align:left;font-weight:normal'>WILL Retain</td>
                  <td style='text-align:left;font-weight:normal'>
    <input type=text name=will_retain id=will_retain  style="border:none;font-weight:normal;text-shadow:0px 0px 1px;" tabindex=-1 readonly=true value="0"/>
                  </td>
                </tr>

              </tbody></table>
            </div>
            <!-- /.box-body -->
          </div>
<button name=edit1 id=edit1 style='display:none;position:absolute;top:140px;left:1130px;' class="btn btn-info" value="Edit" onclick="f(this.id);"></button>
          <input type=button name=save id=save class=hidden style='display:none;position:absolute;top:180px;left:1180px;' value="Save"></input>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Publish Messages</h3>
<img src='images/plus.png' data-toggle="tooltip" title="Add New Publish Message" style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' alt="Click to add Publish messages" id='pubimg' name='pubimg' class=plusimg onclick="fnaddpub(this.id);"> </img>

<div class="box-tools">         

                <ul class="pagination pagination-sm no-margin pull-right" id=pub_track name=pub_track>
               <!--<li><a >&laquo;</a></li>
                <li><a >1</a></li>
                <li><a >2</a></li>
                <li><a >3</a></li>
                <li><a >&raquo;</a></li>-->
                </ul>
              </div>
          <select name="choice" id="choice" style='display:none'>
            <option value="dbselect">dbselect</option>          
            <option value="add">Add</option>
            <option value="update">Update</option>
            <option value="adddevice">adddevice</option>
            <option value="addpub">addpub</option>
            <option value="addsub">addsub</option>
            <option value="pubupdate">pubupdate</option>
            <option value="subupdate">subupdate</option>
            <option value="resupdate">resupdate</option>
            <option value="droppmsg">droppmsg</option>
            <option value="dropsmsg">dropsmsg</option>
            <option value="droprmsg">droprmsg</option>
            <option value="dbselect1">dbselect1</option>
            <option value="runpublish">runpublish</option>
            <option value="stoppublish">stoppublish</option>
            <option value="runsubscribe">runsubscribe</option>
            <option value="stopsubscribe">stopsubscribe</option>
            <option value="addres">addres</option>
            <option value="publishmsg">publishmsg</option>
            <option value="subscribemsg">subscribemsg</option>
            <option value="responsemsg">responsemsg</option>
            <option value="runclient">runclient</option>
            <option value="stopclient">stopclient</option>
            <option value="instantpublish">instantpublish</option>
            <option value="adddb">adddb</option>
            <option value="startall">startall</option>
            <option value="stopall">stopall</option>
            <option value="getstatus">getstatus</option>
            <option value="addbulk">addbulk</option>
            <option value="getdb">getdb</option>
            <option value="templateselect">templateselect</option>
            <option value="deletedevice">deletedevice</option>
            <option value="check_template_count">check_template_count</option>
          </select>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=pub_table name=pub_table>
                <tbody><tr>
                  <th rowspan=2 style="vertical-align: middle;">Topic</th>
                  <th rowspan=2 style="vertical-align: middle;">Message</th>
                  <th rowspan=2 style="vertical-align: middle;">QoS</th>
      <th rowspan=2 style="vertical-align: middle;">Retain</th>
      <th colspan=3 style="text-align: center;" id=pub_table_sec name=pub_table_sec>Publish</th>
      <th rowspan=2 style="vertical-align:middle">Edit</th>
      <th rowspan=2 style="vertical-align:middle">Delete</th>
                </tr>
                <tr>
                <th style="text-align: center"> Hour </th>
                <th style="text-align: center"> Minute</th>
                <th style="text-align: center" class="sec_class"> Second</th>
                </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=nopub name=nopub style="display:none">
              <table class="table" id=no_pub_table name=no_pub_table>
                <tbody><tr>
                 <th width=268 style="text-align: center">Topic</th>
                  <th width=268 style="text-align: center">Message</th>
                  <th width=268 style="text-align: center">QoS</th>
      <th width=568 style="text-align: center">Retain</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Subscribed Topics</h3>
<img src='images/plus.png' data-toggle="tooltip" title="Add New Subscription" style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' class=plusimg alt="Click to add Subscribe messages" id='subimg' name='subimg' onclick="fnaddpub(this.id);"> </img>       

<div class="box-tools">
                <ul class="pagination pagination-sm no-margin pull-right"  id=sub_track name=sub_track>
              <!-- <li><a >&laquo;</a></li>
                <li><a >1</a></li>
                <li><a >2</a></li>
                <li><a >3</a></li>
                <li><a >&raquo;</a></li>-->
                </ul>
              </div>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=sub_table name=sub_table>
                <tbody><tr>
                  <th rowspan=2 style="vertical-align: middle;">Subscribed Topic</th>
      <th rowspan=2 style="vertical-align: middle;">QoS</th>
      <th colspan=3 style="text-align: center"  id=sub_table_sec name=sub_table_sec>Subscribe On </th>
      <th rowspan=2 style="vertical-align: middle;">  Edit  </th>
      <th rowspan=2 style="vertical-align: middle;" id=sub_table_unsub id=sub_table_unsub>  Unsubscribe  </th>
                </tr>
                <tr>
                  <th style="text-align: center">Hour</th>
                  <th style="text-align: center">Minute</th>
                  <th style="text-align: center" class="sec_class">Second</th>
                  </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=nosub name=nosub style="display:none">
              <table class="table" id=no_sub_table name=no_sub_table>
                <tbody><tr>
                 <th width=536 style="text-align: center">Subscribed Topic</th>
                  <th width=836 style="text-align: center">QoS</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
<div class="row">
<div class="box">
            <div class="box-header">
              <h3 class="box-title">Behavior Simulation</h3>
<img src='images/plus.png' data-toggle="tooltip" title="Add New Behavior" style='position:absolute;top:15px;left:700px;width:20px;height:20px;display:block' class=plusimg id='resimg' name='resimg' onclick="fnaddpub(this.id);"> </img> 

    <div class="box-tools">
<input type=button name=next_log id=next_log style='display:none;position:absolute;top:540px;left:920px;color:blue;border-style:none;' value="More..." onclick="next_log_disp();"></input>  
                <ul class="pagination pagination-sm no-margin pull-right" id=log_track name=log_track>
            <!--<li><a >&laquo;</a></li>
            <li><a onclick="next_log_disp(0);">1</a></li>
            <li><a onclick="next_log_disp(1);">2</a></li>
            <li><a onclick="next_log_disp(2);">3</a></li>
            <li><a onclick="next_log_disp();">&raquo;</a></li>-->
                </ul>
              </div>

            </div>
            <!-- /.box-header -->
            <div class="box-body no-padding">
              <table class="table" id=log_table name=log_table>
                <tbody><tr>
                  <th>RequestTopic</th>
                  <th>RequestMessage</th>
                  <th>ResponseTopic</th>
                  <th>ResponseMessage</th>
      <th>QoS</th>
      <th>Retain</th>
      <th>Edit</th>
      <th>Delete</th>
                </tr>
              </tbody></table>
            </div>
            <!-- /.box-body -->
            <div id=noreqres name=noreqres style="display:none">
              <table class="table" id=no_reqres_table name=no_reqres_table>
                <tbody><tr>
                 <th width=178 style="text-align: center">RequestTopic</th>
                  <th width=178 style="text-align: center">RequestMessage</th>
                 <th width=178 style="text-align: center">ResponseTopic</th>
                  <th width=178 style="text-align: center">ResponseMessage</th>
                  <th width=178 style="text-align: center">QoS</th>
      <th width=378 style="text-align: center">Retain</th>
               </tr>
              </tbody></table>
            </div>

          </div>
</div>
</section>
</div>
<input type=text id=subscribe_value name=subscribe_value value=0 style="display:none" />
<input type=text id=publish_value name=publish_value value=0 style="display:none" />

<input type=label id=deveditflag name=deveditflag value="10" style="display:none"></input>
<input type=label id=devtab name=devtab value=0 style="display:none"></input> 
<input type=label id=ruletab name=ruletab value=0 style="display:none"></input> 
<input type=label id=addactiveflag name=addactiveflag value="0" style="display:none"></input>
<input type=text id=ruletype name=ruletype value="0" style="display:none"></input>
<input type=text id=resmsg name=resmsg value="" style="display:none"></input>
<input type=text id=message_type name=message_type value="" style="display: none"></input>
<input type=text id=type_txt0 name=type_txt0 value="" style="display: none"></input>
<input type=text id=json_pubm_txt name=json_pubm_txt value="" style="display: none;"></input>
      <input type=text id=confname name=confname value="" style="display:none"></input>
      <input type=number id=devices_count_txt name=devices_count_txt style="display:none"/>
      <input type=text id=dev_name_prefix_txt name=dev_name_prefix_txt style="display:none"/>
      <input type=text id=template_selected name=template_selected style="display:none" />
        </div>
</form>
</div>
</div>


<!--  CHECK FOR ADMIN LTE MODAL-->



<div class="modal fade mt-30" id="add_devdialog" name="add_devdialog" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 style="overflow:hidden" id="dev_heading" name="dev_heading">Add Device Details</h4>
      </div>
      <div class="modal-body">
        
       <span id=dn name=dn class="form-group" style="display:none;width:600px">
          <label for="a" id="d_name_lbl" name="d_name_lbl" style="display:block;margin-top:30px;width:300px;margin-left:30px;">Device Name</label>
          <input type=textbox class="form-control" id=d_name_txt name=d_name_txt style="display:block;margin-top:-30px;width:400px;float:right;" placeholder="Enter Device Name" tabindex=9></input>
        </span>
        <span id=dd name=dd class="form-group" style="width:400px;display:none">
          <label for="a" id=d_desc_lbl name=d_desc_lbl style="margin-left:30px">Device Description</label>
          <input type=textbox class="form-control" id=d_desc_txt name=d_desc_txt style="display:block;width:200px;float:right;" placeholder="Enter Device Description" tabindex=10></input>
        </span>
        <span id=wt name=wt class="form-group" style="width:551px;display:none">
          <label for="a"  style="margin-left:30px">Will Topic</label>
          <input type=textbox class="form-control" id=wtopic_txt name=wtopic_txt style="display:block;width:200px;float:right;" placeholder="Use $client_id for dynamic topics" tabindex=11><img id=wqnmark name=wqnmark data-toggle='tooltip' data-trigger="hover" data-content="iiot/$client_id/status will be replaced by iiot/device-name/status" src="/images/blue_question_mark.png" style="height:10px;float:right;margin-top:10px;margin-left:10px;" title="iiot/$client_id/status will be replaced by iiot/device-name/status" /></input>
        </span>
        <span id=wm name=wm class="form-group" style="width:400px;display:none">
          <label for="a" style="margin-left:30px">Will Message</label>
          <input type=textbox class="form-control" id=wmsg_txt name=wmsg_txt style="display:block;width:200px;float:right;" placeholder="Enter Will Message" tabindex=12></input>
        </span>

        <span id=wq name=wq class="form-group" style=width:400px;display:none>
          <label for="b" style="margin-left:30px">Will QoS</label>
          <select name=wqos_txt id=wqos_txt  class="form-control"  style=width:200px;float:right onchange=fnruletype(this.value) tabindex=13>
            <option value="0">0-Atmost once</option>
            <option value="1">1-Atleast once</option>
            <option value="2">2-Exactly once</option>
          </select>
        </span>
        <span id=wr name=wr class="form-group" style=width:400px;display:none>
          <label for="b" style="margin-left:30px">Will Retain</label>
          <select name=wrtn_txt id=wrtn_txt  class="form-control"  style=width:200px;float:right onchange=fnruletype(this.value) tabindex=14>
            <option value="0" selected>0-Clear Retain flag</option>
            <option value="1">1-Set Retain flag</option>
          </select>
        </span>

        <div class="text-center"  id="envchoice" name="envchoice">
 <br>
                  <button class="btn btn-default" id=dev_cancel name=dev_cancel data-value="envchoice" tabindex=15  onclick="$('#add_devdialog').modal('hide');">Cancel</button>
                  <button type="button" class="btn btn-primary" value=Save data-value="envchoice" id=add name=add tabindex=8>Save</button>
        </div>
        
      </div>
      </div>
    </div>
  </div>














<!---->








<div class="modal fade mt-30" id="addenvdialog" name="addenvdialog" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 style="overflow:hidden">Network Environment</h4>
      </div>
      <div class="modal-body">
        
        <div class="form-group" style="width:500px;">
        <label for='dbload'>Select a Network:</label>
        <select class="form-control" id='dbload' name='dbload' style="width:300px;float:right;display:block">
        </select>
        
        </div>

        <div class="text-center"  id="envchoice" name="envchoice">
 <br>
          <button type="button" class="btn btn-ok" id=select_sim_env name=select_sim_env data-value="envchoice">Load</button>
        </div>
        
      </div>
      </div>
    </div>
  </div>


<div class="modal fade mt-30" id="addbulkdialog" name="addbulkdialog" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 style="overflow:hidden">Network Environment</h4>
      </div>
      <div class="modal-body">
        
        <div class="form-group" style="width:500px;">
        <label for='templateload'>Select a Template:</label>
        <select class="form-control" id='templateload' name='templateload' style="width:300px;float:right;display:block">
        </select>
        
        </div>
        <div class="form-group" style="width:500px">
        <label for="devices_count_txt_temp">No. of Devices:</label>
        <input type=number min=1 id='devices_count_txt_temp' name='devices_count_txt_temp' value=5 style="width:300px;padding:6px 12px;float:right;display:block">
        </div>
        <div class="form-group" style="width:500px">
        <label for="dev_name_prefix_txt_temp">Device Name Prefix</label>
        <input type=text placeholder="Enter the prefix" id="dev_name_prefix_txt_temp" name="dev_name_prefix_txt_temp"  style="width:300px;float:right;display:block;padding:6px 12px;">
        </div>

        <div class="text-center"  id="envchoice_bulk" name="envchoice_bulk">
 <br>
          <button type="button" class="btn btn-primary" id=create_bulk name=create_bulk data-value="envchoice_bulk" value=Create>Create
</button>
          <button type="button" class="btn btn-default" id=cancel_bulk name=cancel_bulk data-value="envchoice_bulk" onclick="$('#addbulkdialog').modal('hide');">Cancel</button>


        </div>
        
      </div>
      </div>
    </div>
  </div>



<div class="modal fade mt-30" id="create_envdialog" name="create_envdialog" role="dialog">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 style="overflow:hidden">Create a new Network</h4>
      </div>
      <div class="modal-body">
        
        <div class="form-group" style="width:500px;">
        <label for='dbcreate'>Network Name:</label>
        <input type=text class="form-control" id='envtext' name='envtext' placeholder="Enter network name to create" style="width:300px;float:right;display:block"/>       
        </div>

      <div class="form-group" style="width:500px;margin-top:30px">
                <label for='oneorbulk'>Device Creation:
                  <input type="radio" value='bulk' id="oneorbulk" name="oneorbulk"  style="float:right;margin-top:6px;margin-left:5px"/><span style="margin-left:80px">Empty Network</span>
                  <input type="radio" checked value='single' id="oneorbulk" name="oneorbulk" style="margin-top:6px;margin-left:5px"/><span style="margin-left:20px;margin-top:15px">From Template</span>
      </div>



        <div class="text-center"  id="envcreate" name="envcreate">
 <br>
          <button type="button" class="btn btn-ok" id=create_sim_env name=create_sim_env onclick="newclick()">Create</button>
        </div>
        
      </div>
      </div>
    </div>
  </div>




<div class="modal fade mt-30" id="editdialog" name="editdialog" role="dialog" style="height:auto;">
    <div class="modal-dialog modal-md">
      <div class="modal-content" id=dialog_size name=dialog_size style="height:550px;width:650px;overflow-y:auto;overflow-x:hidden;">
      <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
      <h4 id="pub_heading" name="pub_heading" style="overflow:hidden">Add Publish Message</h4>
      </div>
      <div class="modal-body" id=pubd2 name=pubd2>
        
 <div id=pa name=pa class="form-group" style="display:none;width:400px">
          <label for="a">Device Action ID</label>
          <input type=textbox class="form-control" id=paid_txt name=paid_txt style="display:none" placeholder="Enter Device Action ID"></input>
        </div>

        <span id=pi name=pi class="form-group" style="display:none;width:400px">
          <label for="a" id="d_name_lbl2" name="d_name_lbl2">Device Name</label>
          <input type=textbox class="form-control" id=pid_txt name=pid_txt style="width:200px;float:right;display:block" placeholder="Enter Device Name"></input>
        </span>
 
        <span id=pm name=pm class="form-group" style="width:400px;display:none">
          <label for="a">Message</label>
          <input type=textbox class="form-control" id=pubm_txt name=pubm_txt style="text-align:left;width:170px;float:right;display:block" disabled=true placeholder="Message" tabindex=21></input>
          <input type=button class="form-control" onclick="fnconfigure('text');" value="configure" style="width:70px;float:right;display:none">
        </span>
        <span id=sm1 name=sm1 class="form-group" style="width:500px;margin-bottom:-10px;display:block">
          <label for="b">Publish</label>
          <select name=sub_txt1 id=sub_txt1  class="form-control"  style="width:360px;float:right" onchange="fnsubtime1()" tabindex=25>
            <option value=0  id="subtime1" name="subtime1" class="form-control">On Start</option>
            <option value=1 class="form-control">Specific Time</option>
          </select>
        </span>

<span id=tm name=tm class="form-group" style="padding-top:0px;padding-bottom:20px;width:400px;display:block">
          <label for="a" id=pub_lbl name=pub_lbl style="float:left;width:140px;">Publish</label>
          <select id=hr name=hr style="width:48px;float:left;display:block" tabindex=22>
          <option class="form-control" id='every_hr' name='every_hr' value=*>Every</option>
          <option class="form-control" value=0>0th</option>
          <option class="form-control" value=1>1st</option>
          <option class="form-control" value=2>2nd</option>
          <option class="form-control" value=3>3rd</option>
          <option class="form-control" value=4>4th</option>
          <option class="form-control" value=5>5th</option>
          <option class="form-control" value=6>6th</option>
          <option class="form-control" value=7>7th</option>
          <option class="form-control" value=8>8th</option>
          <option class="form-control" value=9>9th</option>
          <option class="form-control" value=10>10th</option>
          <option class="form-control" value=11>11th</option>
          <option class="form-control" value=12>12th</option>
          <option class="form-control" value=13>13th</option>
          <option class="form-control" value=14>14th</option>
          <option class="form-control" value=15>15th</option>
          <option class="form-control" value=16>16th</option>
          <option class="form-control" value=17>17th</option>
          <option class="form-control" value=18>18th</option>
          <option class="form-control" value=19>19th</option>
          <option class="form-control" value=20>20th</option>
          <option class="form-control" value=21>21st</option>
          <option class="form-control" value=22>22nd</option>
          <option class="form-control" value=23>23rd</option>
          </select>
          <label for="lbl13" id=lbl1 name=lbl1 style="width:35px;padding-left:5px;float:left;display:block">hr</label>
          <select id=min name=min style="width:48px;float:left;display:block" tabindex=23>
          <option class="form-control" id=every_min name=every_min value=*>Every</option>
                <option class="form-control" value=0>0th</option>
          <option class="form-control" value=1>1st</option>
          <option class="form-control" value=2>2nd</option>
          <option class="form-control" value=3>3rd</option>
          <option class="form-control" value=4>4th</option>
          <option class="form-control" value=5>5th</option>
          <option class="form-control" value=6>6th</option>
          <option class="form-control" value=7>7th</option>
          <option class="form-control" value=8>8th</option>
          <option class="form-control" value=9>9th</option>
          <option class="form-control" value=10>10th</option>
          <option class="form-control" value=11>11th</option>
          <option class="form-control" value=12>12th</option>
          <option class="form-control" value=13>13th</option>
          <option class="form-control" value=14>14th</option>
          <option class="form-control" value=15>15th</option>
          <option class="form-control" value=16>16th</option>
          <option class="form-control" value=17>17th</option>
          <option class="form-control" value=18>18th</option>
          <option class="form-control" value=19>19th</option>
          <option class="form-control" value=20>20th</option>
          <option class="form-control" value=21>21st</option>
          <option class="form-control" value=22>22nd</option>
          <option class="form-control" value=23>23rd</option>  
          <option class="form-control" value=24>24th</option>
          <option class="form-control" value=25>25th</option>
          <option class="form-control" value=26>26th</option>
          <option class="form-control" value=27>27th</option>
          <option class="form-control" value=28>28th</option>
          <option class="form-control" value=29>29th</option>
          <option class="form-control" value=30>30th</option>
          <option class="form-control" value=31>31st</option>
          <option class="form-control" value=32>32nd</option>
          <option class="form-control" value=33>33rd</option> 
          <option class="form-control" value=34>34th</option>
          <option class="form-control" value=35>35th</option>
          <option class="form-control" value=36>36th</option>
          <option class="form-control" value=37>37th</option>
          <option class="form-control" value=38>38th</option>
          <option class="form-control" value=39>39th</option>
          <option class="form-control" value=40>40th</option>
          <option class="form-control" value=41>41st</option>
          <option class="form-control" value=42>42nd</option>
          <option class="form-control" value=43>43rd</option>  
          <option class="form-control" value=44>44th</option>
          <option class="form-control" value=45>45th</option>
          <option class="form-control" value=46>46th</option>
          <option class="form-control" value=47>47th</option>
          <option class="form-control" value=48>48th</option>
          <option class="form-control" value=49>49th</option>
          <option class="form-control" value=50>50th</option>
           <option class="form-control" value=51>51st</option>
          <option class="form-control" value=52>52nd</option>
          <option class="form-control" value=53>53rd</option>  
          <option class="form-control" value=54>54th</option>
          <option class="form-control" value=55>55th</option>
          <option class="form-control" value=56>56th</option>
          <option class="form-control" value=57>57th</option>
          <option class="form-control" value=58>58th</option>
          <option class="form-control" value=59>59th</option>
          </select>
          <label for="lbl23" id=lbl2 name=lbl2 style="padding-left:5px;padding-right:5px;width:38px;float:left;display:block">min</label>
          <select id=sec name=sec style="width:48px;float:left;display:block" tabindex=24>
          <option class="form-control" id=every_sec name='every_sec' value=*>Every</option>
          <option class="form-control" value=0 style=padding-left:5px;>0th</option>
          <option class="form-control" value=1>1st</option>
          <option class="form-control" value=2>2nd</option>
          <option class="form-control" value=3>3rd</option>
          <option class="form-control" value=4>4th</option>
          <option class="form-control" value=5>5th</option>
          <option class="form-control" value=6>6th</option>
          <option class="form-control" value=7>7th</option>
          <option class="form-control" value=8>8th</option>
          <option class="form-control" value=9>9th</option>
          <option class="form-control" value=10>10th</option>
          <option class="form-control" value=11>11th</option>
          <option class="form-control" value=12>12th</option>
          <option class="form-control" value=13>13th</option>
          <option class="form-control" value=14>14th</option>
          <option class="form-control" value=15>15th</option>
          <option class="form-control" value=16>16th</option>
          <option class="form-control" value=17>17th</option>
          <option class="form-control" value=18>18th</option>
          <option class="form-control" value=19>19th</option>
          <option class="form-control" value=20>20th</option>
          <option class="form-control" value=21>21st</option>
          <option class="form-control" value=22>22nd</option>
          <option class="form-control" value=23>23rd</option> 
          <option class="form-control" value=24>24th</option>
          <option class="form-control" value=25>25th</option>
          <option class="form-control" value=26>26th</option>
          <option class="form-control" value=27>27th</option>
          <option class="form-control" value=28>28th</option>
          <option class="form-control" value=29>29th</option>
          <option class="form-control" value=30>30th</option>
          <option class="form-control" value=31>31st</option>
          <option class="form-control" value=32>32nd</option>
          <option class="form-control" value=33>33rd</option> 
          <option class="form-control" value=34>34th</option>
          <option class="form-control" value=35>35th</option>
          <option class="form-control" value=36>36th</option>
          <option class="form-control" value=37>37th</option>
          <option class="form-control" value=38>38th</option>
          <option class="form-control" value=39>39th</option>
          <option class="form-control" value=40>40th</option>
          <option class="form-control" value=41>41st</option>
          <option class="form-control" value=42>42nd</option>
          <option class="form-control" value=43>43rd</option>  
          <option class="form-control" value=44>44th</option>
          <option class="form-control" value=45>45th</option>
          <option class="form-control" value=46>46th</option>
          <option class="form-control" value=47>47th</option>
          <option class="form-control" value=48>48th</option>
          <option class="form-control" value=49>49th</option>
          <option class="form-control" value=50>50th</option>
           <option class="form-control" value=51>51st</option>
          <option class="form-control" value=52>52nd</option>
          <option class="form-control" value=53>53rd</option>  
          <option class="form-control" value=54>54th</option>
          <option class="form-control" value=55>55th</option>
          <option class="form-control" value=56>56th</option>
          <option class="form-control" value=57>57th</option>
          <option class="form-control" value=59>59th</option>
          </select>
          <label for="lbl33" id="lbl3" name=lbl3 style="padding-left:5px;width:30px;float:left;display:block">sec</label>
        </span>
        <span id=pt name=pt class="form-group" style="width:400px;display:none">
          <label for="a" id=pubt_lbl name=pubt_lbl style="padding-top: 10px;">Topic</label>
          <input type=textbox class="form-control" id=pubt_txt name=pubt_txt style="width:200px;float:right;display:block" placeholder="Use $client_id for dynamic topics" autofocus tabindex=1><img id=pqnmark name=pqnmark data-toggle='tooltip' data-trigger="hover" data-content="iiot/$client_id/status will be replaced by iiot/device-name/status" src="/images/blue_question_mark.png" style="height:10px;float:right;margin-top:10px;margin-left:10px;" title="iiot/$client_id/status will be replaced by iiot/device-name/status"/></input>
        </span>
       <span id=pq name=pq class="form-group" style=width:400px;display:none>
          <label for="pqos_txt" id=pqos_lbl name=pqos_lbl style="padding-top:10px;width:140px;float:left;border: none">QoS</label>
          <select name=pqos_txt id=pqos_txt  class="form-control"  style=width:90px;float:left; tabindex=28>
            <option value="0"  id="pqosoption" name="pqosoption" class="form-control">0-Atmost once</option>
            <option value="1" class="form-control">1-Atleast once</option>
            <option value="2" class="form-control">2-Exactly once</option>
          </select>
      </span>
              <span id=pr name=pr class="form-group" style="width:400px;display:none">

          <select name=prtn_txt id=prtn_txt  class="form-control"  style="width:70px;float:left" tabindex=29>
            <option value="0" selected>0-Clear Retain flag</option>
            <option value="1">1-Set Retain flag</option>
          </select>
         <label for="prtn_txt" id=prtn_lbl name=prtn_lbl style="padding-top:10px;padding-left:10px;width: 65px;float:left;border: none">Retain</label>
        </span>
             <span id=ptype name=ptype class="form-group" style="width:400px;display:none">
          <label id=pubt_type name=pubt_type style="padding-top:20px;width:135px;float:left">Message Type</label>   

          <input type=checkbox id=text_check name=text_check style="margin-top:20px;width:30px; height:20px;float:left;display:block"  checked="checked"  onchange="fnmsgtype(this.id);"></input> 
          <label for="a" id=pubt_lbl name=pubt_lbl style="padding-left:10px;padding-top: 20px;width:95px;float:left">Text</label>
          <input type=checkbox id=json_check name=json_check style="margin-top:20px;width:30px;height:20px;float:left;display:block" onchange="fnmsgtype(this.id);"></input>          
          <label for="a" id=pubt_lbl1 name=pubt_lbl1 style="padding-top:20px;padding-left:10px;width:35px;float: left">JSON</label>
          <img src='images/plus.png' id=add_json name=add_json style="position:absolute;top:203px;left:610px;padding-top:20px;width:20px;height:40px;cursor:pointer;display:none" onclick="fnaddjson();"></img>

        </span>
 

               <span id=sm name=sm class="form-group" style="width:400px;display:block">
          <label for="b" style="padding-top:15px">Subscribe On</label>
          <select name=sub_txt id=sub_txt  class="form-control"  style="width:245px;margin-top:5px;float:right" onchange="fnsubtime()" tabindex=25>
            <option value=0  id="subtime" name="subtime" class="form-control">On Start</option>
            <option value=1 class="form-control">Specific Time</option>
          </select>
        </span>

   
       <span id=msg_type_div name=msg_type_div class="form-group" style="display:none;width:400px">
          <label for="a">Message Type</label>
          <select class="form-control" id=msg_type name=msg_type style="display:block;width:200px;float:right;" onchange="fnmsgtype(this.value);">
          <option value="text" selected>Text</option>
          <option value="json">Json</option>
          </select>
        </span>
       <span id=rndrange_div name=rndrange_div class="form-group" style="display:none;width:500px">
          <label for="a" style="padding-top:20px;width:200px;">Value Type</label>
          <select class="form-control" id=text_type name=text_type style="display:block;margin-top:-20px;width:360px;float:right;" onchange="fntexttype(this.value);">
          <option value="plaintext" selected>Constant</option>
          <option value="systemvariable">System Variables</option>
          <option value="random">RANDOM</option>
          <option value="range">RANGE</option>
          </select>
        </span>
    <span id="plaintext_div" name="plaintext_div" class="form-group" style="width:500px;display:none">
      <label for="a" style="padding-top:20px;">Message</label>
      <input type=textbox class="form-control" id=plaintext_txt name=plaintext_txt style="margin-top:20px;display:block;width:360px;float:right;" placeholder="Enter constant message" tabindex=12></input>
    </span>

        <span id=sysvar_div name=sysvar_div class="form-group" style="padding-top:20px;display:none;width:400px">
          <label for="a">System Variables</label>
          <select class="form-control" id=system_var name=system_var style="display:block;width:260px;float:right;">
          <option value="$Client_uptime">$Client_uptime</option>
          <option value="$Current_time">$Current_time</option>
          <option value="$Client_ID">$Client_ID</option>
          </select>
        </span>

       <span id=rnd_div name=rnd_div class="form-group" style="padding-top:20px;display:none;width:400px">
          <label for="a" id=pipe_lbl name=pipe_lbl>Message</label>
          <input type=textbox class="form-control" id=pipe_txt name=pipe_txt style="display:block;width:260px;float:right;" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>
        </span>

    <span id=range_div name=range_div class="form-group" style="padding-top:20px;padding-bottom:20px;width:400px;display:none">
          <label for="a" style="float:left;width:140px">Range:</label>
          <label for="lbl13" style="width:48px;float:left;display:none">From</label>

          <input type=number class="form-control" max=100 min=-100 id=start_value name=start_value style="width:55px;padding-left:5px;float:left;display:block" value=-100 tabindex=22></input>
          <label for="lbl23" id=lblto name=lblto class="form-control" style="text-align:center;width:48px;float:left;display:block;border:none;" >-</label>
          <input type=number max=100 class="form-control" min=-100 id=end_value name=end_value style="padding-left:5px;padding-right:5px;width:55px;float:left;display:block" value=100></input>
     </span>

      <div class="box-body no-padding form-group" id=json_div name=json_div style="margin-top:120px;display:none">
        <table id="json_table" name="json_table" style='width:600px;overflow:hidden'>
          <tr style="align:center;">
            <th> Key </th>
            <th> Value Type </th>
            <th> Value </th>
            <th> Action </th>
            <th></th>
          </tr>
          <tr>
          <td>
          <input type=textbox id=parameter0 name=parameter0 class=form-control style="width:125px;margin-bottom:5px" placeholder="Key">
          </td>
            <td>
          <select class="form-control" id=json_text_type0 name=json_text_type0 style="width:145px;margin-bottom:5px;padding-left:2px;" onchange="fnjsontexttype(this.value);">
          <option value="plaintext0" selected>Constant</option>
          <option value="system_var0">System Variables</option>
          <option value="pipe_txt0">RANDOM</option>
          <option value="range0">RANGE</option>
          </select>
        
</td>
<td> <input type=textbox id=plaintext0 name=plaintext0 style="width:185px;margin-bottom:5px;" class=form-control placeholder="Constant"> 
         <select class="form-control" id=system_var0 name=system_var0 style="display:none;width:185px">
          <option value="$Client_uptime">$Client_uptime</option>
          <option value="$Current_time">$Current_time</option>
          <option value="$Client_ID">$Client_ID</option>
          </select>
          <input type=textbox class="form-control" id=pipe_txt0 name=pipe_txt0 style="display:none;width:185px;margin-bottom:5px;" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>
          <input type=number class="form-control" max=100 min=-100 id=start_value0 name=start_value0 style="width:85px;padding-left:5px;float:left;margin-bottom:5px;display:none" value=-100 tabindex=22></input>
          <label for="lbl23" id=lblto0 name=lblto0 class="form-control" style="text-align:center;width:28px;margin-bottom:5px;float:left;display:none;border:none;" >-</label>
          <input type=number max=100 class="form-control" min=-100 id=end_value0 name=end_value0 style="padding-left:5px;padding-right:5px;width:85px;margin-bottom:5px;float:left;display:none" value=100></input>

</td>
<td style="text-align:center;"> 
<img src='images/dbdrop.png' id=del0 name=del0 style="width:20px;height:20px;cursor:pointer;" onclick="fnjsondelete(this.id)"></td><td><img src='images/plus.png' id=add0 name=add0 style="width:20px;height:20px;cursor:pointer;" onclick="fnaddjson()"></td></tr></table></div>

   
 
        <span id=rt name=rt class="form-group" style="width:400px;display:none">
          <label for="a">Response Topic</label>
          <input type=textbox class="form-control" id=rest_txt name=rest_txt style=width:200px;float:right placeholder="Enter Response Topic" tabindex=26></input>
        </span>
        <span id=rm name=rm class="form-group" style="width:400px;display:none">
          <label for="a">Response Message</label>
          <input type=textbox class="form-control" id=resm_txt name=resm_txt style="width:200px;float:right;" placeholder="Enter Response Message" tabindex=27></input>
        </span>

 
        <div class="text-center"  id="pubchoice" name="pubchoice">
 <br>
              <button class="btn btn-default" id=pub_cancel style=position:absolute;left:180px;top:280px data-value="pubchoice" name=pub_cancel tabindex=30  onclick="$('#editdialog').modal('hide');">Cancel</button>
                  <button class="btn btn-primary" value=Save style=position:absolute;left:350px;top:280px  id=pub_update data-value=pubchoice name=pub_update tabindex=31>Save</button>

        </div>
        
      </div>
      </div>
    </div>
  </div>

<!-- jQuery 2.1.4 -->
<!-- FastClick -->
<script src="js/fastclick/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="js/bundle.js"></script>
<script src="js/jquery.steps.min.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/wizard-steps.min.js"></script>
<script src="js/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="css/jquery-ui.css">
<link rel="stylesheet" type="text/css" href="css/iot.css">
<!--<script src="js/simulatorscript.js"></script>-->

<!--<script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>-->
<script>
var oldconfiguration="";
var deviceClk=0;
var elt;
var addclk=0;
var devid=0;
var editflag;
var pubflag;
var resflag;
var s="";
var id="0";
var pubclk=0;
var deveditflag=10;
var dev_cnt=1;
var dev_key=[];
var activedev_key=[]
var improper_range=false;
var no_parameter=false;
var activedev_cnt=1;
var next_clk=0;
var rem_clk=0;
var nd=0;
var lastset=0;
var devtab=0;
var next_log_clk=0;
var lgrownumber=1;
var logcount=0;
var setconfig=0;
var newconfig="";
var json_msg=false;
var configuration="";
var subcount=0;
var pubcount=0;
var logcount=0;
var json_parameter_count=1;
var parameter_txt=new Array();
var value_txt=new Array();
var type_txt=new Array();
var json_row_number=new Array();
var initial_height=250;
var initial_top=170;
var pub_initial_top=380;
var add_json_initial_top=220;
var last_added=0;
var json_add_array=new Array();
json_row_number[0]=1;
var uniqueId=1;
var clientcount=0;
var template_count=1;
var no_of_devices_old=0;


/*$(function() {
$("#editdialog" ).dialog({
  width: 500,
  height: 400,
  autoOpen: false,
  show: {
    effect: "blind",
    duration: 500
  },
  hide: {
    effect: "blind",
    duration: 500
  }
}); 
});*/
$(function() {
$("#configure_dialog" ).dialog({
  width: 500,
  height: 320,
  autoOpen: false,
  show: {
    effect: "blind",
    duration: 500
  },
  hide: {
    effect: "blind",
    duration: 500
  }
}); 
});
$(function() {
$("#json_dialog" ).dialog({
  width: 500,
  height: 250,
  autoOpen: false,
  show: {
    effect: "blind",
    duration: 500
  },
  hide: {
    effect: "blind",
    duration: 500
  }
}); 
});

function load_templates()
{
  document.getElementById("choice").value='templateselect';
  $.ajax({
   url: '/',
data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
      var obj=JSON.parse(msg);
var x = document.getElementById("templateload");
x.innerHTML="";
i=1
for (var key in obj)
{

    var option = document.createElement("option");
    option.text = obj[key][1];
    x.add(option);
}
},
error:function(m)
{
}
});

}
function setconfiguration()
{
      $.ajax({


    url: '/client/network?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
var obj=JSON.parse(msg);
var x = document.getElementById("dbload");
x.innerHTML="";
for (var key in obj)
{
  if (obj[key]=='bevywise_network') ;
  else if (obj[key]=='bevy_sim_template') ;
  else if (obj[key]=='bevywise') ;
  else
  {
    var option = document.createElement("option");
    option.text = obj[key];
    x.add(option);
  }
}
},
 error: function (mm) {
    }

});



s="selectenv";
$("#device").innerHTML="";
document.getElementById("choice").value='dbselect';
if (setconfig == 1)
{
  document.getElementById("confname").value=newconfig;
    configuration=newconfig;
}
else
{
    oldconfiguration=configuration;

          $("#addenvdialog").modal('show');

  /*  $('.btn-ok').click(function(){
    var value=$(this).data('value');
    $("#"+value).slideUp();
    });*/
    $("#btn-load").click(function(){
    $("#envchoice").slideDown();
    $("#create").slideUp();
    });
    $("#btn-create").click(function(){
    $("#create").slideDown();
    $("#envchoice").slideUp();
    });
  
}
}
function openDetail(evt, detailName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
        //tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    //document.getElementById(detailName).style.display = "block";
    //evt.currentTarget.className += " active";
    //evt.currentTarget.style.backgroundColor="rgba(54,127,169,1)";
    document.getElementById("addenvdialog").style.display="none";

    if (detailName=='Devices')
      {

        /*

  IMPORTANT: CHECK WHETHER PREVIOUS CONFIGURATION IS RE-SELECTED. IF SO, NO NEED TO RE-CONFIGURE. ELSE, STOP ALL DEVICES AND RE-CONFIGURE WITH NEW SET OF DEVICES


        */
        document.getElementById('TemplatesTab').style.display="none";
  document.getElementById("choice").value='stopall';
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=false;
  document.getElementById("tickgreen").style.display="none";
     if (configuration!='bevy_sim_template')

  document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";
  //if (configuration!='bevy_sim_template')
  //document.getElementById("tickgrey").style.display="block";
  //document.getElementById("stopdevice").disabled=true;
  //document.getElementById("startdevice").disabled=false;
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
        document.getElementById("bulktab").style.display="none";
        document.getElementById("Templates").style.display="none";
        document.getElementById("bulktabTab").style.backgroundColor="rgba(60,141,188,1)";
      document.getElementById("DevicesTab").style.backgroundColor="rgba(54,127,169,1)";
      $("#device").innerHTML="";

document.getElementById('choice').value="dbselect";
document.getElementById('choicenew').value="dbselect";
$.ajax({


   url: '/?config='+configuration,

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
getDashboard();


       // getHomeTab();
      }
    else if (detailName=='bulktab')
    {
      document.getElementById("Devices").style.display="none";
      document.getElementById('TemplatesTab').style.display="none";
      document.getElementById("DevicesTab").style.backgroundColor="rgba(60,141,188,1)";
      document.getElementById("bulktabTab").style.backgroundColor="rgba(54,127,169,1)";


    }
    else
    {
//document.getElementById("Devices").style.display="none";

/*document.getElementById("devadd").style.display="none";
document.getElementById("templateadd").style.display="block";

 $("#template").innerHTML="";*/
 no_of_devices_old=(document.getElementsByClassName("detail").length)/2;
document.getElementById('TemplatesTab').style.display="block";
document.getElementById('choice').value="dbselect";
/*document.getElementById('choicenew').value="dbselect";
document.getElementById('template_choice').value="dbselect";*/
configuration='bevy_sim_template';
$.ajax({


   url: '/?config=bevy_sim_template',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
if (document.getElementById("devadd1"))
    document.getElementById("devadd1").style.display="block";
  if (document.getElementById("template_add"))
    document.getElementById("template_add").style.display="block";
  if (document.getElementById("list_tag"))
  {
    document.getElementById("list_tag").innerText="Templates";
  }
  if (document.getElementById("sub_table_unsub"))
  {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
  }
  document.getElementById("heading").innerText="Template Details";
  document.getElementById("heading_name").innerText="Template Name";
    document.getElementById("d_name_lbl").innerText="Template Name";
  document.getElementById("d_name_txt").placeholder="Enter Template Name";
  document.getElementById("d_name_lbl2").innerText="Template Name";
  document.getElementById("pid_txt").placeholder="Enter Template Name";


  document.getElementById("devadd1").style.display="none";
  document.getElementById("template_add").style.display="block";
document.getElementById("deveditflag").value="10";
//getDashboard('template_form');
document.getElementById('TemplatesTab').style.display="block";
document.getElementById('TemplatesTab').innerText="Templates";
getDashboard();

    }
   
}
function open_conf()
{
var all_disconnected=true;
  $.ajax({


    url: '/client/get_connection_status?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
      if (msg=="all_disconnected")
      {
        all_disconnected=true;
        document.getElementById("startallclients").disabled=false;
        document.getElementById("stopallclients").disabled=true;
        if (document.getElementById("tickgrey").style.display=='block')
        {
          document.getElementById("tickgrey").style.display='none';
          document.getElementById("tickgreen").style.display='block';
        }
      }
      else
        all_disconnected=false;

},
 error: function (mm) {
    }

});
if (all_disconnected==false)
{
if (configuration=='bevy_sim_template')
{
  if (no_of_devices_old>0)
  {
    if ((oldconfiguration!='') && (oldconfiguration!='bevy_sim_template'))
  alert("Network "+oldconfiguration+" will be stopped if new network is loaded");
  }
}
else if (document.getElementsByClassName("detail").length>0)
{
  if ((configuration!='bevy_sim_template') && (configuration!=""))
  alert("Network "+configuration+" will be stopped if new network is loaded");
else if ((oldconfiguration!='') && (oldconfiguration!='bevy_sim_template'))
  alert("Network "+oldconfiguration+" will be stopped if new network is loaded");
}
}

   /*$('#alert_dialog').modal({
  backdrop: 'static'
});*/

//$("#alert_dialog").modal('show');

  $.ajax({


    url: '/client/network?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
var obj=JSON.parse(msg);
var x = document.getElementById("dbload");
x.innerHTML="";
for (var key in obj)
{
  if (obj[key]=='bevywise_network') ;
  else if (obj[key]=='bevy_sim_template') ;
  else if (obj[key]=='bevywise') ;
  else
  {
    var option = document.createElement("option");
    option.text = obj[key];
    x.add(option);
  }

}
},
 error: function (mm) {
    }

});


  document.getElementById("envchoice").style.display="block";
  //oldconfiguration=configuration;
  $("#addenvdialog").modal('show');
}
function create_conf()
{
var all_disconnected=true;
  $.ajax({


    url: '/client/get_connection_status?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
      if (msg=="all_disconnected")
      {
        all_disconnected=true;
        document.getElementById("startallclients").disabled=false;
        document.getElementById("stopallclients").disabled=true;   
        if (document.getElementById("tickgrey").style.display=='block')
        {
          document.getElementById("tickgrey").style.display='none';
          document.getElementById("tickgreen").style.display='block';
        }             
      }
      else
        all_disconnected=false;

},
 error: function (mm) {
    }

});
if (all_disconnected==false)
{

if (configuration=='bevy_sim_template')
{ 
  if (no_of_devices_old>0)
  {
    alert('configuration='+configuration+',old='+oldconfiguration);
     if ((configuration!='bevy_sim_template') && (configuration!=""))
  alert("Network "+configuration+" will be stopped if new network is loaded");
    else if ((oldconfiguration!='') && (oldconfiguration!='bevy_sim_template'))
  alert("Network "+oldconfiguration+" will be stopped if new network is loaded");
  }
}
else if (document.getElementsByClassName("detail").length>0)
{
  if ((configuration!='bevy_sim_template') && (configuration!=""))
  alert("Network "+configuration+" will be stopped if new network is loaded");
else if ((oldconfiguration!='') && (oldconfiguration!='bevy_sim_template'))
  alert("Network "+oldconfiguration+" will be stopped if new network is loaded");
}
}

  $("#create_envdialog").modal('show');

}
function newclick()
{
 //document.getElementById('envcreate').value=env;
 var env=document.getElementById("envtext").value;
$("#device").innerHTML="";
var dbs=document.getElementById("dbload");
for (var jj=0;jj<dbs.length;jj++)
{
  if (env==dbs.options[jj].text)
  {
    alert(env+' is already available');
    return;
  }
}
env1=env.trim();
if (env.trim()!="")
{
  if (env.indexOf('_')==0)
    alert("Network Name should not start with underscore. Can be alphanumeric or combined with underscore");
  else
  {
  var u_score = /^[_]+$/;
  if (env.match(u_score))
    alert("Network name should not contain only underscore. Can be alphanumeric or combined with underscore");
  else
  {
  var numbers = /^[0-9]+$/;
  if(env.match(numbers))
    {
      alert("Network name should not contain only numbers. Can be alphanumeric or combined with underscore");
    }  
    else
    {
  var letters = /^[0-9a-zA-Z_]+$/;
if(env.match(letters))
{
  $("#create_envdialog").modal('hide');
 
  document.getElementById("TemplatesTab").style.display="none";
  document.getElementById("list_tag").innerText="Device List";
    document.getElementById("heading").innerText="Device Details";
  document.getElementById("heading_name").innerText="Client Name";
  document.getElementById("d_name_lbl").innerText="Device Name";
  document.getElementById("d_name_txt").placeholder="Enter Device Name";
  document.getElementById("d_name_lbl2").innerText="Device Name";
  document.getElementById("pid_txt").placeholder="Enter Device Name";



  document.getElementById("devadd1").style.display="block";
  document.getElementById("template_add").style.display="none";
//$("#addenvdialog").modal('hide');
  $("#device").innerHTML="";
  document.getElementById("choice").value='stopall';
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=false;
  document.getElementById("tickgreen").style.display="none";
     if (configuration!='bevy_sim_template')

    document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

  //if (configuration!='bevy_sim_template')
  //document.getElementById("tickgrey").style.display="block";
  //document.getElementById("stopdevice").disabled=true;
  //document.getElementById("startdevice").disabled=false;
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
  

 document.getElementById("choice").value='dbselect';

configuration=env;

$.ajax({


   url: '/?config='+configuration,

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=false;
    if (configuration!='bevy_sim_template')
  document.getElementById("tickgreen").style.display="none";
  document.getElementById("startdevice").style.display="none";
     if (configuration!='bevy_sim_template')

  document.getElementById("stopdevice").style.display="block";

  //document.getElementById("tickgrey").style.display="none";
  //document.getElementById("stopdevice").disabled=false;
  //document.getElementById("startdevice").disabled=true;
   // $('#add_devdialog').modal('show');
document.getElementById("TemplatesTab").style.display="block";
document.getElementById("TemplatesTab").innerText=configuration;

getDashboard();
if ($("input[type='radio']:checked").val()=='single')
  f('add');
else
{
  load_templates();
  $('#addbulkdialog').modal('show');
}
}
else
alert("Network name should contain only alphabets, numbers and underscore");
}
}
}
}
else
  alert("Network name cannot be empty")
}


function simulation(sname)
{
    
}


function f_delete()
{
  var dev_name=document.getElementById("d_name").value;
  document.getElementById("choice").value="deletedevice";
      $.ajax({


   url: '/',
data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
    },
    error:function(msg){
    }
    
});
    addclk=1;
  document.getElementById("deveditflag").value="10";
  getDashboard();
//location.reload();


}


function f(id)
{
  var e=document.getElementById("add");

  if (id=="template_add")
  {
var template_count_exceed=false;
document.getElementById("choice").value="check_template_count";

$.ajax({


   url: '/',
data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
        if (msg=="0")
        {
          alert("Licensed Template count exceeded");
          template_count_exceed=true;
        }
      
    },
    error:function(msg){
    }
    
});
if (template_count_exceed==true)
return;
}
if (id=="edit")
{
e.value="Update";
document.getElementById("deveditflag").value="1";
document.getElementById("d_name_txt").readOnly=true;
document.getElementById("d_name_txt").value=document.getElementById("d_name").value;
document.getElementById("d_desc_txt").value=document.getElementById("d_desc").value;
document.getElementById("wtopic_txt").value=document.getElementById("will_topic").value;
document.getElementById("wmsg_txt").value=document.getElementById("will_msg").value;
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");
document.getElementById("dn").style.display="block";
if (document.getElementById("pubd1"))
document.getElementById("pubd1").style.display="block";
document.getElementById("dd").style.display="block";
document.getElementById("wt").style.display="block";
document.getElementById("wm").style.display="block";
document.getElementById("wq").style.display="block";
document.getElementById("wr").style.display="block";
document.getElementById("d_name_txt").style.display="block";
document.getElementById("d_desc_txt").style.display="block";
document.getElementById("wtopic_txt").style.display="block";
document.getElementById("wmsg_txt").style.display="block";
document.getElementById("wqos_txt").style.display="block";
document.getElementById("wrtn_txt").style.display="block";

if (document.getElementById("addbtn"))
document.getElementById("addbtn").style.display="block";
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#d_name_lbl").appendTo("#dn");
$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");
/*$("#pa").appendTo("#myform");
$("#pi").appendTo("#myform");
$("#pt").appendTo("#myform");
$("#pm").appendTo("#myform");
$("#pq").appendTo("#myform");
$("#pr").appendTo("#myform");*/
if (document.getElementById("dialog_wrapper"))
document.getElementById("dialog_wrapper").style.display="block";
if (document.getElementById("pubd1"))
document.getElementById("pubd1").style.display="block";
document.getElementById("pa").style.display="none";
document.getElementById("pi").style.display="none";
document.getElementById("dn").style.display="block";
document.getElementById("dn").style.width="530px";
document.getElementById("dd").style.display="block";
document.getElementById("dd").style.width="530px";
document.getElementById("wt").style.display="block";
document.getElementById("wt").style.width="551px";
document.getElementById("wm").style.display="block";
document.getElementById("wm").style.width="530px";
document.getElementById("wq").style.display="block";
document.getElementById("wq").style.width="530px";
document.getElementById("wr").style.display="block";
document.getElementById("wr").style.width="530px";
document.getElementById("d_name_txt").style.display="block";
document.getElementById("d_name_txt").style.width="330px";
document.getElementById("d_name_txt").style.float="right";
document.getElementById("d_desc_txt").style.display="block";
document.getElementById("d_desc_txt").style.width="330px";
document.getElementById("d_desc_txt").style.float="right";

document.getElementById("wtopic_txt").style.display="block";
document.getElementById("wtopic_txt").style.width="330px";
document.getElementById("wtopic_txt").style.float="right";

document.getElementById("wmsg_txt").style.display="block";
document.getElementById("wmsg_txt").style.width="330px";
document.getElementById("wmsg_txt").style.float="right";
document.getElementById("wqos_txt").style.display="block";
document.getElementById("wqos_txt").style.width="330px";
document.getElementById("wqos_txt").style.float="right";

document.getElementById("wrtn_txt").style.display="block";
document.getElementById("wrtn_txt").style.width="330px";
document.getElementById("wrtn_txt").style.float="right";
if (document.getElementById("addbtn"))
document.getElementById("addbtn").style.display="block";
//$('#add_devdialog').dialog('option', 'title', 'Edit Device Details');

}
else
{
document.getElementById("deveditflag").value="0";
e.setAttribute("id","add");
e.setAttribute("name","add");
//e.name="add";
e.value="Add";
document.getElementById("d_name_txt").readOnly=false;
document.getElementById("d_name_txt").value="";
document.getElementById("d_desc_txt").value="";
document.getElementById("wtopic_txt").value="";
document.getElementById("wmsg_txt").value="";
/*$("#pa").appendTo("#myform");
$("#pi").appendTo("#myform");
$("#pt").appendTo("#myform");
$("#pm").appendTo("#myform");
$("#pq").appendTo("#myform");
$("#pr").appendTo("#myform");*/
if (document.getElementById("dialog_wrapper"))
document.getElementById("dialog_wrapper").style.display="block";
if (document.getElementById("pubd1"))
document.getElementById("pubd1").style.display="block";
document.getElementById("pa").style.display="none";
document.getElementById("pi").style.display="none";
document.getElementById("dn").style.display="block";
document.getElementById("dn").style.width="530px";
document.getElementById("dd").style.display="block";
document.getElementById("dd").style.width="530px";
document.getElementById("wt").style.display="block";
document.getElementById("wt").style.width="551px";
document.getElementById("wm").style.display="block";
document.getElementById("wm").style.width="530px";
document.getElementById("wq").style.display="block";
document.getElementById("wq").style.width="530px";
document.getElementById("wr").style.display="block";
document.getElementById("wr").style.width="530px";
document.getElementById("d_name_txt").style.display="block";
document.getElementById("d_name_txt").style.width="330px";
document.getElementById("d_name_txt").style.float="right";
document.getElementById("d_desc_txt").style.display="block";
document.getElementById("d_desc_txt").style.width="330px";
document.getElementById("d_desc_txt").style.float="right";

document.getElementById("wtopic_txt").style.display="block";
document.getElementById("wtopic_txt").style.width="330px";
document.getElementById("wtopic_txt").style.float="right";

document.getElementById("wmsg_txt").style.display="block";
document.getElementById("wmsg_txt").style.width="330px";
document.getElementById("wmsg_txt").style.float="right";
document.getElementById("wqos_txt").style.display="block";
document.getElementById("wqos_txt").style.width="330px";
document.getElementById("wqos_txt").style.float="right";

document.getElementById("wrtn_txt").style.display="block";
document.getElementById("wrtn_txt").style.width="330px";
document.getElementById("wrtn_txt").style.float="right";
if (document.getElementById("addbtn"))
document.getElementById("addbtn").style.display="block";
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");

//$('#add_devdialog').title="Add New Device Details";
}
var elt=document.getElementById("add_devdialog");
//document.getElementById("d1").className="lblpanel";
//document.getElementById("d1").style.display="block;"
if (document.getElementById("pubd1"))
document.getElementById("pubd1").style.display="block;"
elt.style.display="block";
document.getElementById("d_name_txt").style.display="none";
//$("#add_devdialog" ).dialog();
if (id=="edit")
{
  //document.getElementById("dn").style.display="none";
  document.getElementById("d_name_txt").style.display="none";
    document.getElementById("d_name_lbl").style.display="none";
   // document.getElementById()
  document.getElementById("d_desc_lbl").style.marginTop="20px";
    document.getElementById("d_desc_txt").style.marginTop="20px";
$("#d_desc_lbl").appendTo("#dd");
if (document.getElementById("list_tag").innerText=="Templates")
{
  document.getElementById("dev_heading").innerText='Edit Template Details';
  if (document.getElementById("sub_table_unsub"))
  {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
  }
  document.getElementById("wt").style.width="551px";
    document.getElementById("wtopic_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById("wqnmark").style.display="block";


}
else
{
   document.getElementById("dev_heading").innerText='Edit Device Details';
       if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }
    document.getElementById("wt").style.width="530px";
      document.getElementById("wtopic_txt").placeholder="Enter Will Topic";
  document.getElementById("wqnmark").style.display="none";


}
 
  $('#add_devdialog').modal('show');
  //$("#add_devdialog").dialog({ width:500,height:390,autoOpen: false, show: { effect: "blind", duration: 500 }, hide: { effect: "blind", duration: 500 }, close: function () {; }, title:"Edit Template Details" }).dialog("open");

  //$("#add_devdialog").dialog({ width:500,height:390,autoOpen: false, show: { effect: "blind", duration: 500 }, hide: { effect: "blind", duration: 500 }, close: function () {; }, title:"Edit Device Details" }).dialog("open");
}
else
{document.getElementById("dn").style.display="block";
  document.getElementById("d_name_txt").style.display="block";
  document.getElementById("d_name_lbl").style.display="block";
  var mtop=document.getElementById("d_desc_lbl").style.marginTop;
  if (mtop=="20px")
  {
   document.getElementById("d_desc_lbl").style.marginTop="0px";
    document.getElementById("d_desc_txt").style.marginTop="0px";
   
  }
  if (document.getElementById("list_tag").innerText=="Templates")
  {
    document.getElementById("dev_heading").innerText='New Template - Details';
    if (document.getElementById("sub_table_unsub"))
  {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
  }
      document.getElementById("wt").style.width="551px";

  document.getElementById("wtopic_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById("wqnmark").style.display="block";

  }
else
{
   document.getElementById("dev_heading").innerText='Add New Device Details';
       if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }
        document.getElementById("wt").style.width="530px";

      document.getElementById("wtopic_txt").placeholder="Enter Will Topic";
  document.getElementById("wqnmark").style.display="none";


 }

    $('#add_devdialog').modal('show');

  //$("#add_devdialog").dialog({ width:500,height:390,autoOpen: false, show: { effect: "blind", duration: 500 }, hide: { effect: "blind", duration: 500 }, close: function () {; }, title:"Add New Device Details" }).dialog("open");

}
}




function var_init()
{
deviceClk=0;
addclk=0;
devid=0;
s="";
id="0";
pubclk=0;
deveditflag=10;
dev_cnt=1;
dev_key=[];
activedev_key=[]
improper_range=false;
no_parameter=false;
activedev_cnt=1;
next_clk=0;
rem_clk=0;
nd=0;
lastset=0;
devtab=0;
next_log_clk=0;
lgrownumber=1;
logcount=0;
setconfig=0;
newconfig="";
json_msg=false;
configuration="";
subcount=0;
pubcount=0;
logcount=0;
json_parameter_count=1;
parameter_txt=new Array();
value_txt=new Array();
type_txt=new Array();
json_row_number=new Array();
initial_height=250;
initial_top=170;
pub_initial_top=380;
add_json_initial_top=220;
last_added=0;
json_add_array=new Array();
json_row_number[0]=1;
uniqueId=1;
no_of_devices_old=0;
}
$(document).keydown(function(event) { 
    if (event.keyCode == 27) { 
       $('#add_devdialog').modal('hide');
       $("#editdialog").modal("hide");
       $("#create_envdialog").modal('hide');
       if (oldconfiguration!="")
        $("#addenvdialog").modal('hide');

    }
});
$(document).ready(function(){

  $('[data-toggle="tooltip"]').tooltip();
uniqueId=1;
  $('.wizard-button .actions').addClass("col-md-6");

   $('.publish-msg-type').change(function(){
            $('.publish-text-type').hide();
            $('.publish-text-option').hide();
            $('.json-class').hide();
            $('.json-text-option').hide();
            $('.' + $(this).val()).show();
            if ($(this).val()!='json-class')
            $('.publish-constant').show();
        });

$('.json-text-type').change(function(){
            $('.json-text-option').hide();
            $('#' + $(this).val()).show();
        });
   
   $('.publish-text-type').change(function(){
            $('.publish-text-option').hide();
            $('#' + $(this).val()).show();
        });
     
    
        $('#will_message_type').change(function(){
            $('.message-type-option').hide();
            $('#' + $(this).val()).show();
        });
         $('#will_qos_type').click(function(){
            $('.qos-type-option').hide();
            $('#' + $(this).val()).show();
        });
          $('#will_retain_type').click(function(){
            $('.retain-type-option').hide();
            $('#' + $(this).val()).show();
        });
$('#addenvdialog').modal({
  backdrop: 'static'
});
/*$("#create_envdialog").modal({
  backdrop: 'static'
});
$("#add_devdialog").modal({
  backdrop: 'static'
});*/
var isIE=/*@cc_on!@*/false || !! document.documentMode;
if (isIE == true)
{

/*var errelt=document.getElementById("connectmsg");
errelt.style.display="none";
errelt.innerHTML="Internet Explorer does not support Bevywise IoT Simulator. Please try in other browser.";*/
//return;
}


document.getElementById('prtn_txt').value="0";
document.getElementById('pqos_txt').value="0";
document.getElementById("pqosoption").selected = "true";

$('#prtn_txt').val("0");
$('#pqos_txt').val("0");
$('#wqos_txt').val("0");

var xloc=window.location.href;
var str = "?setconfig=HEALTH_CARE"; 
    var n = str.search("setconfig");
if (n!=-1)
{

   var nx=str.indexOf("=");
   newconfig=str.slice(nx+1);
  //setconfig=1;
  setconfig=2;
 setconfiguration();  

 $("#device").innerHTML="";
//getDashboard();
//startdoc();
}
function startdoc()
{

document.getElementById("devtab").value="1";
document.getElementById("alldev").style.color="#FA0000";
$("#device").innerHTML="";
}
$("#rule_cancel").click(function(event){
document.getElementById("add_devdialog").style.display="none";
$("#add_devdialog").dialog("close");
document.getElementById("pubd1").style.display="none";
document.getElementById("dialog_wrapper").style.display="none";
});
$("#pub_cancel").click(function(event){
//document.getElementById("editdialog").style.display="none";
$("#editdialog").modal("hide");
//document.getElementById("pubd2").style.display="none";
//document.getElementById("dialog_wrapper1").style.display="none";
});

$("#prev").click(function(event){
lastset=0;
var ptxt=document.getElementById("next_clk_txt");
ptxt.value=next_clk+"";
var ne1=document.getElementById("device");
if(next_clk>0)
{
var hide_st_cnt=(20*next_clk)+1;
var hide_end_cnt=hide_st_cnt+19;
if (hide_end_cnt>nd)
hide_end_cnt=nd;
for(var hidev=hide_st_cnt;hidev<=hide_end_cnt;hidev++)
{
    var helt=document.getElementById("device"+dev_key[hidev]);
    helt.innerHTML="";
    helt.value="";
  helt.style.display="none";
  ne1.removeChild(helt);
}

next_clk--;
ptxt.value=next_clk+"";
if(next_clk==0)
{
  var prev_elt=document.getElementById("prev");
  prev_elt.disabled=true;
  var next_elt=document.getElementById("next");
  next_elt.className="nextimgg";
  next_elt.disabled=false;
}

var show_st_cnt=(20*next_clk)+1;
var show_end_cnt=show_st_cnt+19;

var ne11=document.getElementById("device");
ne11.style.display="block";
$("#device").children().hide();
if(show_end_cnt > nd) show_end_cnt=nd;
var top4=80;
for(var showv=show_st_cnt;showv<=show_end_cnt;showv++)
{
    var selt=document.getElementById("device"+dev_key[showv]);
    selt.style.display="block";
    if (showv==show_st_cnt)
    selt.style.padding="14px 4px 4px 24px";
    else
    selt.style.padding="4px 4px 4px 24px";
    selt.top=top4+"px";
    top4=top4+30;
}
var ptag1=document.getElementById("rec_count");
var ptagtxt1="";
ptagtxt1=show_st_cnt+"-"+show_end_cnt+" of "+nd;
ptag1.innerHTML=ptagtxt1;
disp_detail(dev_key[show_st_cnt]);
}
});

$("#runsubscribe, #runpublish, #startdevice,#startallclients").click(function(event){
var operationtype=$(event.target).attr('id');
if (operationtype=="runpublish")
{
document.getElementById("choice").value='runpublish';
}
else if (operationtype=="runsubscribe")
{
document.getElementById("choice").value='runsubscribe';
}
else if (operationtype=="startdevice")
{
  document.getElementById("choice").value='runclient';
 /* if (configuration!='bevy_sim_template')
  document.getElementById("tickgreen").style.display="block";
  document.getElementById("tickgrey").style.display="none";
  document.getElementById("stopdevice").disabled=false;
  document.getElementById("startdevice").disabled=true;*/
}
else
{
    var newelt=$('#device').get(0);

  if ((document.getElementById("d_name").value=="") || (newelt==undefined))
  {
    alert("No device is added yet. Add a device and then try to start");
    return;
  }
  document.getElementById("choice").value='startall';
  document.getElementById("stopallclients").disabled=false;
  document.getElementById("startallclients").disabled=true;
  if (configuration!='bevy_sim_template')
  document.getElementById("tickgreen").style.display="none";
  document.getElementById("startdevice").style.display="none";
     if (configuration!='bevy_sim_template')

  document.getElementById("stopdevice").style.display="block";

  //document.getElementById("tickgrey").style.display="none";
  //document.getElementById("stopdevice").disabled=false;
  //document.getElementById("startdevice").disabled=true;

}
document.getElementById("brokermsg").style.display="none";
var brokerfound=1;
var licence_exceed=0;
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {

      if ((msg=="-6") || (msg.indexOf("exception: access violation reading")>-1))
        {
          alert("Broker is not running. Start broker to connect the devices");
          //document.getElementById("brokermsg").style.display="block";
          brokerfound=0;
        }
      else if (msg=="-5")
      {
        alert("Licensed Client Count Exceeded");
        document.getElementById("errmsg").style.display="block";
        licence_exceed=1;
      }
    },
    error:function(mm)
    {
    }
    
});
if (brokerfound==0)
{
    if (document.getElementById("choice").value=='startall')
    {
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=false;
  if (configuration!='bevy_sim_template')
  document.getElementById("tickgreen").style.display="none";
   if (configuration!='bevy_sim_template')

  document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";}

}
if (brokerfound==1)
{
document.getElementById("choice").value='getstatus';
document.getElementById("paid_txt").display="block";
var connect_status=0;

var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
 dataType: "text",
    async:false,
     success:function (data,status) {
data=JSON.parse(data);
if (data=="connected")
   connect_status=1;
else
   connect_status=0;
    },
error:function(data){
document.getElementById("paid_txt").display="none";
}
    
    
});
if (connect_status==0)
{
   //document.getElementById("startdevice").disabled=true;
   //document.getElementById("stopdevice").disabled=true;
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=true;
  
   document.getElementById("tickgreen").style.display="none";
      if (configuration!='bevy_sim_template')

     document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

//document.getElementById("errmsg").style.display="block";
//if (configuration!='bevy_sim_template')
  // document.getElementById("tickgrey").style.display="block";
}
else
{
   //document.getElementById("startdevice").disabled=true;
   //document.getElementById("stopdevice").disabled=false;
   if (configuration!='bevy_sim_template')
   document.getElementById("tickgreen").style.display="none";
   document.getElementById("startdevice").style.display="none";
      if (configuration!='bevy_sim_template')

  document.getElementById("stopdevice").style.display="block";

   //document.getElementById("tickgrey").style.display="none";
}

}



});

$("#stoppublish,#stopsubscribe,#stopdevice,#pubinstant,#stopallclients").click(function(event){
var operationtype=$(event.target).attr('id');
if(operationtype=='pubinstant')
  document.getElementById("choice").value='instantpublish';
else if(operationtype=='stopdevice')
{
    document.getElementById("choice").value='stopclient';
    document.getElementById("tickgreen").style.display="none";
    if (configuration!='bevy_sim_template')
    document.getElementById("tickgrey").style.display="none";
     if (configuration!='bevy_sim_template')

    document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

    //  document.getElementById("stopdevice").disabled=true;
     // document.getElementById("startdevice").disabled=false;
}
else if (operationtype=='stopallclients')
{
  document.getElementById("choice").value='stopall';
  document.getElementById("stopallclients").disabled=true;
  document.getElementById("startallclients").disabled=false;
  document.getElementById("tickgreen").style.display="none";
  //if (configuration!='bevy_sim_template')
  //document.getElementById("tickgrey").style.display="block";
  //document.getElementById("stopdevice").disabled=true;
  //document.getElementById("startdevice").disabled=false;
     if (configuration!='bevy_sim_template')

    document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

 /* var inputs = document.getElementsByTagName("img");
  for (x = 0 ; x < inputs.length ; x++)
  {
      myname = inputs[x].getAttribute("src");
  if(myname.indexOf("unsubscribe")>-1)
        {
            inputs[x].style.pointerEvents="none";
      inputs[x].onclick=null;
        }
  }*/
}
else
  document.getElementById("choice").value='stoppublish';
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pr");
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");


var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
dataType: "text",
    async:false,
     success:function (data,status) {
    },
error:function(data){
}
    
});
});


$("#next").click(function(event){
if (lastset==1) return;
next_clk++;
var ntxt=document.getElementById("next_clk_txt");
ntxt.value=next_clk+"";
rem_clk=next_clk-1;
var rem_st_cnt=(20*rem_clk)+1;
var rem_end_cnt=rem_st_cnt+19;
var prev_btn=document.getElementById("prev");
prev_btn.className="previmg";
prev_btn.style.display="block";
prev_btn.disabled=false;

for (var remv=rem_st_cnt;remv<=rem_end_cnt;remv++)
{
    var hide_elt=document.getElementById("device"+dev_key[remv]);
    hide_elt.style.display="none"; 
}
var ne1=document.getElementById("device");
ne1.style.display="block";
var st_cnt1=(20*next_clk)+1;
var end_cnt1=st_cnt1+19;
if (end_cnt1>=nd)
{
   var nxt=document.getElementById("next");
   nxt.className="nextimgg";
   nxt.disabled=true;
   lastset=1;
}
else
lastset=0;
if (end_cnt1>nd)
end_cnt1=nd;
var top1=80;
$("#device").children().hide();
ne1=document.getElementById("device");
ne1.style.display="block";
var aa;
var divavail=0;
for (var nn1=st_cnt1;nn1<=end_cnt1;nn1++)
{

  if(document.getElementById("device"+dev_key[nn1]))
  {
  aa=document.getElementById("device"+dev_key[nn1]);
    divavail=1;
   }
   else
    {
     divavail=0;
    aa=document.createElement("div");
  aa.id="device"+dev_key[nn1];
    aa.value=dev_key[nn1];
    aa.setAttribute("name","device"+dev_key[nn1]);
    aa.innerHTML=dev_key[nn1];
}
   aa.style.display="block";
  if(nn1==st_cnt1)
  aa.style.padding="14px 4px 4px 24px";
  else
  aa.style.padding="4px 4px 4px 24px";
  aa.style.top=top1+"px";
  top1=top1+30;
  aa.className="detail";
  if (divavail==0)
  ne1.appendChild(aa);
}
var ptag2=document.getElementById("rec_count");
var ptagtxt2="";
ptagtxt2=st_cnt1+"-"+end_cnt1+" of "+nd;
ptag2.innerHTML=ptagtxt2;
if (end_cnt1==nd) 
{
document.getElementById("next").disabled=true;
}
disp_detail(dev_key[st_cnt1]);
});

$("#add").click(function(event){
var checkdname=document.getElementById("d_name_txt").value;
checkdname=checkdname.trim();
var checkddesc=document.getElementById("d_desc_txt").value;
checkddesc=checkddesc.trim();
var invalid=0;
if ((checkdname=="") || (checkddesc==""))
{
  alert("Device Name/Description could not be empty");
  invalid=1;
}
var checkwtopic=document.getElementById("wtopic_txt").value;
checkwtopic=checkwtopic.trim();
var checkwmsg=document.getElementById("wmsg_txt").value;
checkwmsg=checkwmsg.trim();
if (checkwmsg=="NIL")
   checkwmsg="";
 if (checkwtopic=="NIL")
    checkwtopic="";
if ((checkwtopic=="") && (checkwmsg==""))
  ;
else if (checkwtopic=="")
{ if (invalid==0)
  alert("Will message cannot be set without Will topic");
  invalid=1;
}
else if (checkwmsg=="")
{ if (invalid==0)
  alert("Will message cannot be empty if Will topic is set");
  invalid=1;
}
var new_dev_name="";
if(invalid==0)
{
if (document.getElementById("deveditflag").value=="1")
document.getElementById("choice").value='update';
else if (document.getElementById("deveditflag").value=="0")
document.getElementById("choice").value='adddevice';
new_dev_name=document.getElementById("d_name_txt").value;
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");
$("#d_name_txt").appendTo("#myform");
$("#d_desc_txt").appendTo("#myform");
$("#wtopic_txt").appendTo("#myform");
$("#wmsg_txt").appendTo("#myform");
$("#wqos_txt").appendTo("#myform");
$("#wrtn_txt").appendTo("#myform");

//document.getElementById("add_devdialog").style.display="none;"

$("#add_devdialog").modal("hide");
document.getElementById("rt_side_panel").style.display="block";
document.getElementById("connectmsg").style.display="none";

//$("#device").innerHTML="";
addclk=1;
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
var client_available=false;
$.ajax({


   url: '/',
data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
      if (msg==0)
      {
        if (document.getElementById("choice").value=='adddevice')
          client_available=true;
      }
    },
    error:function(msg){
    }
    
});
addclk=1;
id=document.getElementById("d_name").value;
document.getElementById("d_name_txt").value="";
document.getElementById("d_desc_txt").value="";
document.getElementById("wtopic_txt").value="";
document.getElementById("wmsg_txt").value="";
document.getElementById("wqos_txt").value="0";
document.getElementById("wrtn_txt").value="0";


$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");
document.getElementById("dn").style.display="none";
document.getElementById("dd").style.display="none";
document.getElementById("wt").style.display="none";
document.getElementById("wm").style.display="none";
document.getElementById("wq").style.display="none";
document.getElementById("wr").style.display="none";

//document.getElementById("addbtn").style.display="none";
document.getElementById("d_name_txt").style.display="none";

document.getElementById("add_devdialog").style.display="none";
if (document.getElementById("deveditflag").value=="1")
{
disp_detail(id);
}
else
{
  if (client_available==true)
  {
    if (document.getElementById("list_tag").innerText=='Templates')
      alert("Template is already available. Duplicate Entry");
    else
      alert("Client is already available. Could not add two clients with same name");
  }
  else
  {
    document.getElementById("deveditflag").value="10";
    var elts_check=document.getElementsByClassName("1");
  	var elt=document.createElement("li");
  	var ielt=document.createElement("i");
  	ielt.className="fa fa-circle-o";
  	elt.style.display="block";
  	elt.style.cursor="pointer";
  	elt.style.pointerEvents="auto";
    elt.style.padding="4px 4px 4px 0px";
    elt.innerHTML="<a class=detail id='device"+new_dev_name+"' name='device"+new_dev_name+"' onclick=devclick(this.id)><i class=detail></i> "+new_dev_name+"</a>";
  var newelt=$('#device').get(0);
  if (newelt==undefined)
  {
    getDashboard();
  }
  else
  {
    if (newelt.childNodes[0])
      newelt.childNodes[0].style.paddingTop="4px";
    newelt.insertBefore(elt,newelt.childNodes[0]||null);
    disp_detail(new_dev_name);
  }
}
}
}

});


$("#edit").click(function(event){
document.getElementById("will_topic").readOnly=false;
document.getElementById("will_msg").readOnly=false;
document.getElementById("will_retain").readOnly=false;

document.getElementById("choice").value='update';
document.getElementById("edit").className='btn btn-sm btn-info';
//("#editdev").click();
 
});


$("#editdev").click(function(event){
document.getElementById("dialog").style.display="none;"

$("#add_devdialog").dialog("close");
var checkdname=document.getElementById("d_name_txt").value;
checkdname=checkdname.trim();
var checkddesc=document.getElementById("d_desc_txt").value;
checkddesc=checkddesc.trim();
var invalid=0;
if ((checkdname=="") || (checkddesc==""))
{
  alert("Device Name/Description could not be empty");
  invalid=1;
}
var checkwtopic=document.getElementById("wtopic_txt").value;
checkwtopic=checkwtopic.trim();
var checkwmsg=document.getElementById("wmsg_txt").value;
checkwmsg=checkwmsg.trim();
if ((checkwtopic=="") && (checkwmsg==""))
  ;
else if ((checkwtopic=="") || (checkwtopic=="NIL"))
{
  if (invalid==0)
  alert("Will message cannot be set without Will topic");
  invalid=1;
}
else if ((checkwmsg=="") || (checkwmsg=="NIL"))
{
  if (invalid==0)
  alert("Will message cannot be empty if Will topic is set");
  invalid=1;
}
if (invalid==0)
{
document.getElementById("choice").value='update';
$("#d_name_txt").appendTo("#myform");
$("#d_desc_txt").appendTo("#myform");
$("#wtopic_txt").appendTo("#myform");
$("#wmsg_txt").appendTo("#myform");
$("#wqos_txt").appendTo("#myform");
$("#wrtn_txt").appendTo("#myform");

document.getElementById("will_topic").readOnly=true;
document.getElementById("will_msg").readOnly=true;
document.getElementById("will_retain").readOnly=true;

document.getElementById("edit").className='btn btn-sm btn-info';
document.getElementById("save").className='hidden';
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

    }
    
});
var dlgbtnid=document.getElementByID("editdev");
dlgbtnid.setAttribute("id","add");
dlgbtnid.setAttribute("name","add");
e.value="Add";
disp_detail(id);
}
});

$("#pub_update").click(function(event){
var checkpubt=document.getElementById("pubt_txt").value;
checkpubt=checkpubt.trim();
var checkpubm=document.getElementById("pubm_txt").value;
checkpubm=checkpubm.trim();
var subtime=document.getElementById("sub_txt").value;
var invalid=0;
var txt_chk=document.getElementById("text_check").checked;
var msgtype=document.getElementById("text_type").value;
var msg_type_value=1;
var msg_type_txt="plaintext";
var msg;
if ((s=="pub") || (s=="addpub"))
{
if (txt_chk==true)
{
  //msg_type="text";
  if (msgtype=="plaintext")
  {
    msg=document.getElementById("plaintext_txt").value;
    msg_type_value=1;
    msg_type_txt="plaintext";
  }
  else if (msgtype=="systemvariable")
  {
    msg=document.getElementById("system_var").value;
    if (msg=="$Client_uptime")
    {
      msg_type_value=21;
      msg_type_txt="client_uptime";
    }
    else if (msg=="$Current_time")
    {
      msg_type_value=22;
      msg_type_txt="current_time";
    }
    else if (msg=="$Client_ID")
    {
      msg_type_value=23;
      msg_type_txt="client_id";
    }
  }
  else if (msgtype=="random")
  {
    msg=document.getElementById("pipe_txt").value;
    msg_type_value=3;
    msg_type_txt="random";
  }
  else if (msgtype=="range")
  {
    msg=document.getElementById("start_value").value+" - "+document.getElementById("end_value").value;
    n1=parseInt(document.getElementById("start_value").value);
    n2=parseInt(document.getElementById("end_value").value);
    if (n1>n2)
    {
      alert("Improper Range");
      invalid=1;
      improper_range=true;
    }
    msg_type_value=4;
    msg_type_txt="range";
  }
  document.getElementById("pubm_txt").value=msg;
  document.getElementById("json_pubm_txt").value=msg;
  document.getElementById("message_type").value=msg_type_value;
}
else
{
  msg_type="json";
  fnjsonmsgupdate();
}
}
else
{
  document.getElementById("json_pubm_txt").value=document.getElementById("pubm_txt").value;
}
checkpubm=document.getElementById("pubm_txt").value;
checkpubm=checkpubm.trim();
if ((s=="pub") || (s=="addpub"))
{
  if ((checkpubt=="") || (checkpubm==""))
  {
    if (improper_range==true)
    {
      improper_range=false;
    }
    else if (no_parameter==true)
      no_parameter=false;
    else
    {
    alert("Publish Topic/Message could not be empty");
    }
    invalid=1;
  }
}
if ((s=="sub") || (s=="addsub"))
{
  if (checkpubt=="")
  {
    alert("Topic to be subscribed could not be empty");
    invalid=1;
  }
}
if ((s=="res") || (s=="addres"))
{
var checkrest=document.getElementById("rest_txt").value;
checkrest=checkrest.trim();
var checkresm=document.getElementById("resm_txt").value;
checkresm=checkresm.trim();
  if ((checkpubt=="") || (checkpubm=="") || (checkrest=="") || (checkresm==""))
  {
    alert("Topic/Message could not be empty");
    invalid=1;
  }
}
if (invalid==0)
{
  $("#editdialog").modal("hide");
//document.getElementById("pubd1").style.display="none";
document.getElementById("pubm_txt").disabled=false;
$("#paid_txt").appendTo("#myform");
$("#pid_txt").appendTo("#myform");
$("#pubt_txt").appendTo("#myform");
$("#rest_txt").appendTo("#myform");
$("#resm_txt").appendTo("#myform");
  $("#pubm_txt").appendTo("#pm");
$("#pm").appendTo("#myform");
$("#pubm_txt").appendTo("#myform");
document.getElementById("json_pubm_txt").style.display="block";
$("#json_pubm_txt").appendTo("#myform");
$("#message_type").appendTo("#myform");
$("#pqos_txt").appendTo("#myform");
$("#prtn_txt").appendTo("#myform");
$("#paid_txt").appendTo("#myform");
$("#d_name_txt").appendTo("#myform");
$("#d_desc_txt").appendTo("#myform");
$("#wtopic_txt").appendTo("#myform");
$("#wmsg_txt").appendTo("#myform");
$("#wqos_txt").appendTo("#myform");
$("#wrtn_txt").appendTo("#myform");
$("#hr").appendTo("#myform");
$("#min").appendTo("#myform");
$("#sec").appendTo("#myform");
document.getElementById("d_name_txt").style.display="none";
document.getElementById("d_desc_txt").style.display="none";
document.getElementById("wtopic_txt").style.display="none";
document.getElementById("wmsg_txt").style.display="none";
document.getElementById("wqos_txt").style.display="none";
document.getElementById("wrtn_txt").style.display="none";
if (s=="pub")
{
document.getElementById("choice").value='pubupdate';
document.getElementById('publish_value').value=document.getElementById("sub_txt1").value;
}
else if(s=="sub")
{
document.getElementById("choice").value='subupdate';
document.getElementById('subscribe_value').value=document.getElementById("sub_txt").value;
}
else if(s=="res")
{
  document.getElementById("choice").value='resupdate';
}
else if(s=="addpub")
{
  document.getElementById("choice").value='addpub';
  document.getElementById('publish_value').value=document.getElementById("sub_txt1").value;

}
else if(s=="addsub")
{
document.getElementById('prtn_txt').value="0";
document.getElementById("choice").value='addsub';
document.getElementById('subscribe_value').value=document.getElementById("sub_txt").value;
}
else if(s=="addres")
document.getElementById("choice").value='addres';
/*for (var v=0;v<json_parameter_count;v++)
{
  document.getElementById("type_txt"+json_parameter_count).style.display="block";
  $("#type_txt"+json_parameter_count).appendTo("#myform");
}*/
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {
}  
});
json_parameter_count=0;
document.getElementById("paid_txt").style.display="none";
document.getElementById("pubm_txt").disabled=true;
document.getElementById("pid_txt").style.display="none";
document.getElementById("pubt_txt").style.display="none";
document.getElementById("pubm_txt").style.display="none";
document.getElementById("rest_txt").style.display="none";
document.getElementById("resm_txt").style.display="none";
var json_table=document.getElementById("json_table");
while(json_table.rows[1]) json_table.deleteRow(1);
  var count = $('#json_table tr').length;
  var json_row=json_table.insertRow(count);
  var json_par_column=json_row.insertCell(0);
  json_par_column.innerHTML="<input type=textbox id=parameter"+json_parameter_count+" name=parameter"+json_parameter_count+" class=form-control style='display:block;width:125px;margin-bottom:5px' placeholder='Key'>";
  var json_type_column=json_row.insertCell(1);
  json_type_column.innerHTML="";
  var sl='<select class=form-control id=json_text_type'+json_parameter_count+' name=json_text_type'+json_parameter_count+' style=width:145px;padding-left:2px;margin-bottom:5px onchange="fnjsontexttype(this.value);">\
          <option value=plaintext'+json_parameter_count+' selected>Constant</option>\
          <option value=system_var'+json_parameter_count+'>System Variables</option>\
          <option value=pipe_txt'+json_parameter_count+'>RANDOM</option>\
          <option value=range'+json_parameter_count+'>RANGE</option>\
          </select>';
  json_type_column.innerHTML=sl;      
  var json_value_column=json_row.insertCell(2);
  json_value_column.innerHTML="<input type=textbox id=plaintext"+json_parameter_count+" name=plaintext"+json_parameter_count+" class=form-control placeholder='Constant' style=display:block;width:185px;margin-bottom:5px>";
  json_value_column.innerHTML+='<select class="form-control" id=system_var'+json_parameter_count+' name=system_var'+json_parameter_count+' style="display:none;width:185px;margin-bottom:5px">\
          <option value="$Client_uptime">$Client_uptime</option>\
          <option value="$Current_time">$Current_time</option>\
          <option value="$Client_ID">$Client_ID</option>\
          </select>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=pipe_txt'+json_parameter_count+' name=pipe_txt'+json_parameter_count+' style="display:none;width:185px;margin-bottom:5px" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>';
  json_value_column.innerHTML+='<input type=number class="form-control" max=100 min=-100 id=start_value'+json_parameter_count+' name=start_value'+json_parameter_count+' style="width:79px;padding-left:5px;float:left;margin-bottom:5px;display:none" value=-100 tabindex=22></input>\
          <label for="lbl23" id=lblto'+json_parameter_count+' name=lblto'+json_parameter_count+' class="form-control" style="text-align:center;width:28px;float:left;margin-bottom:5px;display:none;border:none;" >-</label>\
          <input type=number max=100 class="form-control" min=-100 id=end_value'+json_parameter_count+' name=end_value'+json_parameter_count+' style="margin-bottom:5px;padding-left:5px;padding-right:5px;width:79px;float:left;display:none" value=100></input>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=type_txt'+json_parameter_count+' name=type_txt'+json_parameter_count+' style="display:none;width:260px;float:right;"></input>\
          ';

  var json_action_column=json_row.insertCell(3);
  json_action_column.style.textAlign='center';
  json_action_column.innerHTML="<img src='/images/dbdrop.png' id=del"+json_parameter_count+" name=del"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnjsondelete(this.id)'>";
  var json_action_column=json_row.insertCell(4);
  json_action_column.innerHTML="<img src='/images/plus.png' id=add"+json_parameter_count+" name=add"+json_parameter_count+" style='display:block;width:20px;height:20px;cursor:pointer;' onclick='fnaddjson(this.id)'>";
  last_added=json_parameter_count;
  json_row_number=new Array();
  json_row_number[json_parameter_count]=1;
  add_json_initial_top=220;
  pub_initial_top=380;
  //document.getElementById("add_json").style.top=add_json_initial_top+"px";
json_parameter_count++;
document.getElementById("text_check").checked=true;
document.getElementById("json_check").checked=false;
document.getElementById("json_div").style.display="none";
document.getElementById("pqos_txt").style.display="none";
document.getElementById("prtn_txt").style.display="none";
document.getElementById("hr").style.display="none";
document.getElementById("min").style.display="none";
document.getElementById("sec").style.display="none";
document.getElementById("json_pubm_txt").style.display="none";
//document.getElementById("pubd1").style.display="none";
document.getElementById("rndrange_div").style.display="none";
document.getElementById("rnd_div").style.display="none";
document.getElementById("range_div").style.display="none";
id=document.getElementById("pid_txt").value;
disp_detail(id); 
}
});

$(".activedev").hover(function(event){
$(this).css("background-color","#265C00");
$(this).css("cursor","pointer");
},
function()
{

});
$(".alldev").hover(function(event){
$(this).css("cursor","pointer");
},
function()
{

});


$(".detail").hover(function(event){
$(this).css("cursor","pointer");

},
function()
{
});


$(".editdb").hover(function(event){
$(this).css("cursor","pointer");
},
function()
{
});

$(".dropdb").hover(function(event){
$(this).css("cursor","pointer");
},
function()
{
});

//$(".detail").click(function(event){

$(".example").click(function(event){
var xdetail=document.getElementsByClassName("example");
var xd;

for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#fafafa";
}

var devtrack_id=document.getElementById(($(event.target).attr('id')));
devtrack_id.style.backgroundColor="#ecf0f5";
});

$(".plusimg").hover(function(event){
$(this).css("cursor","pointer");
},
function()
{
});


$("#create_bulk").click(function(event){

  document.getElementById("devices_count_txt").value=document.getElementById("devices_count_txt_temp").value;
  document.getElementById("dev_name_prefix_txt").value=document.getElementById("dev_name_prefix_txt_temp").value;
    document.getElementById("template_selected").value=document.getElementById("templateload").value;
    if ((document.getElementById("dev_name_prefix_txt_temp").value).trim()=="")
      alert("Device_Name_Prefix could not be empty");
    else
    {
              $('#addbulkdialog').modal('hide');

  document.getElementById("choice").value="addbulk";
    $.ajax({


   url: '/',
data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
    },
    error:function(msg){
    }
  
});
    addclk=1;
id=document.getElementById("d_name").value;
if (document.getElementById("deveditflag").value=="1")
{
disp_detail(id);
}
else
{
  document.getElementById("deveditflag").value="10";
  getDashboard();
//location.reload();
}
}

});

$("#select_sim_env").click(function(event){
document.getElementById("Templates").style.display="none";
document.getElementById("TemplatesTab").style.display="none";
s="selectenv";
document.getElementById("choice").value='dbselect';
oldconfiguration=configuration;
if (setconfig == 1)
{
    document.getElementById("confname").value=newconfig;
    configuration=newconfig;
}
else
{
    $("#addenvdialog").modal('hide');
    configuration=document.getElementById('dbload').value;
}
if (configuration==oldconfiguration)
{
  document.getElementById("list_tag").innerText="Device List";
  document.getElementById("heading").innerText="Device Details";
  document.getElementById("heading_name").innerText="Client Name";
  document.getElementById("d_name_lbl").innerText="Device Name";
  document.getElementById("d_name_txt").placeholder="Enter Device Name";
  document.getElementById("d_name_lbl2").innerText="Device Name";
  document.getElementById("pid_txt").placeholder="Enter Device Name";

  document.getElementById("devadd1").style.display="block";
  document.getElementById("template_add").style.display="none";
  document.getElementById("TemplatesTab").style.display="block";
  document.getElementById("TemplatesTab").innerText=configuration;


}
else
{
  document.getElementById("devadd1").style.display="block";
  document.getElementById("template_add").style.display="none";
  document.getElementById("list_tag").innerText="Device List";
  document.getElementById("heading").innerText="Device Details";
  document.getElementById("heading_name").innerText="Client Name";
    document.getElementById("d_name_lbl").innerText="Device Name";
  document.getElementById("d_name_txt").placeholder="Enter Device Name";
  document.getElementById("d_name_lbl2").innerText="Device Name";
  document.getElementById("pid_txt").placeholder="Enter Device Name";
    document.getElementById("stopallclients").disabled=true;
    document.getElementById("startallclients").disabled=false;



  if (document.getElementById("device").childElementCount>0) 
  {
    $("#device").innerHTML="";
    document.getElementById("choice").value='stopall';
    document.getElementById("stopallclients").disabled=true;
    document.getElementById("startallclients").disabled=false;
    document.getElementById("tickgreen").style.display="none";
    if (configuration!='bevy_sim_template')
    document.getElementById("tickgrey").style.display="none";
    //document.getElementById("stopdevice").disabled=true;
    //document.getElementById("startdevice").disabled=false;
       if (configuration!='bevy_sim_template')

      document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

    $.ajax({


        url: '/',

        data: $("form[name='myform']").serialize(),
        type: "POST",
        async:false,
        success:function () {

      }
    });
  }
document.getElementById("choice").value='dbselect';

$.ajax({


   url: '/?config='+configuration,

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

}
});
document.getElementById("deveditflag").value="10";
document.getElementById("TemplatesTab").style.display="block";
document.getElementById("TemplatesTab").innerText=configuration;
getDashboard();
//location.reload();

}
});


});
$(".detail").click(function(event){
var xdetail=document.getElementsByClassName("detail");
var xd;
for(xd=0;xd<xdetail.length;xd++)
xdetail[xd].style.backgroundColor="#FDFFFF";
dev_id=($(event.target).attr('id'));
id=dev_id.substring(6);
disp_detail(id);
});

function JsonpCallback(json)
{
 document.getElementById('#summary').innerHtml=json.result;

}
function fnedit(id2)
{
var btnid=id2;
var ind1=btnid.indexOf('edit');
var rownum=btnid.slice(3,ind1);
var d_id=btnid.slice(ind1+4);
pubflag=btnid.indexOf('pub');
editflag=btnid.indexOf('sub');
resflag=btnid.indexOf('res');
var cbtn=document.getElementById("pub_cancel");
var sbtn=document.getElementById("pub_update");
if (pubflag != -1)
{
   s="pub";

}
else if (editflag != -1)
{
   s="sub";
}
else
{
   s="res";
}
if (s=="sub")
{
  document.getElementById("pm").style.display="none";
    document.getElementById("pr").style.display="none";

}
else
{
  document.getElementById("pm").style.display="block";
    document.getElementById("pr").style.display="block";

}
document.getElementById("paid_txt").value=rownum;
document.getElementById("pid_txt").value=d_id;

  document.getElementById("editdialog").style.display="block";
  //document.getElementById("pubd2").style.display="block";
  document.getElementById("editdialog").style.display="block";
  document.getElementById("pubt_txt").value="";
  document.getElementById("pubm_txt").value="";
   document.getElementById("pa").style.display="none";
  document.getElementById("pi").style.display="none";
  document.getElementById("pt").style.display="block";
  document.getElementById("pt").style.width="410px";
  document.getElementById("pt").style.marginBottom="10px";
  document.getElementById("pm").style.display="block";
  document.getElementById("pm").style.width="390px";
    document.getElementById("tm").style.display="block";
  document.getElementById("tm").style.width="400px";
    document.getElementById("sm").style.display="block";
  document.getElementById("sm").style.width="390px";
  document.getElementById("pq").style.display="block";
  document.getElementById("pq").style.width="390px";

  document.getElementById("pq").style.display="block";
  document.getElementById("pr").style.display="block";
  document.getElementById("paid_txt").style.display="block";
  document.getElementById("pid_txt").style.display="block";
  document.getElementById("pubt_txt").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("pubt_txt").style.width="245px";
  document.getElementById("pubt_txt").style.float="right";
  document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="245px";
  document.getElementById("sub_txt").style.float="right";
  document.getElementById("sub_txt").value=0;
  document.getElementById("hr").style.width="48px";
  document.getElementById("hr").style.float="left";
  document.getElementById("hr").style.display="block";
  document.getElementById("hr").value=0;
  document.getElementById("lbl1").style.width="35px";
  document.getElementById("lbl1").style.paddingLeft="5px";
  document.getElementById("lbl1").style.float="left";
  document.getElementById("lbl1").style.display="block";
  document.getElementById("min").style.width="48px";
  document.getElementById("min").style.float="left";
  document.getElementById("min").style.display="block";
  document.getElementById("min").value=0;
  document.getElementById("lbl2").style.paddingLeft="5px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("lbl2").style.width="38px";
  document.getElementById("lbl2").style.float="left";
  document.getElementById("lbl2").style.display="block";
  document.getElementById("sec").style.width="48px";
  document.getElementById("sec").style.float="left";
  document.getElementById("sec").style.display="block";
  document.getElementById("sec").value=0;
  document.getElementById("lbl3").style.paddingLeft="5px";
  document.getElementById("lbl3").style.width="30px";
  document.getElementById("lbl3").style.float="left";
  document.getElementById("lbl3").style.display="block";
  document.getElementById("pub_lbl").style.visibility="visible";
  document.getElementById("pqos_txt").style.display="block";
  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pqos_txt").style.width="245px";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("pqos_txt").style.float="right";
  document.getElementById("prtn_txt").style.float="right";
  document.getElementById("pubm_txt").style.width="245px";
  document.getElementById("pubm_txt").style.float="right";



  $("#pqos_txt").val("0");
  $("#prtn_txt").val("0");

$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#sub_txt").appendTo("#sm");
$("#hr").appendTo("#tm");
$("#lbl1").appendTo("#tm");
$("#min").appendTo("#tm");
$("#lbl2").appendTo("#tm");
$("#sec").appendTo("#tm");
$("#lbl3").appendTo("#tm");

$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pr");

if (s=='res')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}

$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#pm").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#sm").appendTo("#pubd2");

$("#pq").appendTo("#pubd2");
$("#pr").appendTo("#pubd2");
$("#pubbtn").appendTo("#editdialog");
if (s=='res')
{
$("#rt").appendTo("#pubd2");
$("#rm").appendTo("#pubd2");

}
//$("#pubd2").appendTo("#editdialog");
//$("#dialog_wrapper1").appendTo("#editdialog");
  document.getElementById("pid_txt").value=document.getElementById("d_name").value;
  if (s=="sub")
  {
    document.getElementById("pm").style.display="none";
    document.getElementById("pr").style.display="none";
        document.getElementById("sm").style.display="block";
      document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="245px";
  document.getElementById("sub_txt").style.float="right";

  }
  else
  {
  
    document.getElementById("pr").style.display="block";
        document.getElementById("tm").style.display="block";

  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pm").style.width="390px";
  document.getElementById("pt").style.width="410px";
  document.getElementById("pt").style.marginBottom="10px";
  document.getElementById("tm").style.width="400px";
  document.getElementById("pm").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("pubm_txt").style.width="245px";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("pubm_txt").style.float="right";
  document.getElementById("prtn_txt").style.float="right";



  }
  if (s=="res")
  {
    document.getElementById("rest_txt").value="";
    document.getElementById("resm_txt").value=""; 
    document.getElementById("rt").style.display="block";
    document.getElementById("rm").style.display="block";
  document.getElementById("rest_txt").style.display="block";
  document.getElementById("resm_txt").style.display="block";

  document.getElementById("rm").style.width="390px";
  document.getElementById("rt").style.width="390px";
  document.getElementById("rest_txt").style.width="245px";
  document.getElementById("resm_txt").style.width="245px";
  document.getElementById("rest_txt").style.float="right";
  document.getElementById("resm_txt").style.float="right";

$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");


  }
  else
  {
    document.getElementById("rt").style.display="none";
    document.getElementById("rm").style.display="none";
    
  }
$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pr");

if (s=='res')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}
$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#sm").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pm").appendTo("#pubd2");

$("#pq").appendTo("#pubd2");
$("#pr").appendTo("#pubd2");
if (s=='res')
{
$("#rt").appendTo("#pubd2");
$("#rm").appendTo("#pubd2");

}
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");


      id=document.getElementById("pid_txt").value;
document.getElementById("pid_txt").tabIndex=-1;
      //document.getElementById("dialog_wrapper1").style.display="block";
      //document.getElementById("pubd2").style.display="block";
  document.getElementById("pt").style.width="410px";
  document.getElementById("pt").style.marginBottom="10px";
  document.getElementById("pm").style.width="390px";
  document.getElementById("tm").style.width="400px";
document.getElementById("sm").style.width="390px";
  document.getElementById("pq").style.width="390px";
  document.getElementById("pr").style.width="390px";




  /////////////////////////////////////////////////////////////////////////

var cbtn=document.getElementById("pub_cancel");
var sbtn=document.getElementById("pub_update");


  document.getElementById("editdialog").style.display="block";
  //document.getElementById("pubd2").style.display="block";
  document.getElementById("editdialog").style.display="block";
  document.getElementById("paid_txt").value="";
  document.getElementById("pubt_txt").value="";
  document.getElementById("pubm_txt").value="";
  document.getElementById("pa").style.display="none";
  document.getElementById("pi").style.display="none";
      document.getElementById("tm").style.display="block";
  document.getElementById("tm").style.width="400px";

  document.getElementById("pt").style.display="block";
    document.getElementById("sm").style.display="block";
  document.getElementById("sm").style.width="490px";
  document.getElementById("sub_txt").style.display="block";
  document.getElementById("hr").style.display="block";
  document.getElementById("min").style.display="block";
  document.getElementById("sec").style.display="block";
  document.getElementById("hr").value=0;
  document.getElementById("min").value=0;
  document.getElementById("sec").value=0;
  document.getElementById("pq").style.display="block";
  document.getElementById("pq").style.width="490px";

  document.getElementById("pr").style.display="block";
  document.getElementById("paid_txt").style.display="block";
  document.getElementById("pid_txt").style.display="block";
  document.getElementById("pubt_txt").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("pubt_txt").style.width="360px";
  document.getElementById("pubm_txt").style.width="245px";
  document.getElementById("pubt_txt").style.float="right";
  document.getElementById("pubm_txt").style.float="right";
  document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="345px";
  document.getElementById("sub_txt").style.float="right";
  document.getElementById("lbl1").style.width="85px";
  document.getElementById("lbl1").style.paddingLeft="15px";
  document.getElementById("lbl1").style.float="left";
  document.getElementById("lbl1").style.display="block";



  document.getElementById("min").style.width="78px";
  document.getElementById("min").style.float="left";
  document.getElementById("min").style.display="block";

  document.getElementById("lbl2").style.paddingLeft="15px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("lbl2").style.width="38px";
  document.getElementById("lbl2").style.float="left";
  document.getElementById("lbl2").style.display="block";

  document.getElementById("sec").style.width="78px";
  document.getElementById("sec").style.float="left";
  document.getElementById("sec").style.display="block";

  document.getElementById("pub_lbl").style.visibility="visible";
  document.getElementById("pqos_txt").style.display="block";
  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pqos_txt").style.width="150px";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("pqos_txt").style.float="left";
  document.getElementById("prtn_txt").style.float="left";
  document.getElementById("pm").style.display="none";
  document.getElementById("range_div").style.display="none";
  document.getElementById("json_div").style.display="none";
  document.getElementById("text_check").selected=true;
  document.getElementById("json_check").selected=false;

  $("#pqos_txt").val("0");
  $("#prtn_txt").val("0");

$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#sub_txt").appendTo("#sm");
$("#hr").appendTo("#tm");
$("#lbl1").appendTo("#tm");
$("#min").appendTo("#tm");
$("#lbl2").appendTo("#tm");
$("#sec").appendTo("#tm");
$("#lbl3").appendTo("#tm");
$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pq");
if (s=='addres')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}

$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#pq").appendTo("#pubd2");
$("#pr").appendTo("#pubd2");
$("#pm").appendTo("#pubd2");
$("#sm").appendTo("#pubd2")
//$("#pubbtn").appendTo("#dialog_wrapper1");
if (s=='addres')
{
$("#rt").appendTo("#pubd2");
$("#rm").appendTo("#pubd2");

}
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");
  document.getElementById("pid_txt").value=document.getElementById("d_name").value;
  if (s=="sub")
  {
    document.getElementById("pm").style.display="none";
    document.getElementById("pr").style.display="none";
    document.getElementById("sm").style.display="block";
      document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="295px";
  document.getElementById("sub_txt").style.float="right";
document.getElementById("rndrange_div").style.display="none";
  }
  else
  {
    //document.getElementById("pm").style.display="block";
    document.getElementById("pm").style.display="none";
    document.getElementById("tm").style.display="block";
    document.getElementById("pr").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pm").style.width="490px";
    document.getElementById("tm").style.width="600px";
  document.getElementById("pt").style.width="520px";
  document.getElementById("pubm_txt").style.width="225px";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("pqos_txt").style.width="150px";
  document.getElementById("pubm_txt").style.float="left";
  document.getElementById("prtn_txt").style.float="left";
  document.getElementById("ptype").style.display="block";
  document.getElementById("rndrange_div").style.display="block";
  }
  if (s=="res")
  {
    document.getElementById("rest_txt").value="";
    document.getElementById("resm_txt").value=""; 
    document.getElementById("rt").style.display="block";
    document.getElementById("rm").style.display="block";
  document.getElementById("rest_txt").style.display="block";
  document.getElementById("resm_txt").style.display="block";

  document.getElementById("rm").style.width="490px";
  document.getElementById("rt").style.width="490px";
  document.getElementById("rest_txt").style.width="295px";
  document.getElementById("resm_txt").style.width="295px";
  document.getElementById("rest_txt").style.float="right";
  document.getElementById("resm_txt").style.float="right";

$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");


  }
  else
  {
    document.getElementById("rt").style.display="none";
    document.getElementById("rm").style.display="none";
    
  }
$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#pqos_lbl").appendTo("#pq");
$("#pqos_txt").appendTo("#pq");
$("#prtn_lbl").appendTo("#pq");
$("#prtn_txt").appendTo("#pq");
if (s=='res')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}

$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#ptype").appendTo("#pubd2");
$("#sm").appendTo("#pubd2");
$("#pq").appendTo("#pubd2");
$("#rndrange_div").appendTo("#pubd2");
$("#plaintext_div").appendTo("#pubd2");
$("#json_div").appendTo("#pubd2");
//$("#pr").appendTo("#pubd2");
//$("#pm").appendTo("#pubd2");
$("#par_div").appendTo("#pubd2");
$("#par_txt_div").appendTo("#pubd2");


if (s=='res')
{
$("#rt").appendTo("#pubd2");
$("#rm").appendTo("#pubd2");

}
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");

      id=document.getElementById("pid_txt").value;
document.getElementById("pid_txt").tabIndex=-1;
      //document.getElementById("dialog_wrapper1").style.display="block";
     // document.getElementById("pubd2").style.display="block";
  document.getElementById("pt").style.width="520px";
  document.getElementById("pm").style.width="590px";
  document.getElementById("pq").style.width="590px";
  document.getElementById("pr").style.width="590px";
  document.getElementById("tm").style.width="600px";
    document.getElementById("sm").style.width="590px";


 document.getElementById("editdialog").style.display="block";


  /////////////////////////////////////////////////////////////////////////
 document.getElementById("editdialog").style.display="block";
document.getElementById("pubt_txt").value=document.getElementById(s+"r"+rownum+"c0").value;
document.getElementById("paid_txt").style.display="block";
document.getElementById("paid_txt").value=rownum;
document.getElementById("pubm_txt").value=document.getElementById(s+"r"+rownum+"c1").value;
if (s=="pub")
{
var msg_edit_type=document.getElementById(s+"r"+rownum+"c7").value;
var edit_msg=document.getElementById(s+"r"+rownum+"c8").value;
if (msg_edit_type==5)
{ 
     var json_table=document.getElementById("json_table");
   while(json_table.rows[1]) json_table.deleteRow(1);
   json_parameter_count=0;
  var count = $('#json_table tr').length;
  var json_row=json_table.insertRow(count);
  var json_par_column=json_row.insertCell(0);
  json_par_column.innerHTML="<input type=textbox id=parameter"+json_parameter_count+" name=parameter"+json_parameter_count+" class=form-control style='display:block;width:125px;margin-bottom:5px' placeholder='Key'>";
  var json_type_column=json_row.insertCell(1);
  json_type_column.innerHTML="";
  var sl='<select class=form-control id=json_text_type'+json_parameter_count+' name=json_text_type'+json_parameter_count+' style=width:145px;padding-left:2px;margin-bottom:5px onchange="fnjsontexttype(this.value);">\
          <option value=plaintext'+json_parameter_count+' selected>Constant</option>\
          <option value=system_var'+json_parameter_count+'>System Variables</option>\
          <option value=pipe_txt'+json_parameter_count+'>RANDOM</option>\
          <option value=range'+json_parameter_count+'>RANGE</option>\
          </select>';
  json_type_column.innerHTML=sl;      
  var json_value_column=json_row.insertCell(2);
  json_value_column.innerHTML="<input type=textbox id=plaintext"+json_parameter_count+" name=plaintext"+json_parameter_count+" class=form-control placeholder='Constant' style=display:block;width:185px;margin-bottom:5px>";
  json_value_column.innerHTML+='<select class="form-control" id=system_var'+json_parameter_count+' name=system_var'+json_parameter_count+' style="display:none;width:185px;margin-bottom:5px">\
          <option value="$Client_uptime">$Client_uptime</option>\
          <option value="$Current_time">$Current_time</option>\
          <option value="$Client_ID">$Client_ID</option>\
          </select>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=pipe_txt'+json_parameter_count+' name=pipe_txt'+json_parameter_count+' style="display:none;width:185px;margin-bottom:5px" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>';
  json_value_column.innerHTML+='<input type=number class="form-control" max=100 min=-100 id=start_value'+json_parameter_count+' name=start_value'+json_parameter_count+' style="width:79px;padding-left:5px;float:left;margin-bottom:5px;display:none" value=-100 tabindex=22></input>\
          <label for="lbl23" id=lblto'+json_parameter_count+' name=lblto'+json_parameter_count+' class="form-control" style="text-align:center;width:28px;float:left;margin-bottom:5px;display:none;border:none;" >-</label>\
          <input type=number max=100 class="form-control" min=-100 id=end_value'+json_parameter_count+' name=end_value'+json_parameter_count+' style="padding-left:5px;padding-right:5px;width:79px;margin-bottom:5px;float:left;display:none" value=100></input>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=type_txt'+json_parameter_count+' name=type_txt'+json_parameter_count+' style="display:none;width:260px;float:right;"></input>\
          ';

  var json_action_column=json_row.insertCell(3);
  json_action_column.style.textAlign='center';
  json_action_column.innerHTML="<img src='/images/dbdrop.png' id=del"+json_parameter_count+" name=del"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnjsondelete(this.id)'>";
  var json_action_column=json_row.insertCell(4);
  json_action_column.innerHTML="<img src='/images/plus.png' id=add"+json_parameter_count+" name=add"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnaddjson(this.id)'>";
  last_added=json_parameter_count;
  json_row_number=new Array();
  json_row_number[json_parameter_count]=1;

json_parameter_count++;
  add_json_initial_top=220;
  pub_initial_top=380;
   document.getElementById("json_div").style.display="block";
   document.getElementById("add_json").style.display="none";
   document.getElementById("add_json").style.top=add_json_initial_top+"px";
  document.getElementById("json_div").style.display="block";  
  document.getElementById("json_check").checked=true;
  document.getElementById("text_check").checked=false;
  document.getElementById("plaintext_div").style.display="none";
  document.getElementById("rndrange_div").style.display="none";
  document.getElementById("add_json").style.display="none";
  var old_msg=edit_msg.split("},");
  for(var v=0;v<old_msg.length;v++)
  {
    if (v>0)
      fnaddjson("-1");
    var texttype="plaintext";
    var textkey="";
    var textvalue="";
    var actual_msg="";
    if ((v==0) && (v==old_msg.length-1))
      actual_msg=JSON.parse(old_msg[v]);
    else if (v==0)
    {
      actual_msg=JSON.parse(old_msg[v]+"}}");
    }
    else if (v<old_msg.length-1)
      actual_msg=JSON.parse("{"+old_msg[v]+"}}");
    else
      actual_msg=JSON.parse("{"+old_msg[v]);  
    for (var jkey in actual_msg)  
    {
      textkey=jkey;
      var msg_temp=actual_msg[jkey];
      texttype=msg_temp["type"];
      textvalue=msg_temp["msg"]
    }
    document.getElementById("parameter"+v).value=jkey;
    if (texttype=="plaintext")
    {
      document.getElementById("plaintext"+v).style.display="block";
      document.getElementById("plaintext"+v).value=textvalue;
      document.getElementById("json_text_type"+v).value="plaintext"+v;
    }
    else if (texttype=="systemvariable")
    {
      document.getElementById("system_var"+v).style.display="block";
      document.getElementById("plaintext"+v).style.display="none";
      document.getElementById("system_var"+v).value=textvalue;
      document.getElementById("json_text_type"+v).value="system_var"+v;      
    }
    else if (texttype=="random")
    {
      document.getElementById("pipe_txt"+v).style.display="block";
      document.getElementById("plaintext"+v).style.display="none";
      document.getElementById("pipe_txt"+v).value=textvalue;
      document.getElementById("json_text_type"+v).value="pipe_txt"+v;      
    }
    else if (texttype=="range")
    {
      var mm=textvalue.split(" - ")
      var start_val=mm[0];
      var end_val=mm[1];
      document.getElementById("plaintext"+v).style.display="none";
      document.getElementById("start_value"+v).style.display="block";
      document.getElementById("end_value"+v).style.display="block";
      document.getElementById("json_text_type"+v).value="range"+v;      
      document.getElementById("lblto"+v).style.display="block";
      document.getElementById("start_value"+v).value=mm[0];
      document.getElementById("end_value"+v).value=mm[1];
    }
  }

}
else
{ 
  document.getElementById("add_json").style.display="none";
  document.getElementById("json_check").checked=false;
  document.getElementById("text_check").checked=true;
  document.getElementById("json_div").style.display="none";
  document.getElementById("rndrange_div").style.display="block"; 
  $("#rndrange_div").appendTo("#pubd2");
 
  if (msg_edit_type==1)
  {
    document.getElementById("text_type").style.display="block";
    document.getElementById("text_type").style.width="360px";
    document.getElementById("text_type").style.marginTop="-20px";
    document.getElementById("text_type").style.float="right";
    document.getElementById("text_type").value="plaintext";
    document.getElementById("plaintext_div").style.display="block";
    document.getElementById("plaintext_div").style.width="500px";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("rnd_div").style.display="none";
    document.getElementById("range_div").style.display="none";
    document.getElementById("plaintext_txt").style.display="block";
    document.getElementById("plaintext_txt").style.width="360px";
    document.getElementById("plaintext_txt").style.marginTop="20px";
    document.getElementById("plaintext_txt").style.float="right";
    document.getElementById("plaintext_txt").value=edit_msg;
        $("#plaintext_div").appendTo("#pubd2");

  }
  else if (msg_edit_type>20)
  {
    document.getElementById("text_type").style.display="block";
    document.getElementById("text_type").style.width="360px";
    document.getElementById("text_type").style.marginTop="-20px";
    document.getElementById("text_type").style.float="right";
    document.getElementById("text_type").value="systemvariable";
    document.getElementById("plaintext_div").style.display="none";
    document.getElementById("sysvar_div").style.display="block";
    document.getElementById("sysvar_div").style.width="500px";
    document.getElementById("rnd_div").style.display="none";
    document.getElementById("range_div").style.display="none";
    document.getElementById("system_var").style.display="block";
    document.getElementById("system_var").style.width="360px";
    document.getElementById("system_var").style.marginTop="20px";
    document.getElementById("system_var").style.float="right";
    if (msg_edit_type==21)
      document.getElementById("system_var").value="$Client_uptime";
    else if (msg_edit_type==22)
      document.getElementById("system_var").value="$Current_time";
    else if (msg_edit_type==23)
      document.getElementById("system_var").value="$Client_ID";
    $("#sysvar_div").appendTo("#pubd2");

  }
  else if (msg_edit_type==3)
  {
    document.getElementById("text_type").style.display="block";
    document.getElementById("text_type").style.width="360px";
    document.getElementById("text_type").style.marginTop="-20px";
    document.getElementById("text_type").style.float="right";
    document.getElementById("text_type").value="random";
    document.getElementById("plaintext_div").style.display="none";
    document.getElementById("rnd_div").style.display="block";
    document.getElementById("rnd_div").style.width="500px";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("range_div").style.display="none";
    document.getElementById("pipe_lbl").style.display="block";
    document.getElementById("pipe_lbl").style.float="left";
    document.getElementById("pipe_lbl").style.marginTop="20px";
    document.getElementById("pipe_txt").style.display="block";
    document.getElementById("pipe_txt").style.width="360px";
    document.getElementById("pipe_txt").style.marginTop="20px";
    document.getElementById("pipe_txt").style.float="right";
    document.getElementById("pipe_txt").value=edit_msg;
    $("#rnd_div").appendTo("#pubd2");
  }
  else if (msg_edit_type==4)
  {
    document.getElementById("text_type").style.display="block";
    document.getElementById("text_type").style.width="360px";
    document.getElementById("text_type").style.marginTop="-20px";
    document.getElementById("text_type").style.float="right";
    document.getElementById("text_type").value="range";
    document.getElementById("plaintext_div").style.display="none";
    document.getElementById("range_div").style.display="block";
    document.getElementById("range_div").style.width="500px";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("rnd_div").style.display="none";
    var temp=edit_msg.split(" - ");
    document.getElementById("start_value").value=temp[0];
    document.getElementById("end_value").value=temp[1];
    $("#range_div").appendTo("#pubd2");    
  }
}
}
if (s=="res")
{
document.getElementById("rt").style.display="block";
document.getElementById("rm").style.display="block";
document.getElementById("rest_txt").style.display="block";
document.getElementById("resm_txt").style.display="block";
  document.getElementById("rm").style.width="390px";
  document.getElementById("rt").style.width="390px";
  document.getElementById("rest_txt").style.width="245px";
  document.getElementById("resm_txt").style.width="245px";
  document.getElementById("rest_txt").style.float="right";
  document.getElementById("resm_txt").style.float="right";
document.getElementById("ptype").style.display="none";
document.getElementById("msg_type_div").style.display="none";
document.getElementById("rndrange_div").style.display="none";
document.getElementById("json_div").style.display="none";
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

document.getElementById("rest_txt").value=document.getElementById(s+"r"+rownum+"c2").value;
document.getElementById("resm_txt").value=document.getElementById(s+"r"+rownum+"c3").value;
var qosstr=document.getElementById(s+"r"+rownum+"c4").value;
var nqos=qosstr.search("0");
var qosvalue;
if (nqos>-1) qosvalue="0";
else
{
  var mqos=qosstr.search("1");
  if (mqos > -1) qosvalue="1";
  else qosvalue="2";
}
document.getElementById("pqos_txt").value=qosvalue;
var rtnstr=document.getElementById(s+"r"+rownum+"c5").value;
var nrtn=rtnstr.search("0");
var rtnvalue;
if (nrtn>-1) rtnvalue="0";
else  rtnvalue="1";
document.getElementById("prtn_txt").value=rtnvalue;
}
else
{
document.getElementById("rt").style.display="none";
document.getElementById("rm").style.display="none";
var qosstr=document.getElementById(s+"r"+rownum+"c2").value;
var nqos=qosstr.search("0");
var qosvalue;
if (nqos>-1) qosvalue="0";
else
{
  var mqos=qosstr.search("1");
  if (mqos > -1) qosvalue="1";
  else qosvalue="2";
}
document.getElementById("pqos_txt").value=qosvalue;
var rtnstr=document.getElementById(s+"r"+rownum+"c3").value;
var nrtn=rtnstr.search("0");
var rtnvalue;
if (nrtn>-1) rtnvalue="0";
else  rtnvalue="1";
document.getElementById("prtn_txt").value=rtnvalue;
if (document.getElementById(s+"r"+rownum+"c4").value=='Every')
  document.getElementById("hr").value='*';
else
  document.getElementById("hr").value=document.getElementById(s+"r"+rownum+"c4").value;
if (document.getElementById(s+"r"+rownum+"c5").value=='Every')
  document.getElementById("min").value='*';
else
  document.getElementById("min").value=document.getElementById(s+"r"+rownum+"c5").value;
if (document.getElementById(s+"r"+rownum+"c6").value=='Every')
  document.getElementById("sec").value='*';
else
  document.getElementById("sec").value=document.getElementById(s+"r"+rownum+"c6").value;
if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
{
  document.getElementById("hr").value='*';
  document.getElementById("min").value='*';
  document.getElementById("sec").value='*';
}

}
//document.getElementById("pubd1").style.display="block";
document.getElementById("pubt_txt").focus();
if (s=="pub")
{
   document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="10px";
  document.getElementById("prtn_lbl").style.width="65px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="145px";
  //document.getElementById("prtn_txt").style.marginTop="-30px";
  document.getElementById("prtn_txt").style.float="left";

  if (msg_edit_type!=5)
  {
        document.getElementById("pub_cancel").style.top=document.getElementById("pub_update").style.top="380px";
    document.getElementById("pub_cancel").style.left="180px";
    document.getElementById("pub_update").style.left="350px";  
    document.getElementById("text_check").disabled=false;
    document.getElementById("json_check").disabled=false;
         document.getElementById("add_json").style.display="none";


  }
  else
  {
    document.getElementById("pub_cancel").style.top=document.getElementById("pub_update").style.top="175px";

    //document.getElementById("pub_cancel").style.left="550px";
    //document.getElementById("pub_update").style.left="480px";
    document.getElementById("text_check").disabled=true;
    document.getElementById("json_check").disabled=true;
         document.getElementById("add_json").style.display="none";
           var cbtn=document.getElementById("pub_cancel");
  var sbtn=document.getElementById("pub_update");
  var sample_top=380+((json_parameter_count-1)*30);
  cbtn.style.top=sample_top+"px";
  sbtn.style.top=sample_top+"px";


  }
   //cbtn.style.top="375px";
   //sbtn.style.top="375px";
      document.getElementById("tm").style.display="block";
   document.getElementById("sm").style.display="none";
   document.getElementById("prtn_lbl").style.display="block";
   /*$('#editdialog').modal({
  backdrop: 'static'
});*/
      $("#ptype").appendTo("#pubd2");

$("#msg_type_div").appendTo("#pubd2");
$("#rndrange_div").appendTo("#pubd2");
$("#rnd_div").appendTo("#pubd2");
$("#plaintext_div").appendTo("#pubd2");

$("#json_div").appendTo("#pubd2");
$("#rnd_div").appendTo("#pubd2");
$("#range_div").appendTo("#pubd2");
$("#sysvar_div").appendTo("#pubd2");

/*$('#editdialog').modal({
  backdrop: 'static'
});*/
if(document.getElementById("list_tag").innerText=='Templates')
{
  document.getElementById("pub_heading").innerText="Edit Publish Message Template";
    document.getElementById("pub_lbl").style.visibility="hidden";

  if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
  {
    document.getElementById("sub_txt1").value=0;
    document.getElementById("tm").style.display="none";
  }
  else
  {
    document.getElementById("sub_txt1").value=1;
      document.getElementById("tm").style.display="block";

  }
  document.getElementById("lbl3").style.display="none";
  document.getElementById("sec").style.display="none";
  document.getElementById("sm").style.display="none";
  document.getElementById("sm1").style.display="block";
  document.getElementById("hr").style.width="132px";
  document.getElementById("min").style.width="132px";
  document.getElementById("pt").style.width="520px";

  document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";



}
else
{
  document.getElementById("pub_heading").innerText="Edit Publish Message Details";
  document.getElementById("lbl3").style.display="block";
  document.getElementById("sec").style.display="block";  
  document.getElementById("sub_txt1").value=0;
  document.getElementById("tm").style.display="none";
  document.getElementById("pub_lbl").style.visibility="hidden";

  if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
  {
    document.getElementById("sub_txt1").value=0;
    document.getElementById("tm").style.display="none";
  }
  else
  {
    document.getElementById("sub_txt1").value=1;
      document.getElementById("tm").style.display="block";

  }

  document.getElementById("pub_lbl").style.visibility="hidden";
  document.getElementById("sm").style.display="none";
  document.getElementById("sm1").style.display="block";
        document.getElementById("pt").style.width="500px";

    document.getElementById("pubt_txt").placeholder="Enter Topic";
  document.getElementById('pqnmark').style.display="none";


}
   document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="10px";
  document.getElementById("prtn_lbl").style.width="65px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("prtn_txt").style.marginTop="3px";
  document.getElementById("prtn_txt").style.float="left";
    document.getElementById("dialog_size").style.height="550px";
document.getElementById("dialog_size").style.width="650px";
  document.getElementById("hr").style.width="78px";
  document.getElementById("lbl1").style.width="48px";
  document.getElementById("lbl1").style.paddingLeft="13px";
  document.getElementById("min").style.width="78px";
  document.getElementById("lbl2").style.width="48px";
  document.getElementById("lbl2").style.paddingLeft="10px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("sec").style.width="78px";
  document.getElementById("lbl3").style.width="30px";
  document.getElementById("lbl3").style.paddingLeft="10px";
  if ((document.getElementById("list_tag").innerText=='Templates') && (document.getElementById("pub_heading").innerText=="Edit Publish Message Template"))
  {
      document.getElementById("hr").style.width="132px";
  document.getElementById("min").style.width="132px";

  }
  else
  if ((document.getElementById("list_tag").innerText!='Templates') && (document.getElementById("pub_heading").innerText=="Edit Publish Message Details"))

  {
    document.getElementById("hr").style.width="78px";
    document.getElementById("min").style.width="78px";
  }
if (s=='pub')
{
  if (document.getElementById(s+"r"+rownum+"c4").value=='Every')
  document.getElementById("hr").value='*';
else
  document.getElementById("hr").value=document.getElementById(s+"r"+rownum+"c4").value;
if (document.getElementById(s+"r"+rownum+"c5").value=='Every')
  document.getElementById("min").value='*';
else
  document.getElementById("min").value=document.getElementById(s+"r"+rownum+"c5").value;
if (document.getElementById(s+"r"+rownum+"c6").value=='Every')
  document.getElementById("sec").value='*';
else
  document.getElementById("sec").value=document.getElementById(s+"r"+rownum+"c6").value;
if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
{
  document.getElementById("hr").value='*';
  document.getElementById("min").value='*';
  document.getElementById("sec").value='*';
}
document.getElementById("every_hr").style.display="block";
document.getElementById("every_sec").style.display="blcok";
document.getElementById("every_min").style.display="block";

}
var hr_check=document.getElementById("hr");
for (var jj=0;jj<hr_check.length;jj++)
{
  if (hr_check.options[jj].value==0)
  hr_check.options[jj].text=hr_check.options[jj].value+'th';
  else if ((hr_check.options[jj].value>=4) && (hr_check.options[jj].value<=20))
    hr_check.options[jj].text=hr_check.options[jj].value+'th';
  else if ((hr_check.options[jj].value==1) || (hr_check.options[jj].value==21))
    hr_check.options[jj].text=hr_check.options[jj].value+'st';
  else if ((hr_check.options[jj].value==2) || (hr_check.options[jj].value==22))
    hr_check.options[jj].text=hr_check.options[jj].value+'nd';
  else if ((hr_check.options[jj].value==3) || (hr_check.options[jj].value==23))
    hr_check.options[jj].text=hr_check.options[jj].value+'rd';  
}
document.getElementById("every_hr").innerText='Every';
var min_check=document.getElementById("min");
for (var jj=0;jj<min_check.length;jj++)
{
  if (min_check.options[jj].value==0)
  min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=4) && (min_check.options[jj].value<=20))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=24) && (min_check.options[jj].value<=30))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=34) && (min_check.options[jj].value<=40))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=44) && (min_check.options[jj].value<=49))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=54) && (min_check.options[jj].value<=59))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value==1) || (min_check.options[jj].value==21) || (min_check.options[jj].value==31) || (min_check.options[jj].value==41) || (min_check.options[jj].value==51))
    min_check.options[jj].text=min_check.options[jj].value+'st';
  else if ((min_check.options[jj].value==2) || (min_check.options[jj].value==22) || (min_check.options[jj].value==32) || (min_check.options[jj].value==42) || (min_check.options[jj].value==52))
    min_check.options[jj].text=min_check.options[jj].value+'nd';
  else if ((min_check.options[jj].value==3) || (min_check.options[jj].value==23) || (min_check.options[jj].value==33) || (min_check.options[jj].value==43) || (min_check.options[jj].value==53))
    min_check.options[jj].text=min_check.options[jj].value+'rd';  }
document.getElementById("every_min").innerText='Every';

var sec_check=document.getElementById("sec");
for (var jj=0;jj<sec_check.length;jj++)
{
  if (sec_check.options[jj].value==0)
  sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=4) && (sec_check.options[jj].value<=20))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=24) && (sec_check.options[jj].value<=30))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=34) && (sec_check.options[jj].value<=40))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=44) && (sec_check.options[jj].value<=49))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=54) && (sec_check.options[jj].value<=59))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value==1) || (sec_check.options[jj].value==21) || (sec_check.options[jj].value==31) || (sec_check.options[jj].value==41) || (sec_check.options[jj].value==51))
    sec_check.options[jj].text=sec_check.options[jj].value+'st';
  else if ((sec_check.options[jj].value==2) || (sec_check.options[jj].value==22) || (sec_check.options[jj].value==32) || (sec_check.options[jj].value==42) || (sec_check.options[jj].value==52))
    sec_check.options[jj].text=sec_check.options[jj].value+'nd';
  else if ((sec_check.options[jj].value==3) || (sec_check.options[jj].value==23) || (sec_check.options[jj].value==33) || (sec_check.options[jj].value==43) || (sec_check.options[jj].value==53))
    sec_check.options[jj].text=sec_check.options[jj].value+'rd';  }
document.getElementById("every_sec").innerText='Every';


   $("#editdialog").modal('show');
//$("#editdialog").dialog({ width:700,height:500,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Edit Publish Message Details" }).dialog("open");
}
else if (s=="sub")
{
   document.getElementById("sm").style.display="block";
   
document.getElementById("tm").style.display="block";
document.getElementById("pub_lbl").style.width="145px";
    document.getElementById("pub_lbl").style.visibility="hidden";
    if (document.getElementById(s+"r"+rownum+"c4").value=='Every')
      document.getElementById("hr").value='*';
    else
      document.getElementById("hr").value=document.getElementById(s+"r"+rownum+"c4").value;
    if (document.getElementById(s+"r"+rownum+"c5").value=='Every')
      document.getElementById("min").value='*';
    else
      document.getElementById("min").value=document.getElementById(s+"r"+rownum+"c5").value;
    if (document.getElementById(s+"r"+rownum+"c6").value=='Every')
      document.getElementById("sec").value='*';
    else
      document.getElementById("sec").value=document.getElementById(s+"r"+rownum+"c6").value;
    if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
{
  document.getElementById("hr").value='0';
  document.getElementById("min").value='0';
  document.getElementById("sec").value='0';
}

   var hr_value=document.getElementById("hr").value;
var min_value=document.getElementById("min").value;
var sec_value=document.getElementById("sec").value;
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.width="410px";
   document.getElementById("pt").style.marginBottom="10px";
   document.getElementById("pubt_txt").style.width="245px";
   document.getElementById("pubt_txt").style.float="right";
   document.getElementById("pq").style.width="390px";
   document.getElementById("pqos_lbl").style.paddingTop="0px";
   document.getElementById("pqos_lbl").style.width="140px";
   document.getElementById("pqos_lbl").style.float="left";
   document.getElementById("prtn_lbl").style.paddingTop="10px";
   document.getElementById("prtn_lbl").style.width="65px";
   document.getElementById("prtn_lbl").style.float="left";
    document.getElementById("prtn_lbl").style.paddingLeft="10px"; 
   document.getElementById("pqos_txt").style.width="245px";
   document.getElementById("pqos_txt").style.float="right";
   document.getElementById("prtn_txt").style.display="none";
   document.getElementById("prtn_lbl").style.display="none";
   document.getElementById("plaintext_div").style.display="none";
      cbtn.style.top="220px";
      cbtn.style.left="250px";
   sbtn.style.top="220px";
   sbtn.style.left="180px";
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.width="410px";
   document.getElementById("pt").style.marginBottom="10px";
   document.getElementById("pubt_txt").style.display="block";
   document.getElementById("pubt_txt").style.width="245px";
   document.getElementById("pubt_txt").style.float="right";
   document.getElementById("sm").style.display="block";
   document.getElementById("sm").style.width="390px";
   document.getElementById("sub_txt").style.display="block";
   document.getElementById("sub_txt").style.width="245px";
   document.getElementById("sub_txt").style.float="right";
   document.getElementById("prtn_txt").style.display="none";
   document.getElementById("prtn_lbl").style.display="none";
   document.getElementById("plaintext_div").style.display="none";
   document.getElementById("sub_txt").value=0;
   document.getElementById("pqos_txt").style.width="245px;"
   document.getElementById("tm").style.display="block";
   document.getElementById("tm").style.width="400px";
   document.getElementById("hr").style.width="48px";
   document.getElementById("min").style.width="48px";
   document.getElementById("sec").style.width="48px";
   document.getElementById("lbl1").style.display="block";
   document.getElementById("lbl1").style.width="32px";
   document.getElementById("lbl1").style.paddingLeft="10px";
   document.getElementById("lbl1").style.float="left";
   document.getElementById("lbl2").style.display="block";
   document.getElementById("lbl2").style.width="35px";
   document.getElementById("lbl2").style.paddingLeft="10px";
   document.getElementById("lbl2").style.paddingRight="5px";
   document.getElementById("lbl2").style.float="left";
   document.getElementById("lbl3").style.display="block";
   document.getElementById("lbl3").style.width="32px";
   document.getElementById("lbl3").style.paddingLeft="10px";
   document.getElementById("lbl3").style.float="left";
   document.getElementById("ptype").style.display="none";
     $("#pt").appendTo("#pubd2"); 
     $("#sm").appendTo("#pubd2"); 
     $("#tm").appendTo("#pubd2"); 
     $("#pq").appendTo("#pubd2"); 
     if ((hr_value=="-1") && (min_value=="-1") && (sec_value=="-1"))
{
  document.getElementById("sub_txt").value="0";
  document.getElementById("tm").style.display="none";
}
else
{
  document.getElementById("sub_txt").value="1";
  document.getElementById("tm").style.display="block";
}
   document.getElementById("plaintext_div").style.display="none";
   document.getElementById("sysvar_div").style.display="none";
   document.getElementById("rnd_div").style.display="none";
   document.getElementById("range_div").style.display="none";

   cbtn.style.left="160px";
   sbtn.style.left="250px";

     //document.getElementById("tm").style.display="none";
  document.getElementById("add_json").style.display="none";
  /*$('#editdialog').modal({
  backdrop: 'static'
});*/
document.getElementById("pub_heading").innerText="Edit Subscription Details";
document.getElementById("dialog_size").style.height="420px";
document.getElementById("dialog_size").style.width="450px";
if(document.getElementById("list_tag").innerText=='Templates')
{
  document.getElementById("pub_heading").innerText="Edit Subscription Template";
    document.getElementById("lbl3").style.display="none";
  document.getElementById("sec").style.display="none";
  document.getElementById("sm1").style.display="none";
        document.getElementById("pt").style.width="410px";


    document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";


}
else
{
  document.getElementById("pub_heading").innerText="Edit Subscription Details";
  document.getElementById("sm1").style.display="none";
    document.getElementById("lbl3").style.display="block";
  document.getElementById("sec").style.display="block";
        document.getElementById("pt").style.width="390px";

    document.getElementById("pubt_txt").placeholder="Enter Topic";
  document.getElementById('pqnmark').style.display="none";


} 
if(document.getElementById("list_tag").innerText=='Templates')
{
 document.getElementById("hr").style.width="95px";
  document.getElementById("lbl1").style.width="22px";
  document.getElementById("lbl1").style.paddingLeft="5px";
  document.getElementById("min").style.width="95px";
  document.getElementById("lbl2").style.width="35px";
  document.getElementById("lbl2").style.paddingLeft="5px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("sec").style.width="95px";
  document.getElementById("lbl3").style.width="22px";
  document.getElementById("lbl3").style.paddingLeft="5px";
}
else
{
 document.getElementById("hr").style.width="55px";
  document.getElementById("lbl1").style.width="22px";
  document.getElementById("lbl1").style.paddingLeft="5px";
  document.getElementById("min").style.width="55px";
  document.getElementById("lbl2").style.width="35px";
  document.getElementById("lbl2").style.paddingLeft="5px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("sec").style.width="55px";
  document.getElementById("lbl3").style.width="22px";
  document.getElementById("lbl3").style.paddingLeft="5px";
}

if (document.getElementById(s+"r"+rownum+"c4").value=='On Start')
{
  document.getElementById("sub_txt").value="0";
  document.getElementById("tm").style.display="none";
}
else
{
  document.getElementById("sub_txt").value="1";
  document.getElementById("tm").style.display="block"; 
  document.getElementById("every_hr").style.display="none";
document.getElementById("every_sec").style.display="none";
document.getElementById("every_min").style.display="none";

}
var hr_check=document.getElementById("hr");
for (var jj=0;jj<hr_check.length;jj++)
{
  hr_check.options[jj].text=hr_check.options[jj].value;
}
document.getElementById("every_hr").innerText='Every';
var min_check=document.getElementById("min");
for (var jj=0;jj<min_check.length;jj++)
{
  min_check.options[jj].text=min_check.options[jj].value;
}
document.getElementById("every_min").innerText='Every';

var sec_check=document.getElementById("sec");
for (var jj=0;jj<sec_check.length;jj++)
{
  sec_check.options[jj].text=sec_check.options[jj].value;
}
document.getElementById("every_sec").innerText='Every';

  $("#editdialog").modal('show');

//$("#editdialog").dialog({ width:480,height:320,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Edit Subscription Details" }).dialog("open");
}
else
{
   document.getElementById("tm").style.display="none";
   document.getElementById("sm").style.display="none";
   cbtn.style.top="320px";
   sbtn.style.top="320px";
   cbtn.style.left="180px";
   sbtn.style.left="310px";
   document.getElementById("sm").style.display="none";
   document.getElementById("tm").style.display="none";
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.width="410px";
   document.getElementById("pt").style.marginBottom="10px";
   document.getElementById("pubt_txt").style.width="245px";
   document.getElementById("pubt_txt").style.float="right";
   document.getElementById("pq").style.width="390px";
   document.getElementById("pqos_lbl").style.paddingTop="0px";
   document.getElementById("pqos_lbl").style.width="140px";
   document.getElementById("pqos_lbl").style.float="left";
   document.getElementById("prtn_lbl").style.display="block";   
   document.getElementById("prtn_lbl").style.paddingTop="10px";
   document.getElementById("prtn_lbl").style.width="65px";
   document.getElementById("prtn_lbl").style.float="left"; 
   document.getElementById("prtn_lbl").style.paddingLeft="10px";   
   document.getElementById("pqos_txt").style.width="245px";
   document.getElementById("pqos_txt").style.float="right";

   document.getElementById("prtn_txt").style.marginTop="3px";
   document.getElementById("prtn_txt").style.width="245px";
   document.getElementById("prtn_txt").style.float="right";
     document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="0px";
  document.getElementById("prtn_lbl").style.width="290px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("prtn_txt").style.marginTop="-30px";
  document.getElementById("prtn_txt").style.float="right";
document.getElementById("plaintext_div").style.display="none";
     document.getElementById("pm").style.display="block";
   document.getElementById("pm").style.width="390px";
   document.getElementById("pm").style.paddingTop="75px";
   document.getElementById("pubm_txt").style.width="245px";
   document.getElementById("pubm_txt").style.float="right";
 
   document.getElementById("rt").style.width="390px";
   document.getElementById("rest_txt").style.width="245px";
   document.getElementById("rest_txt").style.float="right";
   document.getElementById("rm").style.width="390px";
   document.getElementById("resm_txt").style.width="245px";
   document.getElementById("resm_txt").style.float="right";
      document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="0px";
  document.getElementById("prtn_lbl").style.width="290px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("prtn_txt").style.marginTop="-30px";
  document.getElementById("prtn_txt").style.float="right";

  
     $("#pm").appendTo("#pubd2"); 
  $("#rt").appendTo("#pubd2");
  $("#rm").appendTo("#pubd2");
  document.getElementById("add_json").style.display="none";
  document.getElementById("pubm_txt").disabled=false;
 /* $('#editdialog').modal({
  backdrop: 'static'
});*/
document.getElementById("pub_heading").innerText="Edit Behavior";
document.getElementById("dialog_size").style.height="500px";
document.getElementById("dialog_size").style.width="500px";
document.getElementById("sm1").style.display="none";
if (document.getElementById("list_tag").innerText=='Templates')
{
          document.getElementById("pt").style.width="410px";

    document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";
}
else
{
          document.getElementById("pt").style.width="390px";

    document.getElementById("pubt_txt").placeholder="Enter Topic";
  document.getElementById('pqnmark').style.display="none";

}


  $("#editdialog").modal('show');
//$("#editdialog").dialog({ width:500,height:400,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Edit Request Response Details" }).dialog("open");

//$("#editdialog").dialog({ width:480,height:390,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Edit Request Response Details" }).dialog("open");
}

//$( "#editdialog").dialog("open");
}



function fndrop(id1)
{
var btnid=id1;
var ind1=btnid.indexOf('drop');
var rownum=btnid.slice(3,ind1);
var d_id=btnid.slice(ind1+4);
id=d_id;
var dropflag=btnid.indexOf('pub');
var dropsub=btnid.indexOf('sub');
var sdrop;
if(dropflag != -1)
{
sdrop='pub';
document.getElementById("choice").value='droppmsg';
}
else if (dropsub != -1)
{
sdrop='sub';
document.getElementById("choice").value='dropsmsg';
}
else
{
sdrop='res';
document.getElementById("choice").value='droprmsg';
}
document.getElementById("d_name_txt").style.position="relative";
document.getElementById("d_desc_txt").value="";
document.getElementById("wtopic_txt").value="";
document.getElementById("wmsg_txt").value="";
document.getElementById("wqos_txt").value="0";
document.getElementById("wrtn_txt").value="0";
$("#d_name_txt").appendTo("#dn");
//$("#dn").appendTo("#myform");
$("#d_desc_txt").appendTo("#dd");
//$("#dd").appendTo("#myform");
$("#wtopic_txt").appendTo("#wt");
//$("#wt").appendTo("#myform");
$("#wmsg_txt").appendTo("#wm");
//$("#wm").appendTo("#myform");
$("#wqos_txt").appendTo("#wq");
//$("#wq").appendTo("#myform");
$("#wrtn_txt").appendTo("#wr");
//$("#wr").appendTo("#myform");

document.getElementById("paid_txt").value=rownum;
document.getElementById("pid_txt").value=d_id;
document.getElementById("pubt_txt").value=document.getElementById(sdrop+"r"+rownum+"c0").value;
document.getElementById("pubm_txt").value=document.getElementById(sdrop+"r"+rownum+"c1").value;
var qosstr=document.getElementById(sdrop+"r"+rownum+"c2").value;
var nqos=qosstr.search("0");
var qosvalue;
if (nqos>-1) qosvalue="0";
else
{
  var mqos=qosstr.search("1");
  if (mqos > -1) qosvalue="1";
  else qosvalue="2";
}
document.getElementById("pqos_txt").value=qosvalue;
var rtnstr=document.getElementById(sdrop+"r"+rownum+"c3").value;
var nrtn=rtnstr.search("0");
var rtnvalue;
if (nrtn>-1) rtnvalue="0";
else  rtnvalue="1";
document.getElementById("prtn_txt").value=rtnvalue;
$("#paid_txt").appendTo("#pa");
$("#pa").appendTo("#myform");
$("#pid_txt").appendTo("#pi");
$("#pi").appendTo("#myform");
$("#pubt_txt").appendTo("#pt");
$("#pt").appendTo("#myform");
$("#pubm_txt").appendTo("#pm");
$("#pm").appendTo("#myform");
$("#pqos_txt").appendTo("#pq");
$("#pq").appendTo("#myform");
$("#prtn_txt").appendTo("#pr");
$("#pr").appendTo("#myform");
$("#rest_txt").appendTo("#rt");
$("#rt").appendTo("#myform");
$("#resm_txt").appendTo("#rm");
$("#rm").appendTo("#myform");

var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {

    }
    
});
$("#paid_txt").appendTo("#pa");
$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pr");
disp_detail(id);
}


function fnpublish(id1)
{

var btnid=id1;
var ind1=btnid.indexOf('msgs');
var rownum=btnid.slice(3,ind1);
var d_id=btnid.slice(ind1+4);
id=d_id;
var dropflag=btnid.indexOf('pub');
var dropsub=btnid.indexOf('sub');
var sdrop;
if(dropflag != -1)
{
sdrop='pub';
document.getElementById("choice").value='publishmsg';
}
else if (dropsub != -1)
{
sdrop='sub';
document.getElementById("choice").value='subscribemsg';
}
else
{
sdrop='res';
document.getElementById("choice").value='responsemsg';
}
document.getElementById("d1").style.display="none";

document.getElementById("d_name_txt").style.position="relative";
document.getElementById("d_desc_txt").value="";
document.getElementById("wtopic_txt").value="";
document.getElementById("wmsg_txt").value="";
document.getElementById("wqos_txt").value="0";
document.getElementById("wrtn_txt").value="0";


$("#d_name_txt").appendTo("#dn");
$("#d_desc_txt").appendTo("#dd");
$("#wtopic_txt").appendTo("#wt");
$("#wmsg_txt").appendTo("#wm");
$("#wqos_txt").appendTo("#wq");
$("#wrtn_txt").appendTo("#wr");
document.getElementById("paid_txt").value=rownum;
document.getElementById("pid_txt").value=d_id;
document.getElementById("pubt_txt").value=document.getElementById(sdrop+"r"+rownum+"c0").value;
document.getElementById("pubm_txt").value=document.getElementById(sdrop+"r"+rownum+"c1").value;
var qosstr=document.getElementById(sdrop+"r"+rownum+"c2").value;
var nqos=qosstr.search("0");
var qosvalue;
if (nqos>-1) qosvalue="0";
else
{
  var mqos=qosstr.search("1");
  if (mqos > -1) qosvalue="1";
  else qosvalue="2";
}
document.getElementById("pqos_txt").value=qosvalue;
var rtnstr=document.getElementById(sdrop+"r"+rownum+"c3").value;
var nrtn=rtnstr.search("0");
var rtnvalue;
if (nrtn>-1) rtnvalue="0";
else  rtnvalue="1";
document.getElementById("prtn_txt").value=rtnvalue;
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
    async:false,
     success:function () {


    }
    
});
disp_detail(id);
}

function fntexttype(val)
{
  if (val=="plaintext")
  {
    document.getElementById("plaintext_div").style.display="block";
    document.getElementById("sysvar_div").style.display="none"; 
    document.getElementById("range_div").style.display="none";
    document.getElementById("rnd_div").style.display="none";  
    $("#plaintext_div").appendTo("#pubd2");
  }
  else if (val=="systemvariable")
  {
    document.getElementById("sysvar_div").style.display="block";
    document.getElementById("plaintext_div").style.display="none";
    document.getElementById("range_div").style.display="none";
    document.getElementById("rnd_div").style.display="none";
    $("#sysvar_div").appendTo("#pubd2");
  }
  else if (val=="random")
  {
    document.getElementById("range_div").style.display="none";
    document.getElementById("rnd_div").style.display="block";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("plaintext_div").style.display="none";   
    $("#rnd_div").appendTo("#pubd2"); 
  }
  else if (val=="range")
  {
    document.getElementById("range_div").style.display="block";
    document.getElementById("rnd_div").style.display="none";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("plaintext_div").style.display="none";    
    $("#range_div").appendTo("#pubd2");
  }
}
function fnjsontexttype(val)
{
  var acc_type=val.indexOf("plaintext");
  var par_type="plaintext";
  if (acc_type>-1)
    par_type="plaintext";
  else 
  {
    acc_type=val.indexOf("system_var");
    if (acc_type>-1)
      par_type="system_var";
    else
    {
      acc_type=val.indexOf("pipe_txt");
      if (acc_type>-1)
        par_type="pipe_txt";
      else
        par_type="range";
    }
  }

  var acc_parameter_no=val.substring(par_type.length,val.length);
  if (par_type=="plaintext")
  {
    document.getElementById("plaintext"+acc_parameter_no).style.display="block";
    document.getElementById("system_var"+acc_parameter_no).style.display="none"; 
    document.getElementById("start_value"+acc_parameter_no).style.display="none";
    document.getElementById("end_value"+acc_parameter_no).style.display="none";
    document.getElementById("lblto"+acc_parameter_no).style.display="none";
    document.getElementById("pipe_txt"+acc_parameter_no).style.display="none";  
    document.getElementById("pipe_txt"+acc_parameter_no).style.display="none";

    $("#plaintext_div").appendTo("#pubd2");
  }
  else if (par_type=="system_var")
  {
    document.getElementById("system_var"+acc_parameter_no).style.display="block";
    document.getElementById("plaintext"+acc_parameter_no).style.display="none";
    document.getElementById("start_value"+acc_parameter_no).style.display="none";
    document.getElementById("end_value"+acc_parameter_no).style.display="none";
    document.getElementById("lblto"+acc_parameter_no).style.display="none";
    document.getElementById("pipe_txt"+acc_parameter_no).style.display="none";

    $("#sysvar_div").appendTo("#pubd2");
  }
  else if (par_type=="pipe_txt")
  {
    document.getElementById("start_value"+acc_parameter_no).style.display="none";
    document.getElementById("end_value"+acc_parameter_no).style.display="none";
    document.getElementById("lblto"+acc_parameter_no).style.display="none";
    document.getElementById("pipe_txt"+acc_parameter_no).style.display="block";
    document.getElementById("system_var"+acc_parameter_no).style.display="none";
    document.getElementById("plaintext"+acc_parameter_no).style.display="none";   
    $("#rnd_div").appendTo("#pubd2"); 
  }
  else if (par_type=="range")
  {
    document.getElementById("start_value"+acc_parameter_no).style.display="block";
    document.getElementById("end_value"+acc_parameter_no).style.display="block";
    document.getElementById("lblto"+acc_parameter_no).style.display="block";
    document.getElementById("pipe_txt"+acc_parameter_no).style.display="none";
    document.getElementById("system_var"+acc_parameter_no).style.display="none";
    document.getElementById("plaintext"+acc_parameter_no).style.display="none";    
    $("#range_div").appendTo("#pubd2");
  }
}

function fnmsgtype(chkid)
{
  var current_chk=document.getElementById(chkid).checked;
  var other="";
  if (chkid=="text_check")
    other="json_check";
  else
    other="text_check";
  if (current_chk==false)
    document.getElementById(other).checked=true;
  else
    document.getElementById(other).checked=false;
  var text_chk=document.getElementById("text_check").checked;
  var json_chk=document.getElementById("json_check").checked;
  if (text_chk==true)
  {
    val="text";
    document.getElementById("add_json").style.display="none";
    document.getElementById("pub_cancel").style.top=document.getElementById("pub_update").style.top="380px";
    document.getElementById("pub_cancel").style.left="180px";
    document.getElementById("pub_update").style.left="350px";
        json_msg=false;
  }
  else
  {
    val="json";
      if ($('#json_table tr').length==1)
    document.getElementById("add_json").style.display="block";
    else
          document.getElementById("add_json").style.display="none";


    //document.getElementById("add_json").style.display="block";
    if (s=="addpub")
    document.getElementById("add_json").style.top="203px";
    document.getElementById("pub_cancel").style.top=document.getElementById("pub_update").style.top="375px";
      var cbtn=document.getElementById("pub_cancel");
  var sbtn=document.getElementById("pub_update");
  cbtn.style.top=pub_initial_top+"px";
  sbtn.style.top=pub_initial_top+"px";
/*
    if (json_parameter_count<=1)
    {
      document.getElementById("pub_cancel").style.left="550px";
      document.getElementById("pub_update").style.left="480px";
    }*/
    //document.getElementById("pub_update").style.position="fixed";
    json_msg=true;

  }
  if (val=="text")
  {
    document.getElementById("rndrange_div").style.display="block";
    document.getElementById("plaintext_div").style.display="block";
    document.getElementById("rnd_div").style.display="none";
    document.getElementById("json_div").style.display="none";
        json_msg=false;
$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#pq").appendTo("#pubd2");

$("#ptype").appendTo("#pubd2");

$("#rndrange_div").appendTo("#pubd2");
$("#plaintext_div").appendTo("#pubd2");
$("#json_div").appendTo("#pubd2");
//$("#pr").appendTo("#pubd2");
//$("#pm").appendTo("#pubd2");
$("#par_div").appendTo("#pubd2");
$("#par_txt_div").appendTo("#pubd2");


  }
  else
  {
    document.getElementById("rndrange_div").style.display="none";
    document.getElementById("plaintext_div").style.display="none";
    document.getElementById("sysvar_div").style.display="none";
    document.getElementById("rnd_div").style.display="none";
    document.getElementById("range_div").style.display="none";
    document.getElementById("json_div").style.display="block";
    //document.getElementById("rnd_div").style.display="none";
    //document.getElementById("rndrange_div").style.display="none";
    json_msg=true;
$("#ptype").appendTo("#pubd2");

$("#json_div").appendTo("#pubd2");

    //document.getElementById("par_div").style.display="block";
    //document.getElementById("par_txt_div").style.display="block";
  }
}
function fnjsonmsgupdate()
{
  if ($('#json_table tr').length==1)
  {
    no_parameter=true;
    alert("No parameter is specified. Add a parameter.")
    document.getElementById("pubm_txt").value="";
    document.getElementById("json_pubm_txt").value="";
    document.getElementById("message_type").value="";
  }
  else
  {
    var empty=false;
    var mm="{";
    var dbmm="{";
    for (var p=0;p<json_parameter_count;p++)
    {
      if (json_row_number[p]>0)
      {
      var pm=document.getElementById("parameter"+p).value;
      if (pm.trim()=="")
      {
        alert("Parameter is empty");
        empty=true;
        break;
      }
      mm=mm+'"'+pm+'":';
      dbmm=dbmm+'"'+pm+'":';
      var vtype=document.getElementById("json_text_type"+p).value;
      var vtext="";
      var mtype="plaintext";
      if (vtype.indexOf("plaintext")>-1)
      {
        vtext=document.getElementById("plaintext"+p).value;
        mtype="plaintext";
      }
      else if (vtype.indexOf("system_var")>-1)
      {
        vtext=document.getElementById("system_var"+p).value;
        mtype="systemvariable";
      }
      else if (vtype.indexOf("pipe_txt")>-1)
      {
        vtext=document.getElementById("pipe_txt"+p).value;
        mtype="random";
      }
      else
      {
        st_value=parseInt(document.getElementById("start_value"+p).value);
        e_value=parseInt(document.getElementById("end_value"+p).value);
        if (st_value>e_value)
        {
          improper_range=true;
          break;
        }
        vtext=document.getElementById("start_value"+p).value+" - "+document.getElementById("end_value"+p).value;
        mtype="range";
      }
      if (vtext.length==0)
      {
        empty=true;
        break;
      }
      if (p==json_parameter_count-1)
      {
        mm+='"'+vtext+'"}';
        dbmm+='{"type":"'+mtype+'","msg":"'+vtext+'"}}';
      }
      else
      {
        mm+='"'+vtext+'"},';
        dbmm+='{"type":"'+mtype+'","msg":"'+vtext+'"},';
      }
      }
    }
    if ((empty==true) || (improper_range==true))
    {
      if (improper_range==true)
        alert("Improper Range");
      document.getElementById("pubm_txt").value="";
      document.getElementById("json_pubm_txt").value="";
      document.getElementById("message_type").value="";

    }
    else
    {
      if (mm.substring(mm.length-1)==",")
      {
        document.getElementById("pubm_txt").value=mm.substring(0,mm.length-1)+"}";
        document.getElementById("json_pubm_txt").value=dbmm.substring(0,mm.length-1)+"}";
        document.getElementById("message_type").value=5+"";

      }
      else
      {
        document.getElementById("pubm_txt").value=mm;
        document.getElementById("json_pubm_txt").value=dbmm;
        document.getElementById("message_type").value=5+"";
      }
    }
  }
}
function fnrulecancel()
{
$("#add_devdialog").dialog("close");

}
function fnmsgcancel()
{
}
$("#json_table").delegate("tr", "click", function(e) {
    //alert($(e.currentTarget).index() + 1);
});
function fnjsondelete(del_id)
{
  var row=parseInt(del_id.substring(3));
  var jtable=document.getElementById("json_table");
    var count = $('#json_table tr').length;

  jtable.deleteRow(json_row_number[row]);
  json_row_number[row]=-1;
  for (var vj=row+1;vj<json_parameter_count;vj++)
    json_row_number[vj]--;
  add_json_initial_top-=30;
  var add_visible=false;
  for (var vj=0;vj<json_parameter_count;vj++)
  {
    if (document.getElementById("add"+vj))
    {
      if ((document.getElementById("add"+vj)).style.display=="block")
      {
        add_visible=true;
        break;
      }
    }
  }
  if (add_visible==false)
  {
    for(var iv=last_added;iv>=0;iv--)
    {
      if (document.getElementById("add"+iv))
      {
        document.getElementById("add"+iv).style.display="block";
        last_added=iv;
        break;
      }
    }
  }



  //json_parameter_count--;
  //document.getElementById("add_json").style.top=add_json_initial_top+"px";
  pub_initial_top-=35;
  var cbtn=document.getElementById("pub_cancel");
  var sbtn=document.getElementById("pub_update");
  cbtn.style.top=pub_initial_top+"px";
  sbtn.style.top=pub_initial_top+"px";
  if ($('#json_table tr').length==1)
    document.getElementById("add_json").style.display="block";
}
function fnaddjson(tid)
{
  document.getElementById("add_json").style.display="none";
  var json_table=document.getElementById("json_table");
  var count = $('#json_table tr').length;
  if (tid!="-1")
  {
    if (document.getElementById(tid))
    document.getElementById(tid).style.display="none";
  }
  
  var json_row=json_table.insertRow(count);
  var json_par_column=json_row.insertCell(0);
  json_par_column.innerHTML="<input type=textbox id=parameter"+json_parameter_count+" name=parameter"+json_parameter_count+" class=form-control style='display:block;width:125px;margin-bottom:5px' placeholder='Key'>";
  var json_type_column=json_row.insertCell(1);
  json_type_column.innerHTML="";
  var s='<select class=form-control id=json_text_type'+json_parameter_count+' name=json_text_type'+json_parameter_count+' style=width:145px;padding-left:2px;margin-bottom:5px onchange="fnjsontexttype(this.value);">\
          <option value=plaintext'+json_parameter_count+' selected>Constant</option>\
          <option value=system_var'+json_parameter_count+'>System Variables</option>\
          <option value=pipe_txt'+json_parameter_count+'>RANDOM</option>\
          <option value=range'+json_parameter_count+'>RANGE</option>\
          </select>';
  json_type_column.innerHTML=s;      
  var json_value_column=json_row.insertCell(2);
  json_value_column.innerHTML="<input type=textbox id=plaintext"+json_parameter_count+" name=plaintext"+json_parameter_count+" class=form-control placeholder='Constant' style=display:block;width:185px;margin-bottom:5px>";
  json_value_column.innerHTML+='<select class="form-control" id=system_var'+json_parameter_count+' name=system_var'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px">\
          <option value="$Client_uptime">$Client_uptime</option>\
          <option value="$Current_time">$Current_time</option>\
          <option value="$Client_ID">$Client_ID</option>\
          </select>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=pipe_txt'+json_parameter_count+' name=pipe_txt'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>';
  json_value_column.innerHTML+='<input type=number class="form-control" max=100 min=-100 id=start_value'+json_parameter_count+' name=start_value'+json_parameter_count+' style="width:79px;margin-bottom:5px;padding-left:5px;float:left;display:none" value=-100 tabindex=22></input>\
          <label for="lbl23" id=lblto'+json_parameter_count+' name=lblto'+json_parameter_count+' class="form-control" style="text-align:center;margin-bottom:5px;width:28px;float:left;display:none;border:none;" >-</label>\
          <input type=number max=100 class="form-control" min=-100 id=end_value'+json_parameter_count+' name=end_value'+json_parameter_count+' style="margin-bottom:5px;padding-left:5px;padding-right:5px;width:79px;float:left;display:none" value=100></input>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=type_txt'+json_parameter_count+' name=type_txt'+json_parameter_count+' style="display:none;width:260px;float:right;"></input>\
          ';

  var json_action_column=json_row.insertCell(3);
  json_action_column.style.textAlign='center';
  json_action_column.innerHTML="<img src='/images/dbdrop.png' id=del"+json_parameter_count+" name=del"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnjsondelete(this.id)'>";
  var json_action_column=json_row.insertCell(4);
  json_action_column.innerHTML="<img src='/images/plus.png' id=add"+json_parameter_count+" name=add"+json_parameter_count+" style='display:block;width:20px;height:20px;cursor:pointer;' onclick='fnaddjson(this.id)'>";

  json_row_number[json_parameter_count]=count;
  if (document.getElementById("add"+(json_parameter_count-1)))
  document.getElementById("add"+(json_parameter_count-1)).style.display="none";
  last_added=json_parameter_count;
  json_parameter_count++;
add_json_initial_top+=30;
  //document.getElementById("add_json").style.top=add_json_initial_top+"px";
  pub_initial_top+=35;
  var cbtn=document.getElementById("pub_cancel");
  var sbtn=document.getElementById("pub_update");
  cbtn.style.top=pub_initial_top+"px";
  sbtn.style.top=pub_initial_top+"px";

}
function fnaddpub(id1)
{
if ((id1=="pubimg") || (id1=="template_pubimg"))
{
s="addpub";
     var json_table=document.getElementById("json_table");
   while(json_table.rows[1]) json_table.deleteRow(1);
   json_parameter_count=0;
  var count = $('#json_table tr').length;
  var json_row=json_table.insertRow(count);
  var json_par_column=json_row.insertCell(0);
  json_par_column.innerHTML="<input type=textbox id=parameter"+json_parameter_count+" name=parameter"+json_parameter_count+" class=form-control style='display:block;width:125px;margin-bottom:5px' placeholder='Key'>";
  var json_type_column=json_row.insertCell(1);
  json_type_column.innerHTML="";
  var sl='<select class=form-control id=json_text_type'+json_parameter_count+' name=json_text_type'+json_parameter_count+' style=width:145px;padding-left:2px;margin-bottom:5px onchange="fnjsontexttype(this.value);">\
          <option value=plaintext'+json_parameter_count+' selected>Constant</option>\
          <option value=system_var'+json_parameter_count+'>System Variables</option>\
          <option value=pipe_txt'+json_parameter_count+'>RANDOM</option>\
          <option value=range'+json_parameter_count+'>RANGE</option>\
          </select>';
  json_type_column.innerHTML=sl;      
  var json_value_column=json_row.insertCell(2);
  json_value_column.innerHTML="<input type=textbox id=plaintext"+json_parameter_count+" name=plaintext"+json_parameter_count+" class=form-control placeholder='Constant' style=display:block;width:185px;margin-bottom:5px>";
  json_value_column.innerHTML+='<select class="form-control" id=system_var'+json_parameter_count+' name=system_var'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px">\
          <option value="$Client_uptime">$Client_uptime</option>\
          <option value="$Current_time">$Current_time</option>\
          <option value="$Client_ID">$Client_ID</option>\
          </select>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=pipe_txt'+json_parameter_count+' name=pipe_txt'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>';
  json_value_column.innerHTML+='<input type=number class="form-control" max=100 min=-100 id=start_value'+json_parameter_count+' name=start_value'+json_parameter_count+' style="margin-bottom:5px;width:79px;padding-left:5px;float:left;display:none" value=-100 tabindex=22></input>\
          <label for="lbl23" id=lblto'+json_parameter_count+' name=lblto'+json_parameter_count+' class="form-control" style="text-align:center;margin-bottom:5px;width:28px;float:left;display:none;border:none;" >-</label>\
          <input type=number max=100 class="form-control" min=-100 id=end_value'+json_parameter_count+' name=end_value'+json_parameter_count+' style="margin-bottom:5px;padding-left:5px;padding-right:5px;width:79px;float:left;display:none" value=100></input>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=type_txt'+json_parameter_count+' name=type_txt'+json_parameter_count+' style="margin-bottom:5px;display:none;width:260px;float:right;"></input>\
          ';

  var json_action_column=json_row.insertCell(3);
  json_action_column.style.textAlign='center';
  json_action_column.innerHTML="<img src='/images/dbdrop.png' id=del"+json_parameter_count+" name=del"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnjsondelete(this.id)'>";
  var json_action_column=json_row.insertCell(4);
  json_action_column.innerHTML="<img src='/images/plus.png' id=add"+json_parameter_count+" name=add"+json_parameter_count+" style='display:block;width:20px;height:20px;cursor:pointer;' onclick='fnaddjson(this.id)'>";
  last_added=json_parameter_count;
  json_row_number=new Array();
  json_row_number[json_parameter_count]=1;

json_parameter_count++;
  add_json_initial_top=220;
  pub_initial_top=380;
   document.getElementById("add_json").style.top=add_json_initial_top+"px";


 }
else if((id1=="subimg") || (id1=="template_subimg"))
{
s="addsub";
}
else if((id1=="resimg") || (id1=='template_resmsg'))
{
s="addres";
}
var cbtn=document.getElementById("pub_cancel");
var sbtn=document.getElementById("pub_update");


  document.getElementById("editdialog").style.display="block";
  //document.getElementById("pubd2").style.display="block";
  document.getElementById("editdialog").style.display="block";
  document.getElementById("paid_txt").value="";
  //document.getElementById("pubt_txt").value="";
  document.getElementById("pubm_txt").value="";
  document.getElementById("pa").style.display="none";
  document.getElementById("pi").style.display="none";
      document.getElementById("tm").style.display="block";
  document.getElementById("tm").style.width="400px";

  document.getElementById("pt").style.display="block";
    document.getElementById("sm").style.display="block";
  document.getElementById("sm").style.width="490px";
  document.getElementById("sub_txt").style.display="block";
  document.getElementById("hr").style.display="block";
  document.getElementById("min").style.display="block";
  document.getElementById("sec").style.display="block";
  //document.getElementById("hr").value=0;
  //document.getElementById("min").value=0;
  //document.getElementById("sec").value=0;
  document.getElementById("pq").style.display="block";
  document.getElementById("pq").style.width="490px";

  document.getElementById("pr").style.display="block";
  document.getElementById("paid_txt").style.display="block";
  document.getElementById("pid_txt").style.display="block";
  document.getElementById("pubt_txt").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("pubt_txt").style.width="360px";
  document.getElementById("pubm_txt").style.width="245px";
  document.getElementById("pubt_txt").style.float="right";
  document.getElementById("pubm_txt").style.float="right";
  document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="345px";
  document.getElementById("sub_txt").style.float="right";
  document.getElementById("lbl1").style.width="85px";
  document.getElementById("lbl1").style.paddingLeft="15px";
  document.getElementById("lbl1").style.float="left";
  document.getElementById("lbl1").style.display="block";
  document.getElementById("min").style.width="78px";
  document.getElementById("min").style.float="left";
  document.getElementById("min").style.display="block";
  document.getElementById("lbl2").style.paddingLeft="15px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("lbl2").style.width="38px";
  document.getElementById("lbl2").style.float="left";
  document.getElementById("lbl2").style.display="block";
  document.getElementById("sec").style.width="78px";
  document.getElementById("sec").style.float="left";
  document.getElementById("sec").style.display="block";
  document.getElementById("pub_lbl").style.visibility="visible";
  document.getElementById("pqos_txt").style.display="block";
  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pqos_txt").style.width="150px";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("pqos_txt").style.float="left";
  document.getElementById("prtn_txt").style.float="left";
  document.getElementById("pm").style.display="none";
  document.getElementById("range_div").style.display="none";
  document.getElementById("json_div").style.display="none";
  document.getElementById("text_check").selected=true;
  document.getElementById("json_check").selected=false;

  $("#pqos_txt").val("0");
  $("#prtn_txt").val("0");

$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#sub_txt").appendTo("#sm");
$("#hr").appendTo("#tm");
$("#lbl1").appendTo("#tm");
$("#min").appendTo("#tm");
$("#lbl2").appendTo("#tm");
$("#sec").appendTo("#tm");
$("#lbl3").appendTo("#tm");
$("#pqos_txt").appendTo("#pq");
$("#prtn_txt").appendTo("#pq");
if (s=='addres')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}

$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#pq").appendTo("#pubd2");
//$("#pr").appendTo("#pubd2");
//$("#pm").appendTo("#pubd2");
$("#sm").appendTo("#pubd2")
//$("#pubbtn").appendTo("#dialog_wrapper1");
if (s=='addres')
{
$("#rt").appendTo("#pubd2");
$("#rm").appendTo("#pubd2");

}
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");

  document.getElementById("pid_txt").value=document.getElementById("d_name").value;
  if (s=="addsub")
  {
    document.getElementById("pm").style.display="none";
    document.getElementById("pr").style.display="none";
    document.getElementById("sm").style.display="block";
      document.getElementById("sub_txt").style.display="block";
  document.getElementById("sub_txt").style.width="295px";
  document.getElementById("sub_txt").style.float="right";
document.getElementById("rndrange_div").style.display="none";
  }
  else
  {
    //document.getElementById("pm").style.display="block";
    document.getElementById("pm").style.display="none";
    document.getElementById("tm").style.display="block";
    document.getElementById("pr").style.display="block";
  document.getElementById("pubm_txt").style.display="block";
  document.getElementById("prtn_txt").style.display="block";
  document.getElementById("pm").style.width="490px";
    document.getElementById("tm").style.width="600px";
  document.getElementById("pt").style.width="520px";
  document.getElementById("pubm_txt").style.width="225px";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("pqos_txt").style.width="150px";
  document.getElementById("pubm_txt").style.float="left";
  document.getElementById("prtn_txt").style.float="left";
  document.getElementById("ptype").style.display="block";
  document.getElementById("rndrange_div").style.display="block";
  }
  if (s=="addres")
  {
      document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="0px";
  document.getElementById("prtn_lbl").style.width="290px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("prtn_txt").style.marginTop="-30px";
  document.getElementById("prtn_txt").style.float="right";

    document.getElementById("rest_txt").value="";
    document.getElementById("resm_txt").value=""; 
    document.getElementById("rt").style.display="block";
    document.getElementById("rm").style.display="block";
  document.getElementById("rest_txt").style.display="block";
  document.getElementById("resm_txt").style.display="block";

  document.getElementById("rm").style.width="490px";
  document.getElementById("rt").style.width="490px";
  document.getElementById("rest_txt").style.width="295px";
  document.getElementById("resm_txt").style.width="295px";
  document.getElementById("rest_txt").style.float="right";
  document.getElementById("resm_txt").style.float="right";


$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");


  }
  else
  {
    document.getElementById("rt").style.display="none";
    document.getElementById("rm").style.display="none";
    
  }
$("#paid_txt").appendTo("#pa");

$("#pid_txt").appendTo("#pi");
$("#pubt_txt").appendTo("#pt");
$("#pubm_txt").appendTo("#pm");
$("#pqos_lbl").appendTo("#pq");
$("#pqos_txt").appendTo("#pq");
$("#prtn_lbl").appendTo("#pq");
$("#prtn_txt").appendTo("#pq");
if (s=='addres')
{
$("#rest_txt").appendTo("#rt");
$("#resm_txt").appendTo("#rm");

}

$("#pa").appendTo("#pubd2");
$("#pi").appendTo("#pubd2");
$("#tm").appendTo("#pubd2");
$("#pt").appendTo("#pubd2");
$("#ptype").appendTo("#pubd2");

$("#sm").appendTo("#pubd2");
$("#pq").appendTo("#pubd2");
$("#rndrange_div").appendTo("#pubd2");
$("#plaintext_div").appendTo("#pubd2");
$("#json_div").appendTo("#pubd2");
//$("#pr").appendTo("#pubd2");
//$("#pm").appendTo("#pubd2");
$("#par_div").appendTo("#pubd2");
$("#par_txt_div").appendTo("#pubd2");


if (s=='addres')
{
  document.getElementById("pubm_txt").disabled=false;
  document.getElementById("pm").style.display="block";
  document.getElementById("ptype").style.display="none";
  document.getElementById("msg_type_div").style.display="none";
  document.getElementById("rndrange_div").style.display="none";
  document.getElementById("plaintext_div").style.display="none";
  document.getElementById("pt").style.width="410px";
  document.getElementById("pt").style.marginBottom="10px";
  document.getElementById("pubt_txt").style.width="245px";
  document.getElementById("pubt_txt").style.float="right";
  document.getElementById("pm").style.width="390px";
  document.getElementById("pubt_txt").style.width="245px";
  document.getElementById("pubt_txt").style.float="right";  
      document.getElementById("rt").style.display="block";
    document.getElementById("rm").style.display="block";

  $("#pm").appendTo("#pubd2"); 
  $("#rt").appendTo("#pubd2");
  $("#rm").appendTo("#pubd2");
}
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");

      id=document.getElementById("pid_txt").value;
document.getElementById("pid_txt").tabIndex=-1;
      //document.getElementById("dialog_wrapper1").style.display="block";
      //document.getElementById("pubd2").style.display="block";
  document.getElementById("pt").style.width="520px";
  document.getElementById("pm").style.width="590px";
  document.getElementById("pq").style.width="590px";
  document.getElementById("pr").style.width="590px";
  document.getElementById("tm").style.width="600px";
    document.getElementById("sm").style.width="590px";


 document.getElementById("editdialog").style.display="block";
if (s=="addpub")
{
  document.getElementById("text_check").checked=true;
  document.getElementById("json_check").checked=false;
  document.getElementById("text_check").disabled=false;
  document.getElementById("json_check").disabled=false;
    var msg_selected=document.getElementById("json_check").checked;
  if (msg_selected==true)
  {
 //  cbtn.style.top="440px";
 //  sbtn.style.top="440px";
   document.getElementById("tm").style.display="block";
   document.getElementById("tm").style.width="600px";
   document.getElementById("sm").style.display="none";
   document.getElementById("pipe_txt").value="";
   document.getElementById("sysvar_div").style.display="none";
   document.getElementById("rnd_div").style.display="none";
   document.getElementById("range_div").style.display="none";
   document.getElementById("rndrange_div").style.display="none";
   document.getElementById("json_text_type0").value="plaintext";
   document.getElementById("plaintext_div").style.display="none";
   var json_table=document.getElementById("json_table");
   while(json_table.rows[1]) json_table.deleteRow(1);
   json_parameter_count=0;
  var count = $('#json_table tr').length;
  var json_row=json_table.insertRow(count);
  var json_par_column=json_row.insertCell(0);
  json_par_column.innerHTML="<input type=textbox id=parameter"+json_parameter_count+" name=parameter"+json_parameter_count+" class=form-control style='display:block;width:125px;margin-bottom:5px' placeholder='Key'>";
  var json_type_column=json_row.insertCell(1);
  json_type_column.innerHTML="";
  var sl='<select class=form-control id=json_text_type'+json_parameter_count+' name=json_text_type'+json_parameter_count+' style=width:145px;padding-left:2px;margin-bottom:5px onchange="fnjsontexttype(this.value);">\
          <option value=plaintext'+json_parameter_count+' selected>Constant</option>\
          <option value=system_var'+json_parameter_count+'>System Variables</option>\
          <option value=pipe_txt'+json_parameter_count+'>RANDOM</option>\
          <option value=range'+json_parameter_count+'>RANGE</option>\
          </select>';
  json_type_column.innerHTML=sl;      
  var json_value_column=json_row.insertCell(2);
  json_value_column.innerHTML="<input type=textbox id=plaintext"+json_parameter_count+" name=plaintext"+json_parameter_count+" class=form-control placeholder='Constant' style=margin-bottom:5px;display:block;width:185px>";
  json_value_column.innerHTML+='<select class="form-control" id=system_var'+json_parameter_count+' name=system_var'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px">\
          <option value="$Client_uptime">$Client_uptime</option>\
          <option value="$Current_time">$Current_time</option>\
          <option value="$Client_ID">$Client_ID</option>\
          </select>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=pipe_txt'+json_parameter_count+' name=pipe_txt'+json_parameter_count+' style="margin-bottom:5px;display:none;width:185px" placeholder="Pipe Separated Eg: ON | OFF" tabindex=10></input>';
  json_value_column.innerHTML+='<input type=number class="form-control" max=100 min=-100 id=start_value'+json_parameter_count+' name=start_value'+json_parameter_count+' style="margin-bottom:5px;width:79px;padding-left:5px;float:left;display:none" value=-100 tabindex=22></input>\
          <label for="lbl23" id=lblto'+json_parameter_count+' name=lblto'+json_parameter_count+' class="form-control" style="margin-bottom:5px;text-align:center;width:28px;float:left;display:none;border:none;" >-</label>\
          <input type=number max=100 class="form-control" min=-100 id=end_value'+json_parameter_count+' name=end_value'+json_parameter_count+' style="margin-bottom:5px;padding-left:5px;padding-right:5px;width:79px;float:left;display:none" value=100></input>';
  json_value_column.innerHTML+='<input type=textbox class="form-control" id=type_txt'+json_parameter_count+' name=type_txt'+json_parameter_count+' style="margin-bottom:5px;display:none;width:260px;float:right;"></input>\
          ';

  var json_action_column=json_row.insertCell(3);
  json_action_column.style.textAlign='center';
  json_action_column.innerHTML="<img src='/images/dbdrop.png' id=del"+json_parameter_count+" name=del"+json_parameter_count+" style='width:20px;height:20px;cursor:pointer;' onclick='fnjsondelete(this.id)'>";
  var json_action_column=json_row.insertCell(4);
  json_action_column.innerHTML="<img src='/images/plus.png' id=add"+json_parameter_count+" name=add"+json_parameter_count+" style='display:block;width:20px;height:20px;cursor:pointer;' onclick='fnaddjson(this.id)'>";
  last_added=json_parameter_count;
  json_row_number=new Array();
  json_row_number[json_parameter_count]=1;

json_parameter_count++;
  add_json_initial_top=220;
  pub_initial_top=380;
   document.getElementById("json_div").style.display="block";
   document.getElementById("add_json").style.display="none";
   document.getElementById("add_json").style.top=add_json_initial_top+"px";
$("#add_json").appendTo("#pubd2");
//$("#pubd2").appendTo("#dialog_wrapper1");
//$("#dialog_wrapper1").appendTo("#editdialog");
//$("#pubd2").appendTo("#editdialog");

   cbtn.style.top="380px";
   sbtn.style.top="380px";
   cbtn.style.left="180px";
   sbtn.style.left="350px";
  /* $('#editdialog').modal({
  backdrop: 'static'
});*/
   $("#editdialog").modal('show');
  //$("#editdialog").dialog({ width:700,height:450,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Add New Publish Message Details" }).dialog("open");
  }
  else
  {
   cbtn.style.top="380px";
   sbtn.style.top="380px";
   cbtn.style.left="180px";
   sbtn.style.left="350px";

   document.getElementById("tm").style.display="block";
   document.getElementById("pipe_txt").value="";
   document.getElementById("sysvar_div").style.display="none";
   document.getElementById("rnd_div").style.display="none";
   document.getElementById("range_div").style.display="none";
   document.getElementById("rndrange_div").style.display="block";
   document.getElementById("text_type").value="plaintext";
   document.getElementById("plaintext_div").style.display="block";
   document.getElementById("sm").style.display="none";
   document.getElementById("json_div").style.display="none";
      document.getElementById("add_json").style.display="none";
      document.getElementById("ptype").style.display="block";

      $("#ptype").appendTo("#pubd2");

$("#msg_type_div").appendTo("#pubd2");
$("#rndrange_div").appendTo("#pubd2");
$("#plaintext_div").appendTo("#pubd2");
/*$('#editdialog').modal({
  backdrop: 'static'
});*/
if(document.getElementById("list_tag").innerText=='Templates')
{
  document.getElementById("pub_heading").innerText="Publish Message Template";
  document.getElementById("sm1").style.display="block";
  document.getElementById("sub_txt1").value=0;
  document.getElementById("hr").style.width="132px";
  document.getElementById("min").style.width="132px";
  //document.getElementById("pub_lbl").style.visibility="hidden";  
  document.getElementById("tm").style.display="none";
  document.getElementById("lbl3").style.display="none";
  document.getElementById("sec").style.display="none";
      document.getElementById("pt").style.width="520px";

  document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";
}
else
{
  document.getElementById("pub_heading").innerText="Add Publish Message Details";
  document.getElementById("sm1").style.display="block";
  document.getElementById("lbl3").style.display="block";
  document.getElementById("sec").style.display="block";  
  document.getElementById("sub_txt1").value=0;
    document.getElementById("hr").style.width="78px";
  document.getElementById("min").style.width="78px";

  document.getElementById("tm").style.display="none";
        document.getElementById("pt").style.width="500px";

  document.getElementById("pubt_txt").placeholder="Enter Topic";
    document.getElementById('pqnmark').style.display="none";

  //document.getElementById("pub_lbl").style.visibility="hidden";
}
  document.getElementById("dialog_size").style.height="550px";
document.getElementById("dialog_size").style.width="650px";

document.getElementById("prtn_lbl").style.display="block";
   document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="10px";
  document.getElementById("prtn_lbl").style.width="65px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="145px";
  document.getElementById("prtn_txt").style.marginTop="3px";
  document.getElementById("prtn_txt").style.float="left";
    document.getElementById("hr").style.width="78px";
  document.getElementById("lbl1").style.width="48px";
  document.getElementById("lbl1").style.paddingLeft="13px";
  document.getElementById("min").style.width="78px";
  document.getElementById("lbl2").style.width="48px";
  document.getElementById("lbl2").style.paddingLeft="10px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("sec").style.width="78px";
  document.getElementById("lbl3").style.width="30px";
  document.getElementById("lbl3").style.paddingLeft="10px";
  document.getElementById("pub_lbl").style.width="140px";

if ((document.getElementById("list_tag").innerText=='Templates') && (document.getElementById("pub_heading").innerText=="Publish Message Template"))
  {
      document.getElementById("hr").style.width="132px";
  document.getElementById("min").style.width="132px";

  }
  else
  if ((document.getElementById("list_tag").innerText!='Templates') && (document.getElementById("pub_heading").innerText=="Add Publish Message Details"))

  {
    document.getElementById("hr").style.width="78px";
    document.getElementById("min").style.width="78px";
  }
  document.getElementById("every_hr").style.display="block";
document.getElementById("every_sec").style.display="blcok";
document.getElementById("every_min").style.display="block";
var hr_check=document.getElementById("hr");
for (var jj=0;jj<hr_check.length;jj++)
{
  if (hr_check.options[jj].value==0)
  hr_check.options[jj].text=hr_check.options[jj].value+'th';
  else if ((hr_check.options[jj].value>=4) && (hr_check.options[jj].value<=20))
    hr_check.options[jj].text=hr_check.options[jj].value+'th';
  else if ((hr_check.options[jj].value==1) || (hr_check.options[jj].value==21))
    hr_check.options[jj].text=hr_check.options[jj].value+'st';
  else if ((hr_check.options[jj].value==2) || (hr_check.options[jj].value==22))
    hr_check.options[jj].text=hr_check.options[jj].value+'nd';
  else if ((hr_check.options[jj].value==3) || (hr_check.options[jj].value==23))
    hr_check.options[jj].text=hr_check.options[jj].value+'rd';  
}
document.getElementById("every_hr").innerText='Every';
var min_check=document.getElementById("min");
for (var jj=0;jj<min_check.length;jj++)
{
  if (min_check.options[jj].value==0)
  min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=4) && (min_check.options[jj].value<=20))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=24) && (min_check.options[jj].value<=30))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=34) && (min_check.options[jj].value<=40))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=44) && (min_check.options[jj].value<=49))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value>=54) && (min_check.options[jj].value<=59))
    min_check.options[jj].text=min_check.options[jj].value+'th';
  else if ((min_check.options[jj].value==1) || (min_check.options[jj].value==21) || (min_check.options[jj].value==31) || (min_check.options[jj].value==41) || (min_check.options[jj].value==51))
    min_check.options[jj].text=min_check.options[jj].value+'st';
  else if ((min_check.options[jj].value==2) || (min_check.options[jj].value==22) || (min_check.options[jj].value==32) || (min_check.options[jj].value==42) || (min_check.options[jj].value==52))
    min_check.options[jj].text=min_check.options[jj].value+'nd';
  else if ((min_check.options[jj].value==3) || (min_check.options[jj].value==23) || (min_check.options[jj].value==33) || (min_check.options[jj].value==43) || (min_check.options[jj].value==53))
    min_check.options[jj].text=min_check.options[jj].value+'rd';  }
document.getElementById("every_min").innerText='Every';

var sec_check=document.getElementById("sec");
for (var jj=0;jj<sec_check.length;jj++)
{
  if (sec_check.options[jj].value==0)
  sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=4) && (sec_check.options[jj].value<=20))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=24) && (sec_check.options[jj].value<=30))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=34) && (sec_check.options[jj].value<=40))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=44) && (sec_check.options[jj].value<=49))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value>=54) && (sec_check.options[jj].value<=59))
    sec_check.options[jj].text=sec_check.options[jj].value+'th';
  else if ((sec_check.options[jj].value==1) || (sec_check.options[jj].value==21) || (sec_check.options[jj].value==31) || (sec_check.options[jj].value==41) || (sec_check.options[jj].value==51))
    sec_check.options[jj].text=sec_check.options[jj].value+'st';
  else if ((sec_check.options[jj].value==2) || (sec_check.options[jj].value==22) || (sec_check.options[jj].value==32) || (sec_check.options[jj].value==42) || (sec_check.options[jj].value==52))
    sec_check.options[jj].text=sec_check.options[jj].value+'nd';
  else if ((sec_check.options[jj].value==3) || (sec_check.options[jj].value==23) || (sec_check.options[jj].value==33) || (sec_check.options[jj].value==43) || (sec_check.options[jj].value==53))
    sec_check.options[jj].text=sec_check.options[jj].value+'rd';  }
document.getElementById("every_sec").innerText='Every';
document.getElementById("hr").value='*';
document.getElementById("min").value='*';
document.getElementById("sec").value='*';
$("#editdialog").modal('show');
  //$("#editdialog").dialog({ width:700,height:540,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Add New Publish Message Details" }).dialog("open");
  }
}
else if (s=="addsub")
{
   cbtn.style.top="220px";
   sbtn.style.top="220px";
   cbtn.style.left="160px";
   sbtn.style.left="250px";
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.width="410px";
   document.getElementById("pt").style.marginBottom="10px";
   document.getElementById("pubt_txt").style.display="block";
   document.getElementById("pubt_txt").style.width="245px";
   document.getElementById("pubt_txt").style.float="right";
   document.getElementById("sm").style.display="block";
   document.getElementById("sm").style.width="390px";
   document.getElementById("sub_txt").style.display="block";
   document.getElementById("sub_txt").style.width="245px";
   document.getElementById("sub_txt").style.float="right";
   document.getElementById("prtn_txt").style.display="none";
   document.getElementById("prtn_lbl").style.display="none";
   document.getElementById("plaintext_div").style.display="none";
   document.getElementById("sysvar_div").style.display="none";
   document.getElementById("rnd_div").style.display="none";
   document.getElementById("range_div").style.display="none";
   document.getElementById("sub_txt").value=0;
   document.getElementById("pq").style.display="block";
   document.getElementById("pq").style.width="390px";
   document.getElementById("pqos_txt").style.display="block";
   document.getElementById("pqos_txt").style.width="245px";
   document.getElementById("pqos_txt").style.float="right";
   document.getElementById("tm").style.display="block";
   document.getElementById("tm").style.width="400px";
   document.getElementById("hr").style.width="48px";
   document.getElementById("min").style.width="48px";
   document.getElementById("sec").style.width="48px";
   document.getElementById("lbl1").style.display="block";
   document.getElementById("lbl1").style.width="32px";
   document.getElementById("lbl1").style.paddingLeft="10px";
   document.getElementById("lbl1").style.float="left";
   document.getElementById("lbl2").style.display="block";
   document.getElementById("lbl2").style.width="35px";
   document.getElementById("lbl2").style.paddingLeft="10px";
   document.getElementById("lbl2").style.paddingRight="5px";
   document.getElementById("lbl2").style.float="left";
   document.getElementById("lbl3").style.display="block";
   document.getElementById("lbl3").style.width="32px";
   document.getElementById("lbl3").style.paddingLeft="10px";
   document.getElementById("lbl3").style.float="left";
   document.getElementById("ptype").style.display="none";
   document.getElementById("add_json").style.display="none";
   document.getElementById("ptype").style.display="none";
   $("#ptype").appendTo("#pubd2");

     $("#pt").appendTo("#pubd2"); 
     $("#sm").appendTo("#pubd2"); 
     $("#tm").appendTo("#pubd2"); 
     $("#pq").appendTo("#pubd2"); 
     document.getElementById("tm").style.display="none";


   //document.getElementById("pub_lbl").style.visibility="hidden";
  /* $('#editdialog').modal({
  backdrop: 'static'
});*/
if(document.getElementById("list_tag").innerText=='Templates')
{
  document.getElementById("pub_heading").innerText="Add Subscription Template";
  document.getElementById("sm1").style.display="none";
    document.getElementById("lbl3").style.display="none";
  document.getElementById("sec").style.display="none";
        document.getElementById("pt").style.width="410px";

    document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";


}
else
{
  document.getElementById("pub_heading").innerText="Add New Subscription Details";
  document.getElementById("sm1").style.display="none";
    document.getElementById("lbl3").style.display="block";
  document.getElementById("sec").style.display="block";
        document.getElementById("pt").style.width="390px";

    document.getElementById("pubt_txt").placeholder="Enter Topic";
  document.getElementById('pqnmark').style.display="none";


}
document.getElementById("dialog_size").style.height="420px";
document.getElementById("dialog_size").style.width="450px";
  document.getElementById("hr").style.width="55px";
  document.getElementById("lbl1").style.width="22px";
  document.getElementById("lbl1").style.paddingLeft="5px";
  document.getElementById("min").style.width="55px";
  document.getElementById("lbl2").style.width="35px";
  document.getElementById("lbl2").style.paddingLeft="5px";
  document.getElementById("lbl2").style.paddingRight="5px";
  document.getElementById("sec").style.width="55px";
  document.getElementById("lbl3").style.width="22px";
  document.getElementById("lbl3").style.paddingLeft="5px";
  document.getElementById("pub_lbl").style.width="145px";
  if ((document.getElementById("list_tag").innerText=='Templates') && (document.getElementById("pub_heading").innerText=="Add Subscription Template"))
  {
      document.getElementById("hr").style.width="90px";
  document.getElementById("min").style.width="90px";

  }
  else
  if ((document.getElementById("list_tag").innerText!='Templates') && (document.getElementById("pub_heading").innerText=="Add New Subscription Details"))

  {
    document.getElementById("hr").style.width="55px";
    document.getElementById("min").style.width="55px";
  }
document.getElementById("hr").value='0';
document.getElementById("min").value='0';
document.getElementById("sec").value='0';
document.getElementById("every_hr").style.display="none";
document.getElementById("every_sec").style.display="none";
document.getElementById("every_min").style.display="none";
/*var dbs=document.getElementById("dbload");
for (var jj=0;jj<dbs.length;jj++)
{
  if (env==dbs.options[jj].text)
  {
    alert(env+' is already available');
    return;
  }
}*/
var hr_check=document.getElementById("hr");
for (var jj=0;jj<hr_check.length;jj++)
{
  hr_check.options[jj].text=hr_check.options[jj].value;
}
document.getElementById("every_hr").innerText='Every';
var min_check=document.getElementById("min");
for (var jj=0;jj<min_check.length;jj++)
{
  min_check.options[jj].text=min_check.options[jj].value;
}
document.getElementById("every_min").innerText='Every';

var sec_check=document.getElementById("sec");
for (var jj=0;jj<sec_check.length;jj++)
{
  sec_check.options[jj].text=sec_check.options[jj].value;
}
document.getElementById("every_sec").innerText='Every';



   $("#editdialog").modal('show');
//$("#editdialog").dialog({ width:480,height:380,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Add New Subscription Details" }).dialog("open");
}
else
{
   cbtn.style.top="320px";
   sbtn.style.top="320px";
   cbtn.style.left="180px";
   sbtn.style.left="310px";
   document.getElementById("sm").style.display="none";
   document.getElementById("tm").style.display="none";
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.display="block";
   document.getElementById("pt").style.width="410px";
   document.getElementById("pt").style.marginBottom="10px";
   document.getElementById("pubt_txt").style.width="245px";
   document.getElementById("pubt_txt").style.float="right";
   document.getElementById("pq").style.width="390px";
   document.getElementById("pqos_lbl").style.paddingTop="0px";
   document.getElementById("pqos_lbl").style.width="140px";
   document.getElementById("pqos_lbl").style.float="left";
   document.getElementById("prtn_lbl").style.display="block";
   document.getElementById("prtn_lbl").style.paddingTop="10px";
   document.getElementById("prtn_lbl").style.width="65px";
   document.getElementById("prtn_lbl").style.float="left"; 
   document.getElementById("prtn_lbl").style.paddingLeft="10px";   
   document.getElementById("pqos_txt").style.width="245px";
   document.getElementById("pqos_txt").style.float="right";
   document.getElementById("prtn_txt").style.marginTop="3px";
   document.getElementById("prtn_txt").style.width="245px";
   document.getElementById("prtn_txt").style.float="right";
     document.getElementById("prtn_lbl").style.paddingTop="10px";
  document.getElementById("prtn_lbl").style.paddingLeft="0px";
  document.getElementById("prtn_lbl").style.width="290px";
  document.getElementById("prtn_lbl").style.float="left";
  document.getElementById("prtn_txt").style.width="245px";
  document.getElementById("prtn_txt").style.marginTop="-30px";
  document.getElementById("prtn_txt").style.float="right";

   document.getElementById("pm").style.display="block";
   document.getElementById("pm").style.width="390px";
   document.getElementById("pm").style.paddingTop="75px";
   document.getElementById("pubm_txt").style.width="245px";
   document.getElementById("pubm_txt").style.float="right";
   document.getElementById("rt").style.width="390px";
   document.getElementById("rest_txt").style.width="245px";
   document.getElementById("rest_txt").style.float="right";
   document.getElementById("rm").style.width="390px";
   document.getElementById("resm_txt").style.width="245px";
   document.getElementById("resm_txt").style.float="right";
     document.getElementById("add_json").style.display="none";
     $("#pm").appendTo("#pubd2"); 
  $("#rt").appendTo("#pubd2");
  $("#rm").appendTo("#pubd2");
  /*$('#editdialog').modal({
  backdrop: 'static'
});*/

document.getElementById("pub_heading").innerText="Add New Behavior";
document.getElementById("dialog_size").style.height="500px";
document.getElementById("dialog_size").style.width="500px";
document.getElementById("sm1").style.display="none";
if (document.getElementById("list_tag").innerText=='Templates')
{
        document.getElementById("pt").style.width="410px";

    document.getElementById("pubt_txt").placeholder="Use $client_id for dynamic topics";
  document.getElementById('pqnmark').style.display="block";
}
else
{
        document.getElementById("pt").style.width="390px";

    document.getElementById("pubt_txt").placeholder="Enter Topic";
  document.getElementById('pqnmark').style.display="none";

}

$("#editdialog").modal('show');
//$("#editdialog").dialog({ width:500,height:400,autoOpen: false, show: { effect: "blind", duration: 1000 }, hide: { effect: "blind", duration: 1000 }, close: function () {; }, title:"Add New Request Response Details" }).dialog("open");
}


}
function f1(id)
{
 var s="";
 s=id.slice(6);
 var i=parseInt(s);
document.getElementById("pub_topic").value="topic";
document.getElementById("pub_msg").value="msg";
document.getElementById("pub_retain").value="retain";
}
function fnsubtime()
{
  var subtime=document.getElementById("sub_txt").value;

  if (subtime==0)
  {
    document.getElementById("tm").style.display="none";
  }
  else
  {
    document.getElementById("tm").style.display="block";
    document.getElementById("every_hr").style.display="none";
    document.getElementById("every_min").style.display="none";
    document.getElementById("every_sec").style.display="none";
    document.getElementById("pub_lbl").style.visibility="hidden";
  }
}
function fnsubtime1()
{
  var subtime1=document.getElementById("sub_txt1").value;
  
  if (subtime1==0)
  {
    document.getElementById("tm").style.display="none";
  }
  else
  {
    document.getElementById("tm").style.display="block";
    document.getElementById("every_hr").style.display="block";
    document.getElementById("every_sec").style.display="block";
    document.getElementById("every_min").style.display="block";
    document.getElementById("pub_lbl").style.visibility="hidden";
  }
}

function getDashboard()
{
  if (configuration=='bevy_sim_template')
  {
    document.getElementById("startdevice").style.display="none";
    document.getElementById("stopdevice").style.display="none";
    document.getElementById("tickgreen").style.display="none";
    document.getElementById("tickgrey").style.display="none";
    document.getElementById("startallclients").style.display="none";
    document.getElementById("stopallclients").style.display="none";
      document.getElementById("startdevice").style.display="none";
  document.getElementById("stopdevice").style.display="none"

  }
  else
  {
    oldconfiguration=configuration;
    document.getElementById("startdevice").style.display="block";
    document.getElementById("stopdevice").style.display="block";
    document.getElementById("tickgreen").style.display="none";
    document.getElementById("tickgrey").style.display="none";
    document.getElementById("startallclients").style.display="block";
    document.getElementById("stopallclients").style.display="block";
  }
  form_name='myform';
$("device").innerHTML="";
s="selectenv";
if (form_name != "template_form")
{
if (window.location.href=="http://127.0.0.1:9000/")
document.getElementById("choice").value='dbselect';
else
document.getElementById("choice").value='dbselect1';
document.getElementById("addenvdialog").style.display="none;"
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/?config='+configuration,

data: $("form[name='myform']").serialize(),

    async:false,
     success:function () {

}
});
}
       $.ajax({


    url: '/client/count?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
var obj=JSON.parse(msg);
clientcount=obj[1];
//var sdf=1;
},
 error: function () {
    }

});
$.ajax({


    url: '/client/network?curr_time='+new Date().getTime(),

    type: "GET",
dataType: "text",
    async:false,

     success: function (msg) {
var obj=JSON.parse(msg);
var x = document.getElementById("dbload");
x.innerHTML="";
for (var key in obj)
{
  if (obj[key]=='bevywise_network') ;
  else if (obj[key]=='bevy_sim_template') ;
  else if (obj[key]=='bevywise') ;
  else
  {
    var option = document.createElement("option");
    option.text = obj[key];
    x.add(option);
  }
}
},
 error: function (mm) {
    }

});

var devtrack;
var track;
if (form_name=="template_form")
{
  devtrack=document.getElementById("template_track");
  track="#template_track"
}
else
{
  devtrack=document.getElementById("dev_track");
  track="#dev_track"
}
var devtrack=document.getElementById("dev_track");
devtrack.innerHTML="";
if (clientcount>20)
{
var n=parseInt(clientcount/20)+1;
var i=0;
while (i<n)
{
  if (i==0)
  {
    devtrack.innerHTML=devtrack.innerHTML+"<li class=dev0><a class=example  style=cursor:pointer;  id=firsti name=firsti onclick=setnextclk("+i+",id)>&laquo;</a></li>";  
    devtrack.innerHTML=devtrack.innerHTML+"<li class=dev0><a  class=example style=cursor:pointer;background-color:#ecf0f5  id="+i+" name="+i+" onclick=setnextclk("+i+",id)>"+(i+1)+"</a></li>";
  }
  else
    devtrack.innerHTML=devtrack.innerHTML+"<li class=dev"+i+"><a  class=example style=cursor:pointer  id="+i+" name="+i+" onclick=setnextclk("+i+",id)>"+(i+1)+"</a></li>";


  i=i+1;
  if (i>4)
    break;
}
    devtrack.innerHTML=devtrack.innerHTML+"<li class=devlast><a  class=example  style=cursor:pointer id=lastdevi name=lastdevi onclick=last_dev_disp()>&raquo;</a></li>"; 
}
else
{
  devtrack.innerHTML=devtrack.innerHTML+"<li class=dev0><a  class=example  style=cursor:pointer id=firsti name=firsti onclick=setnextclk(0,id)>&laquo;</a></li>";
  devtrack.innerHTML=devtrack.innerHTML+"<li class=dev0><a  class=example  style=cursor:pointer id=1 name=1 onclick=setnextclk(0,id)>1</a></li>";
  devtrack.innerHTML=devtrack.innerHTML+"<li class=devlast><a  class=example  style=cursor:pointer id=lastdevi name=lastdevi onclick=last_dev_disp()>&raquo;</a></li>";       
}
{
var list_size=$('#dev_track li').size();
var rec_count_start=0;
var rec_count_end=rec_count_start+12;
if (rec_count_start==0)
{
$('#dev_track li:gt(-1)').show();
var x=(5 <= list_size) ? 5 : list_size;
$('#dev_track li:lt('+(x+1)+')').show();
$('#dev_track li:gt('+x+')').hide();
$('#dev_track li:gt('+(list_size-2)+')').show();
}
else
{
$('#dev_track li:lt('+(rec_count_start+1)+')').hide();
$('#dev_track li:gt('+rec_count_start+')').show();
}
}


envvalue=1;
if (form_name=="template_form")
{
document.getElementById("Devices").style.display="none"
$("#template_device").children().empty();
$("#template_device").innerHTML="";
adddevices(form_name,0);
}
else
{
document.getElementById("Devices").style.display="block"
$("#device").children().empty();
$("#device").innerHTML="";
adddevices(form_name,0);
}
}
function timeConverter(UNIX_timestamp){
  var a = new Date(UNIX_timestamp * 1000);
  var months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
  var year = a.getFullYear();
  var month = months[a.getMonth()];
  var date = a.getDate();
  var min = a.getMinutes() < 10 ? '0' + a.getMinutes() : a.getMinutes();
  var sec = a.getSeconds() < 10 ? '0' + a.getSeconds() : a.getSeconds();
  var hour = a.getHours();
  var time = date + ' ' + month + ' ' + year + ' ' + hour + ':' + min + ':' + sec ;
  return time;
}

function next_log_disp1()
{
id=document.getElementById("d_name").value;
next_log_clk++;
var ofval=next_log_clk*10;
if (parseInt(ofval)+10 >= logcount)
{
document.getElementById("next_log").style.display="none";
}
var u='/client/get?a='+id+'&offsetvalue='+ofval+'&curr_time='+new Date().getTime();
$.ajax({

  url: u,

    type: "GET",
dataType: "text",
    async:false,
     success: function (msg) {
var lp=JSON.parse(msg);
 
  var lgkeys = [];
  for(var lk in lp) lgkeys.push(lk);

  var lgs=lp[lgkeys[0]];
  var lgm=lgs[0];
  var lgelt_tbl=document.getElementById("log_table");
  var lgcnt=lgkeys.length;

  for(var lgt=0;lgt<lgcnt;lgt++)
  { 

   var lgrow=lgelt_tbl.insertRow(lgrownumber);
   var lgss1=lp[lgkeys[lgt]];
   lgrownumber=lgrownumber+1;
   var lgsc1=0;
   var lgaid=lgkeys[lgt];
   var lgsdata=1;
   var lg_op="";
   var lgsrtn="";
   for (var lgj=2;lgj<lgss1.length;lgj++)
   {
  var lgcell1=lgrow.insertCell(lgsc1);
        if (lgss1[lgj]=="NIL") lgsdata=0; 
  if (lgj==5)
  {
    if (lgss1[lgj]==0) lg_op="PUBLISH";
    else if (lgss1[lgj]==1) lg_op="SUBSCRIBE";
    else if (lgss1[lgj]==2) lg_op="UNSUBSCRIBE";
    else if (lgss1[lgj]==3) lg_op="CONNECT";
    else if (lgss1[lgj]==4) lg_op="DISCONNECT";
    else if (lgss1[lgj]==5) lg_op="WILL";
    else lg_op=lgss1[lgj];
    lgcell1.innerHTML=lg_op;
    lgcell1.value=lg_op;
  }
  else if (lgj==2)
  {
    lgcell1.innerHTML=timeConverter(lgss1[lgj]);
    lgcell1.style.width="200px";
    lgcell1.value=lgss1[lgj];
  }
  else
  {
    lgcell1.innerHTML=lgss1[lgj];
    lgcell1.value=lgss1[lgj];
  }
  lgcell1.id="logr"+lgaid+"c"+lgsc1;
  lgcell1.setAttribute("name","logr"+lgaid+"c"+lgsc1);
  lgcell1.style.width="180px";
  lgcell1.style.fontWeight="normal";
  lgcell1.style.textAlign="left";


  lgsc1=lgsc1+1;

   }




}
},
error:function()
{
}
});

}
function setnextclk(nextcnt,next_id)
{
    var dev_list_size=$('#dev_track li').size();
    var no_of_track;
    if (clientcount%20==0)
      no_of_track=parseInt(clientcount/20);
    else
      no_of_track=parseInt(clientcount/20)+1;
  var whole_list_size=no_of_track+2;
    var lastclicked=0;
  var rec_cnt=nextcnt;
  var devlastset=0;
    if (nextcnt==dev_list_size-2)
    lastclicked=1;
  var xdetail=document.getElementsByClassName("example");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#ffffff";
}

if (lastclicked==1)
  document.getElementById("lastdevi").style.backgroundColor="#ecf0f5";
else
{
var nj=document.getElementById(nextcnt);
if(nj)
{
document.getElementById(nextcnt).style.backgroundColor="#ecf0f5";
}
}
if ((whole_list_size==dev_list_size) && (lastclicked==1))
    adddevices("myform",nextcnt-1);

  else
  {
  adddevices("myform",nextcnt);
  var nn=document.getElementById("d_name").value;
  var xdetail11=document.getElementById('device'+nn);
if (xdetail11)
{
xdetail11.style.borderLeft="3px solid transparent";
xdetail11.style.borderColor="#337ab7";
xdetail11.style.color="#ffffff";
}
  var dev_list_size_temp=$('#dev_track li').size();
  if (dev_list_size_temp==whole_list_size)
    devlastset=1;
if (lastclicked==0)
{
if(dev_list_size>=7)
{
if ((nextcnt>=1) && (nextcnt<(dev_list_size-4)))
{
var showfrom=nextcnt-2;
var showto=nextcnt+4;
var hideright=nextcnt+3;
if (nextcnt==1)
{
   showto=nextcnt+5;
   hideright=nextcnt+4;
}
var hideleft=nextcnt-1;
$('#dev_track li:gt('+showfrom+')').show();
$('#dev_track li:lt('+showto+')').show();
$('#dev_track li:gt('+hideright+')').hide();
$('#dev_track li:lt('+hideleft+')').hide();
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();
}
}
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();
  if (rec_cnt>2)
{
var a=document.getElementsByClassName("dev"+(rec_cnt+1));
if (a.length>0)
{
var xx=0;
}
else
{
if (devlastset==0)
{
$("<li class=dev"+(rec_cnt+1)+"  style=cursor:pointer><a class=example id='"+(rec_cnt+1)+"' name='"+(rec_cnt+1)+"' onclick=setnextclk("+(rec_cnt+1)+")>"+(rec_cnt+2)+"</a></li>").insertAfter("ul li.dev"+rec_cnt);
}
dev_list_size=$('#dev_track li').size();
var lastdevtrack=document.getElementById("lastdevi");
var rec_count_start=(rec_cnt*12);
var rec_count_end=rec_count_start+12;

if(dev_list_size>7)
{
  var xne=dev_list_size-4;
if ((nextcnt>=1) && (nextcnt>=(dev_list_size-4)))
{
var showfrom=nextcnt-2;
var showto=nextcnt+4;
var hideright=nextcnt+2;
if (nextcnt==1)
{
   showto=nextcnt+5;
   hideright=nextcnt+4;
}
var hideleft=nextcnt-1;
$('#dev_track li:gt('+showfrom+')').show();
$('#dev_track li:lt('+showto+')').show();
$('#dev_track li:gt('+hideright+')').hide();
$('#dev_track li:lt('+hideleft+')').hide();
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();
}
}
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();

}
}
if(dev_list_size>7)
{
if ((nextcnt>=1) && (nextcnt>=(dev_list_size-4)))
{
var showfrom=nextcnt-2;
var showto=nextcnt+4;
var hideright=nextcnt+2;
if (nextcnt==1)
{
   showto=nextcnt+5;
   hideright=nextcnt+4;
}
var hideleft=nextcnt-2;
$('#dev_track li:gt('+showfrom+')').show();
$('#dev_track li:lt('+showto+')').show();
$('#dev_track li:gt('+hideright+')').hide();
$('#dev_track li:lt('+hideleft+')').hide();
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();
}
}
$('#dev_track li:lt(1)').show();
$('#dev_track li').last().show();
}

var list_size=$('#device li').size();
var rec_count_start=(nextcnt*20);
var rec_count_end=rec_count_start+20;

$('#device li:gt(-1)').show();
var x=(20 <= list_size) ? 20 : list_size;
var newelt=$('#device li a').get(0);
$('#device li:lt('+(x+1)+')').show();
disp_detail((newelt.innerText).toString());
$('#device li:gt('+(x-1)+')').hide();
}
}
function last_dev_disp()
{
var xdetail=document.getElementsByClassName("example");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#ffffff";
}
var lastlogtrack=document.getElementById("lastdevi");
lastlogtrack.style.backgroundColor="#ecf0f5";
var list_size=$('#dev_track li').size();
setnextclk(list_size-2);
}

function disp_detail(id)
{
  var active_form_style=document.getElementById("Templates").style.display;
  var templates_selected=0;
  if (active_form_style=='block')
    templates_selected=1;
logcount=0;
var xdetail1=document.getElementsByClassName("detail");
var xd;
for(xd=0;xd<xdetail1.length;xd++)
{
xdetail1[xd].style.backgroundColor="#222d32";
xdetail1[xd].style.border="none";
xdetail1[xd].style.color="#b8c7ce";
}
var xdetail=document.getElementById("device"+id);
xdetail.style.borderLeft="3px solid transparent";
xdetail.style.borderColor="#337ab7";
xdetail.style.color="#ffffff";

document.getElementById("d_name").value=id;
document.getElementById("choice").value='getstatus';
document.getElementById("paid_txt").display="block";
var connect_status=0;
var $form=$("#myform");
var f=$form
var u=$form.attr("action")+"?"+$form.serialize();
$.ajax({


   url: '/',

data: $("form[name='myform']").serialize(),
    type: "POST",
 dataType: "text",
    async:false,
     success:function (data,status) {
data=JSON.parse(data);
if (data=="connected")
   connect_status=1;
else
   connect_status=0;
    },
error:function(data){
document.getElementById("paid_txt").display="none";
}
    
    
});

if (connect_status==0)
{
   //document.getElementById("startdevice").disabled=false;
   //document.getElementById("stopdevice").disabled=true;
   document.getElementById("tickgreen").style.display="none";
   if (configuration!='bevy_sim_template')
   document.getElementById("tickgrey").style.display="none";
    if (configuration!='bevy_sim_template')

   document.getElementById("startdevice").style.display="block";
  document.getElementById("stopdevice").style.display="none";

}
else
{
   //document.getElementById("startdevice").disabled=true;
   //document.getElementById("stopdevice").disabled=false;
   if (configuration!='bevy_sim_template')
   document.getElementById("tickgreen").style.display="none";
   document.getElementById("tickgrey").style.display="none";
     document.getElementById("startdevice").style.display="none";
        if (configuration!='bevy_sim_template')

  document.getElementById("stopdevice").style.display="block";

}
devid=0;
var u='/client/get?a='+id+'&curr_time='+new Date().getTime();


       $.ajax({
  url: u,
   type: "GET",
dataType: "text",
    async:false,
     success: function (msg) {
document.getElementById("edit").className='btn btn-sm btn-info';
document.getElementById("d_name").value='Click on a device to get details';
document.getElementById("d_type").value='';
document.getElementById("d_desc").value='';
document.getElementById("will_topic").value='';
document.getElementById("will_msg").value='';
document.getElementById("will_retain").value='';
var px=document.getElementById("pub_table");
while(px.rows[2]) px.deleteRow(2);
var sx=document.getElementById("sub_table");
while(sx.rows[2]) sx.deleteRow(2);
var rx=document.getElementById("log_table");
while(rx.rows[1]) rx.deleteRow(1);
var clindex1=msg.indexOf("[");
var clindex2=msg.indexOf("]");
var clnt_details=msg.slice(clindex1+1,clindex2);
var cln_ar=clnt_details.split(",");
var dname=cln_ar[1].split('"');
var nmindex1=cln_ar[1].indexOf('"');
var nmindex2=cln_ar[1].indexOf('"');
var ddesc=cln_ar[2].split('"');
var timestr="";
if(ddesc[0]!="")
  timestr=ddesc[0];
else
  timestr=ddesc[1];
var windex1=msg.indexOf("[",clindex2-1);
var windex2=msg.indexOf("]",clindex2+1);
var w_details=msg.slice(windex1+1,windex2);
var w_ar=w_details.split(",");
var wtopic=w_ar[1].split('"');
var wmsg=w_ar[2].split('"');
document.getElementById("d_name").value=id;
document.getElementById("d_desc").value=timestr;

document.getElementById("will_topic").value=wtopic[1];
document.getElementById("will_msg").value=wmsg[1];
if (w_ar[4]==0)
document.getElementById("will_retain").value="0-Retain Flag is not set";
else if (w_ar[4]==1)
document.getElementById("will_retain").value="1-Retain Flag is set";
else 
document.getElementById("will_retain").value="NIL";





var pindex1=msg.indexOf("[",windex2-1);
var pindex2;
var multipub=0;
if (pindex1==windex2+1)
{
   pindex2=msg.indexOf("]",windex2+1)
}
else
{
  multipub=1;
  pindex1=msg.indexOf("{",windex2-1);
  pindex2=msg.indexOf("}{",windex2+1);
}

if (multipub==1)
{
  pubmsgs=msg.slice(pindex1,pindex2+1);
  var p=JSON.parse(pubmsgs);
  var keys = [];
  for(var k in p) keys.push(k);
  var s=p[keys[0]];
  var m=s[0];
  var elt_tbl=document.getElementById("pub_table");
elt_tbl.style.display="block";
  var rcnt=keys.length;
var px=document.getElementById("nopub");
px.style.display="none";

var px11=document.getElementById("no_pub_table");
px11.style.display="none";


  var rownumber=2;
  for(var t=0;t<rcnt;t++)
  { 
    var onstart=false;
   var row=elt_tbl.insertRow(rownumber);
   var s1=p[keys[t]];
   var c1=0;
   var data=1;
   rownumber=rownumber+1;
   var p_aid=keys[t];
   c1=0;
   var pqos="";
   var prtn="";
   var pub_msg_type=s1[s1.length-1];
   for (var j=1;j<s1.length+1;j++)
   {
  var cell1=row.insertCell(c1);
  cell1.style.width="180px";
  if ((j<s1.length) && (s1[j]=="NIL"))
  {
    data=0;
    //continue;
    break;
  }
  if (j==3)
  {
    if (s1[j]==0) pqos="0-Atmost Once";
    else if (s1[j]==1) pqos="1-Atleast Once";
    else if (s1[j]==2) pqos="2-Exactly Once";
    else pqos=s1[j];
    cell1.innerHTML=pqos;
    cell1.value=pqos;
    cell1.id="pubr"+p_aid+"c"+c1;
    cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
  cell1.style.fontWeight="normal";
  cell1.style.textAlign="left";
  }
  else if (j==4)
  {
    if (s1[j]==0) prtn="0-Retain Flag is not set";
    else if (s1[j]==1) prtn="1-Retain Flag is set";
    else prtn=s1[j];
    cell1.innerHTML=prtn;
    cell1.value=prtn;
    cell1.id="pubr"+p_aid+"c"+c1;
    cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
    cell1.style.fontWeight="normal";
    cell1.style.textAlign="left";
  }
  else
  {
    if (j<s1.length)
    {
      if (j>4)
        cell1.style.textAlign="center";
      else
        cell1.style.textAlign="left";
      var actual_data=s1[j];
      if ((pub_msg_type==5) && (j==2))
      {
        var mm=JSON.parse(s1[j]);
        var json_op="{";
        for (var key in mm)
        {
          json_op+='"'+key+'":"'+mm[key]["msg"]+'"},{';
        }
        actual_data=json_op.substring(0,json_op.length-2);
      }
    }
    else actual_data=s1[2];
    if ((j>4) && (j<=7))
      if (s1[j]=='*')
      actual_data='Every';
    if (j==5)
    {
      if (s1[j]=='-1')
      {
        actual_data='On Start';
        if (document.getElementById("list_tag").innerText=='Templates')
          cell1.colSpan="2";
        else
          cell1.colSpan="3";
        onstart=true;
      }
    }
    cell1.innerHTML=actual_data;
    cell1.value=actual_data;
    cell1.id="pubr"+p_aid+"c"+c1;
    cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
    cell1.style.width="180px";
    cell1.style.fontWeight="normal";
    if (c1==6)
      cell1.setAttribute("class","sec_class");
    if (onstart==true)
    {
      if ((j==6) || (j==7))
        cell1.style.display="none";
      if (c1==6)
        cell1.setAttribute("class","new_class");
    }
    if (j>=s1.length-1)
      cell1.style.display="none";

  }
  c1=c1+1;
   }
    if(data!=0)
     {
  var cell2=row.insertCell(c1);
  cell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=pub"+p_aid+"edit"+id+" name=pub"+p_aid+"edit"+id+" style=align:center;width:20px;height:20px;cursor:pointer onclick='fnedit(this.id);'>";
  var cell3=row.insertCell(c1+1);
  cell2.style.textAlign="center";
  cell3.style.textAlign="center";
  cell3.innerHTML="<img  class=dropdb src=/images/dbdrop.png id=pub"+p_aid+"drop"+id+" name=pub"+p_aid+"drop"+id+" style=align:center;width:20px;height:20px;cursor:pointer onclick='fndrop(this.id);'>";
  }
     else
     {
var px11=document.getElementById("pub_table");
px11.style.display="none";
var px=document.getElementById("nopub");
px.style.display="block";

var px1=document.getElementById("no_pub_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Published Topics";
  break;
     }
  }
  if (document.getElementById("list_tag").innerText=="Templates")
  {
    if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
    }

    $(".sec_class").hide();
    document.getElementById("pub_table_sec").colSpan="2";
  }
  else
  {
        if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }

    $(".sec_class").show();
    document.getElementById("pub_table_sec").colSpan="3";

  }

}
else
{

     var row1=elt_tbl.insertRow(1);
      for (var c11=0;c11<5;c11++)
   {
  var cell11=row1.insertCell(c11);
  cell11.innerHTML='NIL';
  c11=c11+1;
   }
  
}
var sindex1=msg.indexOf("[",pindex2-1);
var sindex2;
var multisub=0;
if (sindex1==pindex2+1)
{
   sindex2=msg.indexOf("]",pindex2+1)
}
else
{
  multisub=1;
  sindex1=msg.indexOf("{",pindex2-1);
  sindex2=msg.indexOf("}{",pindex2+1);
}

if (multisub==1)
{
  submsgs=msg.slice(sindex1,sindex2+1);
  var sp=JSON.parse(submsgs);
  var skeys = [];
  for(var sk in sp) skeys.push(sk);

  var ss=sp[skeys[0]];
  var sm=ss[0];

var px=document.getElementById("nosub");
px.style.display="none";

var px11=document.getElementById("no_sub_table");
px11.style.display="none";

  var selt_tbl=document.getElementById("sub_table");
selt_tbl.style.display="block";
  var srcnt=skeys.length;
  var srownumber=2;

  for(var st=0;st<srcnt;st++)
  { 
   var onstart=false;
   var srow=selt_tbl.insertRow(srownumber);
   var ss1=sp[skeys[st]];
   srownumber=srownumber+1;
   var sc1=0;
   var aid=skeys[st];
   var sdata=1;
   var sqos="";
   var srtn="";
   for (var sj=1;sj<ss1.length;sj++)
   {
  var scell1=srow.insertCell(sc1);
        if (ss1[sj]=="NIL") 
  {
    sdata=0; 
    continue;
  }
  if (sj==3)
  {
    if (ss1[sj]==0) sqos="0-Atmost Once";
    else if (ss1[sj]==1) sqos="1-Atleast Once";
    else if (ss1[sj]==2) sqos="2-Exactly Once";
    else sqos=ss1[sj];
    scell1.innerHTML=sqos;
    scell1.value=sqos;
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
    scell1.style.width="180px";
    scell1.style.fontWeight="normal";
    scell1.style.textAlign="left";

  }
        else if (sj==4)
  {
    if (ss1[sj]==0) srtn="0-Retain Flag is not set";
    else if (ss1[sj]==1) srtn="1-Retain Flag is set";
    else srtn=ss1[sj];
    scell1.innerHTML=srtn;
    scell1.value=srtn;
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
    scell1.style.width="180px";
    scell1.style.fontWeight="normal";
    scell1.style.textAlign="left";

    scell1.style.display="none"
  }
  else
  {
              if (sj>4)
            scell1.style.textAlign="center";
          else
            scell1.style.textAlign="left";

              scell1.style.width="180px";

    actual_data='';
    if ((sj>4) && (sj<=7))
      if (ss1[sj]=='*')
      actual_data='Every';
    if (sj==5)
    {
      if (ss1[sj]=='-1')
      {
        actual_data='On Start';
        if (document.getElementById("list_tag").innerText=='Templates')
        {
          scell1.colSpan="2";
          scell1.style.width="360px";
        }
        else
        {
          scell1.colSpan="3";
          scell1.style.width="540px";
        }
        onstart=true;
        scell1.style.textAlign="center";
      }
    }
    if (actual_data!='')
    {
      scell1.innerHTML=actual_data;
      scell1.value=actual_data;
    }
    else
    {
    scell1.innerHTML=ss1[sj];
    scell1.value=ss1[sj];
    }
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
        if (sc1==6)
      scell1.setAttribute("class","sec_class");
    if (onstart==true)
    {
      if ((sj==6) || (sj==7))
        scell1.style.display="none";
      if (sc1==6)
        scell1.setAttribute("class","new_class");
    }


    scell1.style.fontWeight="normal";

    if ((sc1>=5) || (sc1<=7))
      scell1.style.textAlign="center";
    if (sj==2)
      scell1.style.display="none";
        }
            if (sc1==0)
    {
      scell1.style.textAlign="left";
        if (document.getElementById("list_tag").innerText=="Templates")
        {
          scell1.style.width="310px";
        }
        else
        {
          scell1.style.width="180px";
        }

    }

  sc1=sc1+1;
   }
   if(sdata!=0)
     {
  var scell2=srow.insertCell(sc1);
  scell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=sub"+aid+"edit"+id+" name=sub"+aid+"edit"+id+" style=width:20px;height:20px;cursor:pointer onclick='fnedit(this.id);'>";
  var scell3=srow.insertCell(sc1+1);
  scell2.style.textAlign="center";
  scell3.style.textAlign="center";
  if (document.getElementById("list_tag").innerText=="Templates")
  scell3.innerHTML="<img  class=dropdb src=/images/dbdrop.png id=sub"+aid+"drop"+id+" name=sub"+aid+"drop"+id+" style=width:20px;height:20px;cursor:pointer onclick='fndrop(this.id);'>";

    else
  scell3.innerHTML="<img  class=dropdb src=/images/unsubscribe.png id=sub"+aid+"drop"+id+" name=sub"+aid+"drop"+id+" style=width:20px;height:20px;cursor:pointer onclick='fndrop(this.id);'>";


  }
     else
     {

var px11=document.getElementById("sub_table");
px11.style.display="none";
var px=document.getElementById("nosub");
px.style.display="block";

var px1=document.getElementById("no_sub_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Subscribed Topics";
  break;
    }

  }
    if (document.getElementById("list_tag").innerText=="Templates")
    {
      if (document.getElementById("sub_table_unsub"))
      {
      document.getElementById("sub_table_unsub").innerText=" Delete ";
      }

      $(".sec_class").hide();
      document.getElementById("sub_table_sec").colSpan="2";
    }
  else
  {
        if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }

    $(".sec_class").show();
    document.getElementById("sub_table_sec").colSpan="3";    
  }

}
else
{

     var srow1=selt_tbl.insertRow(1);
      for (var sc11=0;sc11<5;sc11++)
   {
  var scell11=srow1.insertCell(sc11);
  scell11.innerHTML='NIL';
  sc11=sc11+1;
   }
  
}

//CODE STARTS FOR REQUEST RESPONSE


var rrindex1=msg.indexOf("[",sindex2-1);
var rrindex2;
var multirr=0;
if (rrindex1==sindex2+1)
{
   rrindex2=msg.indexOf("]",sindex2+1)
}
else
{
  multirr=1;
  rrindex1=msg.indexOf("{",sindex2-1);
  rrindex2=msg.indexOf("}",sindex2+1);
}

if (multirr==1)
{
  rrmsgs=msg.slice(rrindex1,rrindex2+1);
  var rrp=JSON.parse(rrmsgs);
  var rrkeys = [];
  for(var rrk in rrp) rrkeys.push(rrk);

  var rrs=rrp[rrkeys[0]];
  var rrm=rrs[0];
var px=document.getElementById("noreqres");
px.style.display="none";

var px11=document.getElementById("no_reqres_table");
px11.style.display="none";

  var rrelt_tbl=document.getElementById("log_table");
rrelt_tbl.style.display="block";


  var rrcnt=rrkeys.length;
  var rrownumber=1;


  for(var rrt=0;rrt<rrcnt;rrt++)
  { 

   var rrow=rrelt_tbl.insertRow(rrownumber);
   var rrs1=rrp[rrkeys[rrt]];
   rrownumber=rrownumber+1;
   var rrc1=0;
   var rraid=rrkeys[rrt];
   var rrdata=1;
   var rrqos="";
   var rrtn="";
   for (var rrj=1;rrj<rrs1.length;rrj++)
   {
  var rrcell1=rrow.insertCell(rrc1);
        if (rrs1[rrj]=="NIL") 
  {
    rrdata=0; 
    continue;
  }
  if (rrj==5)
  {
    if (rrs1[rrj]==0) rrqos="0-Atmost Once";
    else if (rrs1[rrj]==1) rrqos="1-Atleast Once";
    else if (rrs1[rrj]==2) rrqos="2-Exactly Once";
    else rrqos=rrs1[rrj];
    rrcell1.innerHTML=rrqos;
    rrcell1.value=rrqos;
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
    rrcell1.style.fontWeight="normal";
    rrcell1.style.textAlign="left";

  }
        else if (rrj==6)
  {
    if (rrs1[rrj]==0) rrtn="0-Retain Flag is not set";
    else if (rrs1[rrj]==1) rrtn="1-Retain Flag is set";
    else rrtn=rrs1[rrj];
    rrcell1.innerHTML=rrtn;
    rrcell1.value=rrtn;
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
    rrcell1.style.fontWeight="normal";
    rrcell1.style.textAlign="left";

  }
  else
  {
    rrcell1.innerHTML=rrs1[rrj];
    rrcell1.value=rrs1[rrj];
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
    rrcell1.style.fontWeight="normal";
    rrcell1.style.textAlign="left";

        }
  rrc1=rrc1+1;
   }
  if(rrdata!=0)
     {
  var rrcell2=rrow.insertCell(rrc1);
  rrcell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=res"+rraid+"edit"+id+" name=res"+rraid+"edit"+id+" style=width:20px;height:20px;cursor:pointer onclick='fnedit(this.id);'>";

  var rrcell3=rrow.insertCell(rrc1+1);
  rrcell2.style.textAlign="center";
  rrcell3.style.textAlign="center";
  rrcell3.innerHTML="<img  class=dropdb src=/images/dbdrop.png id=res"+rraid+"drop"+id+" name=res"+rraid+"drop"+id+" style=width:20px;height:20px;cursor:pointer onclick='fndrop(this.id);'>";
  }
     else
     {

var px11=document.getElementById("log_table");
px11.style.display="none";
var px=document.getElementById("noreqres");
px.style.display="block";

var px1=document.getElementById("no_reqres_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Behavior Simulation";
  break;
    }

  }
}
else
{

     var rrow1=rrelt_tbl.insertRow(1);
      for (var rrc11=0;rrc11<5;rrc11++)
   {
  var rrcell11=rrrow1.insertCell(rrc11);
  rrcell11.innerHTML='NIL';
  rrc11=rrc11+1;
   }
  
}
},
    error: function () {

    }

});
var u='/singleclient/pubcount/get?a='+id+'&curr_time='+new Date().getTime();
       $.ajax({

  url: u,

    type: "GET",
 
dataType: "text",
    async:false,
     success: function (msg) {
var obj=JSON.parse(msg);
var ppcnt=0;
for (var key in obj)
{
ppcnt++;
if (ppcnt==2)
pubcount=parseInt(obj[key]);
}
var pubtrack=document.getElementById("pub_track");
pubtrack.innerHTML="";
if (pubcount>10)
{
var n=parseInt(pubcount/10)+1;
var i=0;
while (i<n)

{
  if (i==0)
  {
    pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer id=firstpubi name=firstpubi onclick=next_pub_disp("+i+",id)>&laquo;</a></li>";
    pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer;background-color:#ecf0f5; id=pub"+i+" name=pub"+i+" onclick=next_pub_disp("+i+",id)>"+(i+1)+"</a></li>";
  }
  
  else
    pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer id=pub"+i+" name=pub"+i+" onclick=next_pub_disp("+i+",id)>"+(i+1)+"</a></li>"


  i=i+1;
}
    pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer id=lastpubi name=lastpubi onclick=next_pub_disp("+(i-1)+",id)>&raquo;</a></li>"    

}

else

{
  pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer id=firstpubi name=firstpubi onclick=next_pub_disp(0,id)>&laquo;</a></li>"

  pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer;background-color:#ecf0f5 id=pub0 name=pub0 onclick=next_pub_disp(0,id)>1</a></li>"
  pubtrack.innerHTML=pubtrack.innerHTML+"<li><a  class=pubset style=cursor:pointer id=lastpubi name=lastpubi onclick=next_pub_disp(0,id)>&raquo;</a></li>"        


}
{

var list_size=$('#pub_track li').size();
$('#pub_track li:gt(-1)').show();
var x=(5 <= list_size) ? 5 : list_size;
$('#pub_track li:lt('+(x+1)+')').show();

$('#pub_track li:gt('+x+')').hide();
$('#pub_track li:gt('+(list_size-2)+')').show();

}
if (pubcount<=10)
  document.getElementById("pub_track").style.display="none";
else
  document.getElementById("pub_track").style.display="block";


},
    error: function () {    }

});

var u='/singleclient/subcount/get?a='+id+'&curr_time='+new Date().getTime();

       $.ajax({

  url: u,

    type: "GET",
 
dataType: "text",
    async:false,
     success: function (msg) {
var obj=JSON.parse(msg);
var sscnt=0;
for (var key in obj)
{
sscnt++;
if (sscnt==2)
subcount=parseInt(obj[key]);
}
var subtrack=document.getElementById("sub_track");

subtrack.innerHTML="";
if (subcount>10)
{
var n=parseInt(subcount/10)+1;
var i=0;

while (i<n)
{
  if (i==0)
  {
    subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer id=firstsubi name=firstsubi onclick=next_sub_disp("+i+",id)>&laquo;</a></li>"; 
    subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer;background-color:#ecf0f5; id=sub"+i+" name=sub"+i+" onclick=next_sub_disp("+i+",id)>"+(i+1)+"</a></li>";
  }
  else
    subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer id=sub"+i+" name=sub"+i+" onclick=next_sub_disp("+i+",id)>"+(i+1)+"</a></li>";


  i=i+1;
}
    subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer id=lastsubi name=lastsubi onclick=next_sub_disp("+(i-1)+",id)>&raquo;</a></li>"; 
}

else
{

  subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer id=firstsubi name=firstsubi onclick=next_sub_disp(0,id)>&laquo;</a></li>";
  subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer;background-color:#ecf0f5 id=sub0 name=sub0 onclick=next_sub_disp(0,id)>1</a></li>"
  subtrack.innerHTML=subtrack.innerHTML+"<li><a class=subset  style=cursor:pointer id=lastsubi name=lastsubi onclick=next_sub_disp(0,id)>&raquo;</a></li>"        

}
{
var list_size=$('#sub_track li').size();
$('#sub_track li:gt(-1)').show();
var x=(5 <= list_size) ? 5 : list_size;
$('#sub_track li:lt('+(x+1)+')').show();
$('#sub_track li:gt('+x+')').hide();
$('#sub_track li:gt('+(list_size-2)+')').show();
}
if (subcount<=10)
document.getElementById("sub_track").style.display="none";
else
document.getElementById("sub_track").style.display="block";
},

    error: function () {    }

});

var u='/singleclient/logcount/get?a='+id+'&curr_time='+new Date().getTime();

       $.ajax({

  url: u,

    type: "GET",
 
dataType: "text",
    async:false,
     success: function (msg) {
var obj=JSON.parse(msg);
var llcnt=0;
for (var key in obj)
{
llcnt++;
if (llcnt==2)
logcount=parseInt(obj[key]);
}
var logtrack=document.getElementById("log_track");

logtrack.innerHTML="";
if (logcount>10)
{
var n=parseInt(logcount/10)+1;
var i=0;

while (i<n)
{
  if (i==0)
  {
    logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer id=firstlogi name=firstlogi onclick=next_log_disp("+i+",id)>&laquo;</a></li>"; 
    logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer;background-color:#ecf0f5; id=log"+i+" name=log"+i+" onclick=next_log_disp("+i+",id)>"+(i+1)+"</a></li>";
  }
  else
    logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer id=log"+i+" name=log"+i+" onclick=next_log_disp("+i+",id)>"+(i+1)+"</a></li>";


  i=i+1;
}
    logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer id=lastlogi name=lastlogi onclick=next_log_disp("+(i-1)+",id)>&raquo;</a></li>"; 
}

else
{

  logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer id=firstlogi name=firstlogi onclick=next_log_disp(0,id)>&laquo;</a></li>";
  logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer;background-color:#ecf0f5 id=log0 name=log0 onclick=next_log_disp(0,id)>1</a></li>"
  logtrack.innerHTML=logtrack.innerHTML+"<li><a class=logset  style=cursor:pointer id=lastlogi name=lastlogi onclick=next_log_disp(0,id)>&raquo;</a></li>"        

}
{
var list_size=$('#log_track li').size();
$('#log_track li:gt(-1)').show();
var x=(5 <= list_size) ? 5 : list_size;
$('#log_track li:lt('+(x+1)+')').show();
$('#log_track li:gt('+x+')').hide();
$('#log_track li:gt('+(list_size-2)+')').show();
}
if (logcount<=10)
  document.getElementById("log_track").style.display="none";
else
  document.getElementById("log_track").style.display="block";

},
    error: function () {
    }

});

}

function next_pub_disp(rec_cnt,pid)
{
var xdetail=document.getElementsByClassName("pubset");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#fafafa";
}

document.getElementById(pid).style.backgroundColor="#ecf0f5";
var list_size=$('#pub_track li').size();
var rec_count_start=(rec_cnt*12);
var rec_count_end=rec_count_start+12;
if(list_size>7)
{
if ((rec_cnt>=2) && (rec_cnt<(list_size-4)))
{
var showfrom=rec_cnt-2;
var showto=rec_cnt+4;
var hideright=rec_cnt+3;
var hideleft=rec_cnt-1;

$('#pub_track li:gt('+showfrom+')').show();
$('#pub_track li:lt('+showto+')').show();
$('#pub_track li:gt('+hideright+')').hide();
$('#pub_track li:lt('+hideleft+')').hide();
$('#pub_track li:lt(1)').show();
$('#pub_track li').last().show();
}
}
$('#pub_track li:lt(1)').show();

$('#pub_track li').last().show();


id=document.getElementById("d_name").value;
next_log_clk++;
var ofval=rec_cnt*10;
if (parseInt(ofval)+10 >= pubcount)
{
document.getElementById("next_log").style.display="none";
}
var u='/singleclient/pub/get?a='+id+'&offsetvalue='+ofval+'&curr_time='+new Date().getTime();
$.ajax({

  url: u,
    type: "GET",
dataType: "text",
    async:false,
     success: function (msg) {
var obj=JSON.parse(msg);
var px1=document.getElementById("pub_table");
px1.style.display="block";
var px=document.getElementById("nopub");
px.style.display="none";

var px11=document.getElementById("no_pub_table");
px11.style.display="none";

while(px1.rows[2]) px1.deleteRow(2);

  var p=JSON.parse(msg);
  var keys = [];
  for(var k in p) keys.push(k);
  var s=p[keys[0]];
  var m=s[0];
  var elt_tbl=document.getElementById("pub_table");

  var rcnt=keys.length;
 
  var rownumber=2;
  for(var t=0;t<rcnt;t++)
  {  

   var row=elt_tbl.insertRow(rownumber);
   var s1=p[keys[t]];
   var c1=0;
   var data=1;
   rownumber=rownumber+1;
   var p_aid=keys[t];
   c1=0;
   var pqos="";
   var prtn="";
   for (var j=1;j<s1.length;j++)
   {
  var cell1=row.insertCell(c1);
  cell1.style.width="180px";
        if (s1[j]=="NIL") 
  {
    data=0;
    continue;
  }
  if (j==3)
  {
    if (s1[j]==0) pqos="0-Atmost Once";
    else if (s1[j]==1) pqos="1-Atleast Once";
    else if (s1[j]==2) pqos="2-Exactly Once";
    else pqos=s1[j];
    cell1.innerHTML=pqos;
    cell1.value=pqos;
    cell1.id="pubr"+p_aid+"c"+c1;
    cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
    cell1.style.fontWeight="normal";
    cell1.style.textAlign="left";

  }
  else if (j==4)
  {
    if (s1[j]==0) prtn="0-Retain Flag is not set";
    else if (s1[j]==1) prtn="1-Retain Flag is set";
    else prtn=s1[j];
    cell1.innerHTML=prtn;
    cell1.value=prtn;
    cell1.id="pubr"+p_aid+"c"+c1;
    cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
    cell1.style.fontWeight="normal";
    cell1.style.textAlign="left";

  }
        else{
                    if (j>4)
            cell1.style.textAlign="center";
          else
            cell1.style.textAlign="left";

  cell1.innerHTML=s1[j];
  cell1.value=s1[j];
  cell1.id="pubr"+p_aid+"c"+c1;
  cell1.setAttribute("name","pubr"+p_aid+"c"+c1);
  cell1.style.width="180px";
  cell1.style.fontWeight="normal";
      if (c1==6)
      cell1.setAttribute("class","sec_class");


  }
  c1=c1+1;
   }
    if(data!=0)
     {
  var cell2=row.insertCell(c1);
  cell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=pub"+p_aid+"edit"+id+" name=pub"+p_aid+"edit"+id+" style=width:20px;height:20px;cursor:pointer;align:center onclick='fnedit(this.id);'>";
  var cell3=row.insertCell(c1+1);
  cell2.style.textAlign="center";
  cell3.style.textAlign="center";
  cell3.innerHTML="<img  class=dropdb src=/images/dbdrop.png id=pub"+p_aid+"drop"+id+" name=pub"+p_aid+"drop"+id+" style=width:20px;height:20px;cursor:pointer;align:center onclick='fndrop(this.id);'>";
  }
     else
     {
var px11=document.getElementById("pub_table");
px11.style.display="none";
var px=document.getElementById("nopub");
px.style.display="block";

var px1=document.getElementById("no_pub_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Published Topics";
  break;
     }
  }

if (document.getElementById("list_tag").innerText=="Templates")
{
      if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
    }

  $(".sec_class").hide();
  document.getElementById("pub_table_sec").colSpan="2";
}
else
{
  $(".sec_class").show();
  document.getElementById("pub_table_sec").colSpan="3";
      if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }

}



},
error:function()
{
}
});
var elt=$('#pub_track li').get(1);
elt.style.backgroundColor="#ff0000";
}


function next_sub_disp(rec_cnt,sid)
{
var list_size=$('#sub_track li').size();
var rec_count_start=(rec_cnt*12);
var rec_count_end=rec_count_start+12;
var xdetail=document.getElementsByClassName("subset");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#fafafa";
}

document.getElementById(sid).style.backgroundColor="#ecf0f5";

if(list_size>7)
{
if ((rec_cnt>=2) && (rec_cnt<(list_size-4)))
{
var showfrom=rec_cnt-2;
var showto=rec_cnt+4;
var hideright=rec_cnt+3;
var hideleft=rec_cnt-1;

$('#sub_track li:gt('+showfrom+')').show();
$('#sub_track li:lt('+showto+')').show();
$('#sub_track li:gt('+hideright+')').hide();
$('#sub_track li:lt('+hideleft+')').hide();
$('#sub_track li:lt(1)').show();
$('#sub_track li').last().show();
}
}
$('#sub_track li:lt(1)').show();
$('#sub_track li').last().show();

id=document.getElementById("d_name").value;
next_log_clk++;
var ofval=rec_cnt*10;
if (parseInt(ofval)+10 >= subcount)
{
document.getElementById("next_log").style.display="none";
}
var u='/singleclient/sub/get?a='+id+'&offsetvalue='+ofval+'&curr_time='+new Date().getTime();
$.ajax({

  url: u,
    type: "GET",
dataType: "text",
    async:false,
     success: function (msg) {
var obj=JSON.parse(msg);
var px1=document.getElementById("sub_table");
while(px1.rows[2]) px1.deleteRow(2);
  var sp=JSON.parse(msg);
  var skeys = [];
  for(var sk in sp) skeys.push(sk);

  var ss=sp[skeys[0]];
  var sm=ss[0];
var px=document.getElementById("nosub");
px.style.display="none";

var px11=document.getElementById("no_sub_table");
px11.style.display="none";

  var selt_tbl=document.getElementById("sub_table");
selt_tbl.style.display="block";
  var srcnt=skeys.length;
  var srownumber=2;

  for(var st=0;st<srcnt;st++)
  {

   var srow=selt_tbl.insertRow(srownumber);
   var ss1=sp[skeys[st]];
   srownumber=srownumber+1;
   var sc1=0;
   var aid=skeys[st];
   var sdata=1;
   var sqos="";
   var srtn="";
   for (var sj=1;sj<ss1.length;sj++)
   {
  var scell1=srow.insertCell(sc1);
        if (ss1[sj]=="NIL") 
  {
    sdata=0; 
    continue;
  }
  if (sj==3)
  {
    if (ss1[sj]==0) sqos="0-Atmost Once";
    else if (ss1[sj]==1) sqos="1-Atleast Once";
    else if (ss1[sj]==2) sqos="2-Exactly Once";
    else sqos=ss1[sj];
    scell1.innerHTML=sqos;
    scell1.value=sqos;
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
    scell1.style.width="180px";
  scell1.style.fontWeight="normal";
  scell1.style.textAlign="left";
  }
        else if (sj==4)
  {
    if (ss1[sj]==0) srtn="0-Retain Flag is not set";
    else if (ss1[sj]==1) srtn="1-Retain Flag is set";
    else srtn=ss1[sj];
    scell1.innerHTML=srtn;
    scell1.value=srtn;
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
    scell1.style.width="180px";
  scell1.style.fontWeight="normal";
  scell1.style.textAlign="left";

    scell1.style.display="none"
  }
  else
  {
              if (sj>4)
            scell1.style.textAlign="center";
          else
            scell1.style.textAlign="left";

    scell1.innerHTML=ss1[sj];
    scell1.value=ss1[sj];
    scell1.id="subr"+aid+"c"+sc1;
    scell1.setAttribute("name","subr"+aid+"c"+sc1);
    scell1.style.width="180px";
  scell1.style.fontWeight="normal";

    if (sj==2)
      scell1.style.display="none";
        if (sc1==6)
      scell1.setAttribute("class","sec_class");

        }
  sc1=sc1+1;
   }
   if(sdata!=0)
     {
  var scell2=srow.insertCell(sc1);
  scell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=sub"+aid+"edit"+id+" name=sub"+aid+"edit"+id+" style=width:20px;height:20px;cursor:pointer;align:center onclick='fnedit(this.id);'>";
  var scell3=srow.insertCell(sc1+1);
  scell2.style.textAlign="center";
  scell3.style.textAlign="center";
  scell3.innerHTML="<img  class=dropsub src=/images/dbdrop.png id=sub"+aid+"drop"+id+" name=sub"+aid+"drop"+id+" style=width:20px;height:20px;cursor:pointer;align:center onclick='fndrop(this.id);'>";
  }
     else
     {
var px11=document.getElementById("sub_table");
px11.style.display="none";
var px=document.getElementById("nosub");
px.style.display="block";

var px1=document.getElementById("no_sub_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Subscribed Topics";
  break;
    }

  }
  if (document.getElementById("list_tag").innerText=="Templates")
  {
        if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Delete ";
    }

    $(".sec_class").hide();
    document.getElementById("sub_table_sec").colSpan="2";
  }
  else
  {
        if (document.getElementById("sub_table_unsub"))
    {
    document.getElementById("sub_table_unsub").innerText=" Unsubscribe ";
    }

    $(".sec_class").show();
    document.getElementById("sub_table_sec").colSpan="3";
  }


},
error:function()
{
}
});

}


function next_log_disp(rec_cnt,sid)
{
var list_size=$('#log_track li').size();
var rec_count_start=(rec_cnt*12);
var rec_count_end=rec_count_start+12;
var xdetail=document.getElementsByClassName("logset");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#fafafa";
}

document.getElementById(sid).style.backgroundColor="#ecf0f5";

if(list_size>7)
{
if ((rec_cnt>=2) && (rec_cnt<(list_size-4)))
{
var showfrom=rec_cnt-2;
var showto=rec_cnt+4;
var hideright=rec_cnt+3;
var hideleft=rec_cnt-1;

$('#log_track li:gt('+showfrom+')').show();
$('#log_track li:lt('+showto+')').show();
$('#log_track li:gt('+hideright+')').hide();
$('#log_track li:lt('+hideleft+')').hide();
$('#log_track li:lt(1)').show();
$('#log_track li').last().show();
}
}
$('#log_track li:lt(1)').show();
$('#log_track li').last().show();

id=document.getElementById("d_name").value;
next_log_clk++;
var ofval=rec_cnt*10;
if (parseInt(ofval)+10 >= logcount)
{
document.getElementById("next_log").style.display="none";
}
var u='/singleclient/log/get?a='+id+'&offsetvalue='+ofval+'&curr_time='+new Date().getTime();
$.ajax({

  url: u,
    type: "GET",
dataType: "text",
    async:false,
     success: function (msg) {

var obj=JSON.parse(msg);
var px1=document.getElementById("log_table");
while(px1.rows[1]) px1.deleteRow(1);
  var rrp=JSON.parse(msg);
  var rrkeys = [];
  for(var rrk in rrp) rrkeys.push(rrk);

  var rrs=rrp[rrkeys[0]];
  var rrm=rrs[0];
var px=document.getElementById("noreqres");
px.style.display="none";

var px11=document.getElementById("no_reqres_table");
px11.style.display="none";

  var rrelt_tbl=document.getElementById("log_table");
rrelt_tbl.style.display="block";

   var rrcnt=rrkeys.length;
  var rrownumber=1;


  for(var rrt=0;rrt<rrcnt;rrt++)
  {

   var rrow=rrelt_tbl.insertRow(rrownumber);
   var rrs1=rrp[rrkeys[rrt]];
   rrownumber=rrownumber+1;
   var rrc1=0;
   var rraid=rrkeys[rrt];
   var rrdata=1;
   var rrqos="";
   var rrtn="";
   for (var rrj=1;rrj<rrs1.length;rrj++)
   {
  var rrcell1=rrow.insertCell(rrc1);
        if (rrs1[rrj]=="NIL") 
  {
    rrdata=0; 
    continue;
  }
  if (rrj==5)
  {
    if (rrs1[rrj]==0) rrqos="0-Atmost Once";
    else if (rrs1[rrj]==1) rrqos="1-Atleast Once";
    else if (rrs1[rrj]==2) rrqos="2-Exactly Once";
    else rrqos=rrs1[rrj];
    rrcell1.innerHTML=rrqos;
    rrcell1.value=rrqos;
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
  rrcell1.style.fontWeight="normal";
  rrcell1.style.textAlign="left";

  }
        else if (rrj==6)
  {
    if (rrs1[rrj]==0) rrtn="0-Retain Flag is not set";
    else if (rrs1[rrj]==1) rrtn="1-Retain Flag is set";
    else rrtn=rrs1[rrj];
    rrcell1.innerHTML=rrtn;
    rrcell1.value=rrtn;
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
    rrcell1.style.fontWeight="normal";
    rrcell1.style.textAlign="left";

  }
  else
  {
    rrcell1.innerHTML=rrs1[rrj];
    rrcell1.value=rrs1[rrj];
    rrcell1.id="resr"+rraid+"c"+rrc1;
    rrcell1.setAttribute("name","resr"+rraid+"c"+rrc1);
    rrcell1.style.width="180px";
    rrcell1.style.fontWeight="normal";
    rrcell1.style.textAlign="left";

        }
  rrc1=rrc1+1;
   }
  if(rrdata!=0)
     {
  var rrcell2=rrow.insertCell(rrc1);
  rrcell2.innerHTML="<img src=/images/dbedit.png  class=editdb id=res"+rraid+"edit"+id+" name=res"+rraid+"edit"+id+" style=width:20px;height:20px;cursor:pointer onclick='fnedit(this.id);'>";
  var rrcell3=rrow.insertCell(rrc1+1);
  rrcell2.style.textAlign="center";
  rrcell3.style.textAlign="center";
  rrcell3.innerHTML="<img  class=dropdb src=/images/dbdrop.png id=res"+rraid+"drop"+id+" name=res"+rraid+"drop"+id+" style=width:20px;height:20px;cursor:pointer onclick='fndrop(this.id);'>";
  }
     else
     {

var px11=document.getElementById("log_table");
px11.style.display="none";
var px=document.getElementById("noreqres");
px.style.display="block";

var px1=document.getElementById("no_reqres_table");
px1.style.display="block";
while(px1.rows[1]) px1.deleteRow(1);
var row=px1.insertRow(1);
       //row.colSpan="9";
       var temp1=row.insertCell(0);
       temp1.colSpan="9"; 
       temp1.style.fontWeight="normal";
       temp1.style.textAlign="center";
       temp1.innerHTML="No Behavior Simulation";
  break;
    }

  }

},
error:function()
{
}
});

}





function adddevices(form_name,devtrackcnt)
{
  document.getElementById("rt_side_panel").style.display="block";
var errelt=document.getElementById("connectmsg");
errelt.style.display="none";

document.getElementById("addenvdialog").style.display="none";
id=document.getElementById("d_name").value;
if (document.getElementById("pubd1"))
document.getElementById("pubd1").style.display="none;"
document.getElementById("d_name").value='';
document.getElementById("d_type").value='';
document.getElementById("d_desc").value='';

document.getElementById("will_topic").value='';
document.getElementById("will_msg").value='';
document.getElementById("will_retain").value='';
var clientoffset=devtrackcnt*20;

var px1=document.getElementById("pub_table");
while(px1.rows[2]) px1.deleteRow(2);
var sx1=document.getElementById("sub_table");
while(sx1.rows[2]) sx1.deleteRow(2);
var lx1=document.getElementById("log_table");
while(lx1.rows[1]) lx1.deleteRow(1);
var addactive=document.getElementById("addactiveflag");
var x=document.getElementById("device");
addactive=document.getElementById("addactiveflag").value;
var urlcheck;
   urlcheck='/client/list/'+devtrackcnt+'?curr_time='+new Date().getTime();

dev_cnt=1;
dev_key=[];
activedev_key=[]
activedev_cnt=1;




       $.ajax({

   url: urlcheck,
    type: "GET",
    dataType: "json",
    async:false,

     success: function (msg) {
if (deviceClk==0)
{
obj=JSON.parse(msg);
var cnt=1;
var temp_cnt=0;
var tracklist;
if (form_name=="template_form")
{
  x=document.getElementById("template");
  tracklist="#template";
}
else
{
  x=document.getElementById("device");
  tracklist="#device";
}
x.innerHTML="";
var key;
var no_of_devices=1;
for (key in obj)
{
  if (key=="0")
  {
    no_of_devices=0;
  }
dev_key[dev_cnt]=key;
dev_cnt++;
}
for (key in obj)
{
elt=document.createElement("li");
var ielt=document.createElement("i");
ielt.className="fa fa-circle-o";
elt.className="dev_appear_list";
elt.style.display="block";
elt.style.cursor="pointer";
elt.style.pointerEvents="auto";
if (cnt==1) first=key;
    if (cnt==1)
    elt.style.padding="14px 4px 4px 4px";
    else
    elt.style.padding="4px 4px 4px 4px";
    elt.innerHTML="<a class=detail id='device"+key+"' name='device"+key+"' onclick=devclick(this.id)><i class=detail></i> "+key+"</a>";
    top=top+30;
    elt.value="device"+key;
    if (no_of_devices>0)
    x.appendChild(elt); 
    elt.style.display="block";
    cnt=cnt+1;
}
nd=cnt-1;
if (no_of_devices==0)
{
var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
       // tabcontent[i].style.display = "none";
    }
document.getElementById("rt_side_panel").style.display="none";
var errelt=document.getElementById("connectmsg");
errelt.style.display="block";
if (document.getElementById("list_tag").innerText=='Templates')
{
  errelt.innerHTML="No template is available";
  errelt.innerText="No template is available";
}
else
{
errelt.innerHTML="There are no devices added in this network.";
errelt.innerText="There are no devices added in this network.";
}
document.getElementById("dev_track").style.display="none";
return;
}
if (clientcount>20)
  document.getElementById("dev_track").style.display="block";
else
  document.getElementById("dev_track").style.display="none";

var list_size=$(tracklist+' li').size();
var rec_count_start=0;
var rec_count_end=rec_count_start+12;
if (rec_count_start==0)
{
$(tracklist+' li:gt(-1)').show();
var x=(20 <= list_size) ? 20 : list_size;
$(tracklist+' li:lt('+(x+1)+')').show();
$(tracklist+' li:gt('+x+')').hide();
}
var top3=80;
var stop_cnt=0;
var ee;
if (nd>20)  stop_cnt=20;
else stop_cnt=nd;
var ptag=document.getElementById("rec_count");
var ptagtxt="";
ptagtxt="1-"+stop_cnt+" of "+nd;
ptag.innerHTML=ptagtxt;
var md=document.getElementById("next");
if (nd>12)
{
md.className="nextimgg";
md.style.display="block";
md.disabled=false;
}
else
md.disabled=true;
var nxt_txt=document.getElementById("next_clk_txt");
nxt_txt.style.display="none";
document.body.appendChild(nxt_txt);
next_clk=parseInt(nxt_txt.value);
if (document.getElementById("deveditflag").value=="10")
{
disp_detail(first);
}
else if (document.getElementById("deveditflag").value=="1")
{
disp_detail(id);
}
else
{
disp_detail(key);
}
}
else
{
 disp_detail(id);
}
      
    },


    error: function () {
    }

});
}
function devclick(dev_id)
{
var xdetail=document.getElementsByClassName("detail");
var xd;
for(xd=0;xd<xdetail.length;xd++)
{
xdetail[xd].style.backgroundColor="#222d32";
xdetail[xd].style.border="none";
xdetail[xd].style.color="#b8c7ce";
}
dev_id_temp=($(event.target).attr('id'));
if (dev_id_temp==undefined)
id=dev_id.substring(6);
else
id=dev_id_temp.substring(6);
disp_detail(id);
}

function addbulkdevices()
{
  document.getElementById("choicenew").value="addbulk";
  var will_msg_type=document.getElementById("will_message_type").value;
  if (will_msg_type=="random")
    document.getElementById("will_message_txt").value=document.getElementById("will_random_message").value;
  else
    document.getElementById("will_message_txt").value=document.getElementById("will_start_message").value+" - "+document.getElementById("will_end_message").value;
  var al=$("form[name='bulk_form']").serialize();
  var topics_index=new Array();
  var ti=0;
  $('#bulk_form input, #bulk_form select').each(
    function(index){  
        var input = $(this);
        var str_name=input.attr('name')+'';
        if (str_name.indexOf('sub_topic')!=-1)
        {
        var s_index=str_name.substring(9);
        if (s_index.length>0)
        {
          topics_index[ti]=s_index;
          ti++;
        }
        }

    }
);
  document.getElementById("subscribe_ids").value=topics_index+'';

  $.ajax({


   url: '/',
data: $("form[name='bulk_form']").serialize(),
    type: "POST",
    async:false,
     success:function (msg) {
    },
    error:function(msg){
    }
    
});

}
function addactivedevices()
{
document.getElementById("activedev").style.color="#FA0000";
document.getElementById("alldev").style.color="#000000";
document.getElementById("addactiveflag").value="1";
$("#device").innerHTML="";
adddevices("myform",0);
}
function addalldevices()
{
document.getElementById("alldev").style.color="#FA0000";
document.getElementById("activedev").style.color="#000000";
document.getElementById("addactiveflag").value="0";
$("#device").innerHTML="";
adddevices("myform",0);
}








</script>



</body>
</html>
